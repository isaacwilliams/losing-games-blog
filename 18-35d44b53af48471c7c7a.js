(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{195:function(t,e,r){"use strict";var n=r(177),a=r(182),o=r(178),l=n.c.button.withConfig({displayName:"Button",componentId:"ekqulj-0"})([""," padding:0.25em 0.75em;font-weight:600;background:",";color:white;border-radius:3px;cursor:pointer;outline:none;&:hover{background:",";}"],a.b,o.d,o.c);e.a=l},340:function(t,e,r){"use strict";r.r(e);r(26),r(22),r(45),r(17),r(77),r(12),r(35);var n=r(0),a=r.n(n),o=r(211),l=r(194),i=r.n(l),u=r(207),c=function(t){return t.textContent},s=function(t){return[].slice.call(t)},d=function(t){return s(t.childNodes).map(c)},p=function(t){var e=d(t.querySelector("thead tr")),r=s(t.querySelectorAll("tbody tr")).map(d).map(function(t){return Object(u.zipObject)(e,t)}),n=e.reduce(function(t,e,n){var a;return Object.assign({},t,((a={})[e]=r.map(function(t){return t[e]}),a))},{});return{headers:e,tableData:n}},f=r(177),m=r(195),b=f.c.div.withConfig({displayName:"components__StyledTableRoller",componentId:"bl3r67-0"})(["margin:2rem 0;border:1px solid lightgrey;"]),h=f.c.div.withConfig({displayName:"components__StyledButtonsContainer",componentId:"bl3r67-1"})(["position:relative;padding:0.5rem;&:after{position:absolute;top:-0.35rem;right:0.8rem;content:'âš„';font-size:2rem;color:grey;}"]),g=Object(f.c)(m.a).withConfig({displayName:"components__RollerButton",componentId:"bl3r67-2"})(["margin-right:0.5rem;&.secondary{background:grey;&:hover{background:red;}}"]),v=f.c.span.withConfig({displayName:"components__RollerLabel",componentId:"bl3r67-3"})(["margin-right:0.5rem;color:#666;"]),y=f.c.div.withConfig({displayName:"components__StyledResult",componentId:"bl3r67-4"})(["padding:0.5rem;border-top:1px solid lightgrey;background:#eee;"]),_=f.c.div.withConfig({displayName:"components__StyledResultValue",componentId:"bl3r67-5"})(["margin-bottom:0.25rem;"]),w=f.c.span.withConfig({displayName:"components__StyledResultTitle",componentId:"bl3r67-6"})(["font-weight:600;margin-right:0.25rem;"]);var E=f.c.div.withConfig({displayName:"AppErrorBoundry__ErrorContainer",componentId:"sc-887yb1-0"})(["border:1px solid red;padding:0.5rem;"]),D=function(t){var e,r;function n(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).state={hasError:!1,errorDetails:null},e}return r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,n.getDerivedStateFromError=function(t){return{hasError:!0,errorDetails:t}},n.prototype.render=function(){var t=this.state,e=t.hasError,r=t.errorDetails;return e?a.a.createElement(E,null,r.toString()):this.props.children},n}(n.Component);var O=function(t){var e=t.buttons,r=t.rollResult;return a.a.createElement(h,null,e.map(function(t,e){var n=t[0],o=t[1],l=o["~~buttonStyle"];return"label"===o["~~buttonType"]?a.a.createElement(v,{className:l},n):a.a.createElement(g,{key:e,onClick:function(){return r(o)},className:l},n)}))},S=function(t){var e=t.result;return a.a.createElement(y,null,Object(o.toPairs)(e).map(function(t,e){var r=t[0],n=t[1];return a.a.createElement(_,{key:e},a.a.createElement(w,null,r,": "),a.a.createElement("span",null,n))}))},j=function(t){return function(e){return e.indexOf(t)>-1}},R=(j("|"),j(":")),C=j("{"),k=Object(o.omitBy)(function(t,e){return Object(o.startsWith)("~~",e)}),N=function(t){var e=t.defaultResult,r=t.tableData,n=t.headers;return function(t){if(j(t)(n))return r[t][e];if(R(t)){var a=t.split(":"),l=a[0],u=a[1],c=a[2],s=c||u,d=function(t,e){var r=i.a.roll(t);switch(e){case"lowest":return Object(o.min)(r.rolls);case"highest":return Object(o.max)(r.rolls);default:return r.total}}(l,c?u:void 0)-1;return r[s][d]}var p=i.a.roll(t).total;return p?p.toString():t}},I=function(t){var e=t.defaultResult,r=t.tableData,n=t.fields,a=t.headers;return function(t){var o=N({defaultResult:e,tableData:r,headers:a})(t);return o&&C(o)?function(t){var e=t.defaultResult,r=t.tableData,n=(t.fields,t.headers);return function(t){return t.split(/{([^}]+)}/g).filter(function(t){return!!t}).map(function(t){if(!j(t)(n)){var a=N({defaultResult:e,tableData:r,headers:n})(t);if(a)return a}var o=r[t];return o&&N({defaultResult:e,tableData:r,headers:n})("d"+o.length+":"+t)||t}).join("")}}({defaultResult:e,tableData:r,fields:n,headers:a})(o):o}},x=function(t){var e,r;function n(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).state={results:[]},e}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var l=n.prototype;return l.componentDidMount=function(){var t=this.props,e=t.table,r=void 0===e?"":e,n=t.data,a=[],o={};r.split(",").forEach(function(t){var e,r=(e=t,document.querySelector('*[data-table-marker="'+e+'"]').nextElementSibling),n=p(r),l=n.headers,i=n.tableData;a=[].concat(a,l),o=Object.assign({},o,{},i)});var l=n&&JSON.parse(n)||{};a=[].concat(a,Object.keys(l)),o=Object.assign({},o,{},l),this.setState({headers:a,tableData:o})},l.rollResult=function(t){try{var e=this.state,r=e.tableData,n=void 0===r?{}:r,a=e.headers,l=void 0===a?[]:a,u=e.results,c=t||l.reduce(function(t,e){var r;return Object.assign({},t,((r={})[e]=e,r))},{}),s=t["~~resultType"]||"replace",d=function(t){var e=t.tableData,r=t.fields,n=t.headers,a=r["~~roll"]||"d"+e[n[0]].length,l=i.a.roll(a).total-1;return Object(o.mapValues)(I({defaultResult:l,tableData:e,fields:r,headers:n}))(k(r))}({tableData:n,headers:l,fields:c});this.setState({results:"append"===s?[].concat(u,[d]):[d]})}catch(p){console.error(p),this.setState({error:p})}},l.render=function(){var t=this,e=this.props.buttons,r=this.state,n=(r.tableData,r.results),o=r.error;if(o)return a.a.createElement(E,null,o.toString());var l=e&&JSON.parse(e);return a.a.createElement(b,null,a.a.createElement(O,{buttons:l,rollResult:function(e){return t.rollResult(e)}}),n.map(function(t,e){return a.a.createElement(S,{key:e,result:t})}))},n}(n.Component);e.default=function(t){return a.a.createElement(D,null,a.a.createElement(x,t))}}}]);
//# sourceMappingURL=18-35d44b53af48471c7c7a.js.map