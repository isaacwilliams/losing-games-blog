{"version":3,"sources":["webpack:///./src/components/shared/Button.js","webpack:///./src/apps/portraitGenerator/img/heads.png","webpack:///./src/apps/portraitGenerator/img/eyes.png","webpack:///./src/apps/portraitGenerator/img/noses.png","webpack:///./src/apps/portraitGenerator/img/mouths.png","webpack:///./src/apps/portraitGenerator/img/hair-front.png","webpack:///./src/apps/portraitGenerator/img/hair-back.png","webpack:///./src/apps/portraitGenerator/img/hair-face.png","webpack:///./src/apps/portraitGenerator/img/bodies.png","webpack:///./src/apps/portraitGenerator/img/bodies-skin.png","webpack:///./src/apps/portraitGenerator/img/accessory-front.png","webpack:///./src/apps/portraitGenerator/img/accessory-back.png","webpack:///./src/apps/portraitGenerator/createSpriteSheet.js","webpack:///./src/apps/portraitGenerator/fetchAssets.js","webpack:///./src/apps/portraitGenerator/recolorImage.js","webpack:///./src/apps/portraitGenerator/drawPreloader.js","webpack:///./src/apps/portraitGenerator/portraitConstants.js","webpack:///./src/apps/portraitGenerator/drawPortrait.js","webpack:///./src/apps/portraitGenerator/PortraitGenerator.js"],"names":["styled_components__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_styles_reset__WEBPACK_IMPORTED_MODULE_1__","_styles_colors__WEBPACK_IMPORTED_MODULE_2__","Button","styled","button","withConfig","displayName","componentId","inputReset","colors","module","exports","p","createSpriteSheet","image","spriteWidth","spriteHeight","atlasWidth","Math","floor","width","atlasHeight","height","size","sprite","spriteId","locX","locY","buffer","document","createElement","getContext","drawImage","assets","loadImage","url","Promise","resolve","Image","addEventListener","src","fetchAssets","_ref","regenerator_default","a","mark","_callee","urls","fetched","wrap","_context","prev","next","length","abrupt","all","map","sent","stop","_x","apply","this","arguments","recolorImage","color","bx","fillStyle","fillRect","globalCompositeOperation","drawLoader","context","start","Date","cW","canvas","cH","setInterval","rotation","parseInt","save","clearRect","translate","rotate","PI","i","beginPath","moveTo","lineTo","lineWidth","strokeStyle","stroke","restore","greyscales","r","random","pick","array","max","min","getColorPicker","drawPortrait","skinVariance","hairVariance","clothingVariance","ctx","loaderInverval","_ref2","imgHeads","imgEyes","imgNoses","imgMouths","imgHairFront","imgHairBack","imgHairFace","imgBodies","imgBodiesSkin","imgAccessoryFront","imgAccessoryBack","pickColor","skinColor","hairColor","clothingColor","accessoryColor","heads","eyes","noses","mouths","hairFront","hairBack","hairFace","bodies","bodiesSkin","accessoryFront","accessoryBack","hairId","bodyId","accessoryId","drawPreloader","require","clearInterval","_x2","_x3","_x4","_x5","Canvas","media","phone","_templateObject","GeneratorOption","div","_templateObject2","OptionLabel","label","Portrait","state","componentDidMount","draw","_this$state","download","toDataURL","replace","downloadLink","setAttribute","render","_this2","_this$state2","react_default","ref","c","onClick","checked","value","onChange","event","setState","target","Fragment","type","step","Component"],"mappings":"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","file":"17-a7610da98447beb69533.js","sourcesContent":["import styled from 'styled-components';\nimport { inputReset } from '../styles/reset';\nimport * as colors from '../styles/colors';\n\nconst Button = styled.button`\n    ${inputReset}\n\n    padding: 0.25em 0.75em;\n    font-weight: 600;\n    background: ${colors.highlightAlt};\n    color: white;\n\n    border-radius: 3px;\n    cursor: pointer;\n\n    outline: none;\n\n    &: hover {\n        background: ${colors.highlight};\n    }\n`\n\nexport default Button;\n","module.exports = __webpack_public_path__ + \"static/heads-3a4387a375a9f322af1bb17bbec3eb2e.png\";","module.exports = __webpack_public_path__ + \"static/eyes-1d403e0361ec627daed5887e6f74c0ae.png\";","module.exports = __webpack_public_path__ + \"static/noses-a46f7deda35adb3a76e2f62ac3985ddb.png\";","module.exports = __webpack_public_path__ + \"static/mouths-d4f2dbfb962cd78670c184372ed5f0c8.png\";","module.exports = __webpack_public_path__ + \"static/hair-front-317437961cb5b9c3d537123f0c8b418a.png\";","module.exports = __webpack_public_path__ + \"static/hair-back-1aa2b6c2cd2af370e1fa208c4d5fb85d.png\";","module.exports = __webpack_public_path__ + \"static/hair-face-689c5cd5c4e660666d6e7c503bfcef70.png\";","module.exports = __webpack_public_path__ + \"static/bodies-ee419526cef3852e1c90d300faec2634.png\";","module.exports = __webpack_public_path__ + \"static/bodies-skin-637f269fc0a3fc1df5980f4ba66a9cbc.png\";","module.exports = __webpack_public_path__ + \"static/accessory-front-e032f74a6c4b9a8b300483b53ffde18b.png\";","module.exports = __webpack_public_path__ + \"static/accessory-back-87c70fc4c5159d2fdd6d209e31f3eb53.png\";","\nconst createSpriteSheet = (image, spriteWidth, spriteHeight) => {\n    const atlasWidth = Math.floor(image.width / spriteWidth);\n    const atlasHeight = Math.floor(image.height / spriteHeight);\n\n    return {\n        image: image,\n        size: atlasWidth * atlasHeight,\n        sprite: (spriteId) => {\n            const locX = spriteId % atlasWidth;\n            const locY = Math.floor(spriteId / atlasWidth);\n\n            // create offscreen buffer,\n            const buffer = document.createElement('canvas');\n            buffer.width = spriteWidth;\n            buffer.height = spriteHeight;\n            const bx = buffer.getContext('2d');\n\n            bx.drawImage(\n                image,\n                locX * spriteWidth,\n                locY * spriteHeight,\n                spriteWidth,\n                spriteHeight,\n                0,\n                0,\n                spriteWidth,\n                spriteHeight\n            );\n\n            return buffer;\n        },\n    };\n};\n\nexport default createSpriteSheet;\n","const loadImage = (url) => new Promise((resolve) => {\n    const image = new Image();\n\n    image.addEventListener('load', () => resolve(image));\n    image.src = url;\n});\n\nlet assets;\n\nconst fetchAssets = async (urls) => {\n    if (assets && assets.length === urls.length) return assets;\n\n    const fetched = await Promise.all(urls.map(loadImage));\n\n    assets = fetched;\n\n    return assets;\n};\n\nexport default fetchAssets;\n","const recolorImage = (image, color) => {\n    // create offscreen buffer,\n    const buffer = document.createElement('canvas');\n    buffer.width = image.width;\n    buffer.height = image.height;\n    const bx = buffer.getContext('2d');\n\n    bx.fillStyle = color;\n    bx.fillRect(0, 0, buffer.width, buffer.height);\n\n    bx.globalCompositeOperation = \"multiply\";\n    bx.drawImage(image, 0, 0);\n\n    bx.globalCompositeOperation = \"destination-in\";\n    bx.drawImage(image, 0, 0);\n\n    return buffer;\n};\n\nexport default recolorImage;\n","\nconst drawLoader = (context) => {\n    const start = new Date();\n    const lines = 16;\n    const cW = context.canvas.width;\n    const cH = context.canvas.height;\n\n    const draw = () => {\n        const rotation = parseInt(((new Date() - start) / 1000) * lines) / lines;\n\n        context.save();\n        context.clearRect(0, 0, cW, cH);\n        context.translate(cW / 2, cH / 2);\n        context.rotate(Math.PI * 2 * rotation);\n\n        for (let i = 0; i < lines; i++) {\n            context.beginPath();\n            context.rotate(Math.PI * 2 / lines);\n            context.moveTo(15, 0);\n            context.lineTo(25, 0);\n            context.lineWidth = 2;\n            context.strokeStyle = `rgba(0,0,0,${i / lines})`;\n            context.stroke();\n        }\n\n        context.restore();\n    };\n\n    return setInterval(draw, 1000 / 30);\n};\n\nexport default drawLoader;\n","\nexport const greyscales = [\n    '#ffffff',\n    '#f6f6f6',\n    '#e4e4e4',\n    '#b6b6b6',\n    '#929292',\n    '#686868',\n    '#454545',\n    '#393939',\n];\n\nexport const colors = [\n    '#fbd1bf',\n    '#cb977f',\n    '#db6f56',\n    '#f0d0c8',\n    '#c19877',\n    '#956d4d',\n    '#633728',\n    '#5b3735',\n    '#eb9840',\n    '#e2deb5',\n    '#f7e1e1',\n    '#7e675f',\n    // weird colors below\n    '#eee476',\n    '#87db73',\n    '#90daef',\n    '#d37b2d',\n    '#f7738c',\n    '#e24261',\n    '#b582d6',\n    '#bab163',\n    '#a8d676',\n    '#698b98',\n    '#58666b',\n    '#66586b',\n    // greyscales\n    '#e4e4e4',\n    '#b6b6b6',\n    '#929292',\n    '#686868',\n    '#454545',\n    '#393939',\n    // more weird colors\n    '#5ff892',\n    '#5ec9c5',\n    '#fcc919',\n    '#30a4ee',\n    '#d651ee',\n    '#fa427a',\n    '#6554ce',\n    '#433b73',\n    '#683b73',\n    '#183f3a',\n    '#3e593e',\n    '#c3e0c1',\n];\n","import createSpriteSheet from './createSpriteSheet';\nimport fetchAssets from './fetchAssets';\nimport recolorImage from './recolorImage';\nimport drawPreloader from './drawPreloader';\nimport { colors, greyscales } from './portraitConstants';\n\nconst r = (size) => Math.floor(Math.random() * size);\nconst pick = (array) => (max) => array[r(Math.min(max, array.length))];\n\nconst getColorPicker = (fillStyle) => {\n    switch (fillStyle) {\n        case 'lineart':\n            return pick(['#ffffff']);\n        case 'greyscale':\n            return pick(greyscales);\n        default:\n            return pick(colors);\n    }\n};\n\nconst drawPortrait = async (canvas, skinVariance = 12, hairVariance = 24, clothingVariance = 32, fillStyle = 'colors') => {\n    const ctx = canvas.getContext('2d');\n\n    const loaderInverval = drawPreloader(ctx);\n\n    const [\n        imgHeads,\n        imgEyes,\n        imgNoses,\n        imgMouths,\n        imgHairFront,\n        imgHairBack,\n        imgHairFace,\n        imgBodies,\n        imgBodiesSkin,\n        imgAccessoryFront,\n        imgAccessoryBack,\n    ] = await fetchAssets([\n        require('./img/heads.png'),\n        require('./img/eyes.png'),\n        require('./img/noses.png'),\n        require('./img/mouths.png'),\n        require('./img/hair-front.png'),\n        require('./img/hair-back.png'),\n        require('./img/hair-face.png'),\n        require('./img/bodies.png'),\n        require('./img/bodies-skin.png'),\n        require('./img/accessory-front.png'),\n        require('./img/accessory-back.png'),\n    ]);\n\n    clearInterval(loaderInverval);\n\n    ctx.fillStyle = '#ffffff';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    const pickColor = getColorPicker(fillStyle);\n\n    const skinColor = pickColor(skinVariance);\n    const hairColor = pickColor(hairVariance);\n    const clothingColor = pickColor(clothingVariance);\n    const accessoryColor = pickColor(clothingVariance);\n\n    const heads = createSpriteSheet(imgHeads, 512, 512);\n    const eyes = createSpriteSheet(imgEyes, 512, 512);\n    const noses = createSpriteSheet(imgNoses, 512, 512);\n    const mouths = createSpriteSheet(imgMouths, 512, 512);\n    const hairFront = createSpriteSheet(imgHairFront, 512, 512);\n    const hairBack = createSpriteSheet(imgHairBack, 512, 512);\n    const hairFace = createSpriteSheet(imgHairFace, 512, 512);\n    const bodies = createSpriteSheet(imgBodies, 512, 512);\n    const bodiesSkin = createSpriteSheet(imgBodiesSkin, 512, 512);\n    const accessoryFront = createSpriteSheet(imgAccessoryFront, 512, 512);\n    const accessoryBack = createSpriteSheet(imgAccessoryBack, 512, 512);\n\n    const hairId = r(hairFront.size);\n    const bodyId = r(bodies.size);\n    const accessoryId = r(accessoryFront.size);\n\n    ctx.drawImage(recolorImage(accessoryBack.sprite(accessoryId), accessoryColor), 0, 0);\n    ctx.drawImage(recolorImage(hairBack.sprite(hairId), hairColor), 0, 0);\n    ctx.drawImage(recolorImage(bodiesSkin.sprite(bodyId), skinColor), 0, 0);\n    ctx.drawImage(recolorImage(bodies.sprite(bodyId), clothingColor), 0, 0);\n    ctx.drawImage(recolorImage(heads.sprite(r(heads.size)), skinColor), 0, 0);\n    ctx.drawImage(mouths.sprite(r(mouths.size)), 0, 0);\n    ctx.drawImage(eyes.sprite(r(eyes.size)), 0, 0);\n    Math.random() < 0.1 && ctx.drawImage(recolorImage(hairFace.sprite(r(8)), hairColor), 0, 0);\n    ctx.drawImage(recolorImage(noses.sprite(r(noses.size)), skinColor), 0, 0);\n    ctx.drawImage(recolorImage(hairFront.sprite(hairId), hairColor), 0, 0);\n    ctx.drawImage(recolorImage(accessoryFront.sprite(accessoryId), accessoryColor), 0, 0);\n};\n\nexport default drawPortrait;\n","import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport media from '../../components/styles/media';\n\nimport drawPortrait from './drawPortrait';\nimport { colors } from './portraitConstants';\n\nimport Button from '../../components/shared/Button';\n\nconst Canvas = styled.canvas`\n    width: 512px;\n    height: 512px;\n\n    ${media.phone`\n        width: 300px;\n        height: 300px;\n    `}\n`\n\nconst GeneratorOption = styled.div`\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    align-items: center;\n    margin: 0.5rem 0;\n\n    ${media.phone`\n        font-size: 0.9rem;\n    `}\n`\n\nconst OptionLabel = styled.label`\n    display: inline-block;\n    width: 16rem;\n`\n\nclass Portrait extends Component {\n    state = { skinVariance: 12, hairVariance: 24, clothingVariance: colors.length, fillStyle: \"colors\" }\n\n    componentDidMount() {\n        this.draw();\n    }\n\n    draw() {\n        const { skinVariance, hairVariance, clothingVariance, fillStyle } = this.state;\n\n        drawPortrait(this.canvas, skinVariance, hairVariance, clothingVariance, fillStyle);\n    }\n\n    download() {\n        const image = this.canvas.toDataURL(\"image/png\").replace(\"image/png\", \"image/octet-stream\");\n        this.downloadLink.setAttribute(\"href\", image);\n    }\n\n    render() {\n        const { skinVariance, hairVariance, clothingVariance, fillStyle } = this.state;\n\n        return (\n            <div>\n                <Canvas ref={(c) => { this.canvas = c; }} width=\"512\" height=\"512\" />\n\n                <br /><br />\n                <p>\n                    <Button onClick={() => this.draw()}>New portrait</Button>\n                    {' '}\n                    <a ref={(c) => { this.downloadLink = c; }} download=\"portrait.png\">\n                        <Button onClick={() => this.download()}>Download</Button>\n                    </a>\n                </p>\n\n                <div>\n                    <GeneratorOption>\n                        <OptionLabel>Fill style</OptionLabel>\n                        <select checked={colors} value={fillStyle} onChange={(event) => this.setState({ fillStyle: event.target.value })}>\n                            <option value=\"colors\">Colors</option>\n                            <option value=\"greyscale\">Greyscale</option>\n                            <option value=\"lineart\">Lineart</option>\n                        </select>\n                    </GeneratorOption>\n                    {fillStyle == \"colors\" && (\n                        <>\n                            <GeneratorOption>\n                                <OptionLabel>Skin color variance</OptionLabel>\n                                <input type=\"range\" min=\"6\" max={colors.length} step=\"6\"\n                                        value={skinVariance}\n                                        onChange={(event) => this.setState({ skinVariance: parseInt(event.target.value) })} />\n                            </GeneratorOption>\n                            <GeneratorOption>\n                                <OptionLabel>Hair color variance</OptionLabel>\n                                <input type=\"range\" min=\"6\" max={colors.length} step=\"6\"\n                                        value={hairVariance}\n                                        onChange={(event) => this.setState({ hairVariance: parseInt(event.target.value) })} />\n                            </GeneratorOption>\n                            <GeneratorOption>\n                                <OptionLabel>Clothing color variance</OptionLabel>\n                                <input type=\"range\" min=\"6\" max={colors.length} step=\"6\"\n                                        value={clothingVariance}\n                                        onChange={(event) => this.setState({ clothingVariance: parseInt(event.target.value) })} />\n                            </GeneratorOption>\n                        </>\n                    )}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Portrait;\n"],"sourceRoot":""}