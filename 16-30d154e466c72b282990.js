(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{164:function(t,e,r){"use strict";var n=r(137),a=r(144),o=r(139),i=n.c.button.withConfig({displayName:"Button",componentId:"sc-3uo7g7-0"})([""," padding:0.25em 0.75em;font-weight:600;background:",";color:white;border-radius:3px;cursor:pointer;outline:none;&:hover{background:",";}"],a.b,o.d,o.c);e.a=i},204:function(t,e,r){"use strict";r(278);var n=r(10),a=r(205),o=r(14),i=/./.toString,l=function(t){r(15)(RegExp.prototype,"toString",t,!0)};r(21)(function(){return"/a/b"!=i.call({source:"a",flags:"b"})})?l(function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?a.call(t):void 0)}):"toString"!=i.name&&l(function(){return i.call(this)})},205:function(t,e,r){"use strict";var n=r(10);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},276:function(t,e,r){var n=r(31),a=r(30);r(277)("keys",function(){return function(t){return a(n(t))}})},277:function(t,e,r){var n=r(22),a=r(16),o=r(21);t.exports=function(t,e){var r=(a.Object||{})[t]||Object[t],i={};i[t]=e(r),n(n.S+n.F*o(function(){r(1)}),"Object",i)}},278:function(t,e,r){r(14)&&"g"!=/./g.flags&&r(23).f(RegExp.prototype,"flags",{configurable:!0,get:r(205)})},281:function(t,e,r){"use strict";r.r(e);r(47),r(276),r(29),r(66);var n=r(6),a=r.n(n),o=(r(204),r(68),r(0)),i=r.n(o),l=r(168),u=r(153),c=r.n(u),s=r(161),d=function(t){return t.textContent},f=function(t){return[].slice.call(t)},p=function(t){return f(t.childNodes).map(d)},m=function(t){var e=p(t.querySelector("thead tr")),r=f(t.querySelectorAll("tbody tr")).map(p).map(function(t){return Object(s.zipObject)(e,t)}),n=e.reduce(function(t,e,n){var a;return Object.assign({},t,((a={})[e]=r.map(function(t){return t[e]}),a))},{});return{headers:e,tableData:n}},g=r(137),b=r(164),h=g.c.div.withConfig({displayName:"components__StyledTableRoller",componentId:"zdcsbg-0"})(["margin:2rem 0;border:1px solid lightgrey;"]),v=g.c.div.withConfig({displayName:"components__StyledButtonsContainer",componentId:"zdcsbg-1"})(["position:relative;padding:0.5rem;&:after{position:absolute;top:-0.35rem;right:0.8rem;content:'âš„';font-size:2rem;color:grey;}"]),y=Object(g.c)(b.a).withConfig({displayName:"components__RollerButton",componentId:"zdcsbg-2"})(["margin-right:0.5rem;&.secondary{background:grey;&:hover{background:red;}}"]),E=g.c.div.withConfig({displayName:"components__StyledResult",componentId:"zdcsbg-3"})(["padding:0.5rem;border-top:1px solid lightgrey;background:#eee;"]),S=g.c.div.withConfig({displayName:"components__StyledResultValue",componentId:"zdcsbg-4"})(["margin-bottom:0.25rem;"]),w=g.c.span.withConfig({displayName:"components__StyledResultTitle",componentId:"zdcsbg-5"})(["font-weight:600;margin-right:0.25rem;"]),D=g.c.div.withConfig({displayName:"AppErrorBoundry__ErrorContainer",componentId:"lsxplv-0"})(["border:1px solid red;padding:0.5rem;"]),O=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).state={hasError:!1,errorDetails:null},e}return a()(e,t),e.getDerivedStateFromError=function(t){return{hasError:!0,errorDetails:t}},e.prototype.render=function(){var t=this.state,e=t.hasError,r=t.errorDetails;return e?i.a.createElement(D,null,r.toString()):this.props.children},e}(o.Component),R=function(t){var e=t.buttons,r=t.rollResult;return i.a.createElement(v,null,e.map(function(t,e){var n=t[0],a=t[1],o=a["~~buttonStyle"];return i.a.createElement(y,{key:e,onClick:function(){return r(a)},className:o},n)}))},j=function(t){var e=t.result;return i.a.createElement(E,null,Object(l.toPairs)(e).map(function(t,e){var r=t[0],n=t[1];return i.a.createElement(S,{key:e},i.a.createElement(w,null,r,": "),i.a.createElement("span",null,n))}))},k=function(t){return function(e){return e.indexOf(t)>-1}},C=(k("|"),k(":")),x=k("{"),_=Object(l.omitBy)(function(t,e){return Object(l.startsWith)("~~",e)}),N=function(t){var e=t.defaultResult,r=t.tableData,n=t.headers;return function(t){if(k(t)(n))return r[t][e];if(C(t)){var a=t.split(":"),o=a[0],i=a[1],u=a[2],s=u||i,d=function(t,e){var r=c.a.roll(t);switch(e){case"lowest":return Object(l.min)(r.rolls);case"highest":return Object(l.max)(r.rolls);default:return r.total}}(o,u?i:void 0)-1;return r[s][d]}var f=c.a.roll(t).total;return f?f.toString():t}},z=function(t){var e=t.defaultResult,r=t.tableData,n=t.fields,a=t.headers;return function(t){var o=N({defaultResult:e,tableData:r,headers:a})(t);return o&&x(o)?function(t){var e=t.defaultResult,r=t.tableData,n=(t.fields,t.headers);return function(t){return t.split(/{([^}]+)}/g).filter(function(t){return!!t}).map(function(t){if(!k(t)(n)){var a=N({defaultResult:e,tableData:r,headers:n})(t);if(a)return a}var o=r[t];return o&&N({defaultResult:e,tableData:r,headers:n})("d"+o.length+":"+t)||t}).join("")}}({defaultResult:e,tableData:r,fields:n,headers:a})(o):o}},I=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).state={results:[]},e}a()(e,t);var r=e.prototype;return r.componentDidMount=function(){var t=this.props,e=t.table,r=void 0===e?"":e,n=t.data,a=[],o={};r.split(",").forEach(function(t){var e,r=(e=t,document.querySelector('*[data-table-marker="'+e+'"]').nextElementSibling),n=m(r),i=n.headers,l=n.tableData;a=a.concat(i),o=Object.assign({},o,l)});var i=n&&JSON.parse(n)||{};a=a.concat(Object.keys(i)),o=Object.assign({},o,i),this.setState({headers:a,tableData:o})},r.rollResult=function(t){try{var e=this.state,r=e.tableData,n=void 0===r?{}:r,a=e.headers,o=void 0===a?[]:a,i=e.results,u=t||o.reduce(function(t,e){var r;return Object.assign({},t,((r={})[e]=e,r))},{}),s=t["~~resultType"]||"replace",d=function(t){var e=t.tableData,r=t.fields,n=t.headers,a=r["~~roll"]||"d"+e[n[0]].length,o=c.a.roll(a).total-1;return Object(l.mapValues)(z({defaultResult:o,tableData:e,fields:r,headers:n}))(_(r))}({tableData:n,headers:o,fields:u});this.setState({results:"append"===s?i.concat([d]):[d]})}catch(t){console.error(t),this.setState({error:t})}},r.render=function(){var t=this,e=this.props.buttons,r=this.state,n=(r.tableData,r.results),a=r.error;if(a)return i.a.createElement(D,null,a.toString());var o=e&&JSON.parse(e);return i.a.createElement(h,null,i.a.createElement(R,{buttons:o,rollResult:function(e){return t.rollResult(e)}}),n.map(function(t,e){return i.a.createElement(j,{key:e,result:t})}))},e}(o.Component);e.default=function(t){return i.a.createElement(O,null,i.a.createElement(I,t))}}}]);
//# sourceMappingURL=16-30d154e466c72b282990.js.map