{"version":3,"sources":["components/header/icon-help.svg","components/header/icon-settings.svg","components/header/dicematch-logo-wide.svg","constants/index.js","components/AnimatedDieFace.js","components/getDieColor.js","components/DieFace.js","components/Die.js","components/GameBoard.js","util/useLocalStorage.js","components/modal/GameOverScoreTable.js","components/modal/Modal.js","components/modal/GameOverModal.js","components/header/GameHeaderBar.js","components/gameStatus/UpcomingDice.js","components/gameStatus/Level.js","components/gameStatus/Moves.js","components/gameStatus/Score.js","components/gameStatus/GameStatusBar.js","components/ScoreAnnouncer.js","util/circularClamp.js","util/rollDie.js","reducers/dieReducer.js","components/modal/MeetDice.js","components/modal/HelpModal.js","components/modal/SettingsModal.js","constants/themes.js","App.js","reducers/createDieState.js","util/getDieFromBoard.js","util/findBoardMatches.js","reducers/gameBoardReducer.js","reducers/movesReducer.js","reducers/levelReducer.js","reducers/gameStateReducer.js","reducers/trackingReducer.js","reducers/themeReducer.js","reducers/rootReducer.js","reducers/scoreReducer.js","reducers/inputEnabledReducer.js","reducers/modalReducer.js","store/matchSagas.js","index.js","store/configureStore.js"],"names":["module","exports","__webpack_require__","p","ACTIONS","ADD_SCORE","UPDATE_DIE","REMOVE_DIE","ADD_DIE","MOVE_DIE","CASCADE_DICE","INPUT_DISABLE","INPUT_ENABLE","ADD_MOVES","SET_LEVEL","GAME_END","GAME_RESET","OPEN_MODAL","CLOSE_MODAL","SET_THEME","DIE_TYPES","UP","DOWN","RANDOM","BLOCKER","FLIP","BOMB","GAME_STATES","MODALS","BOARD_WIDTH","BOARD_HEIGHT","scaleInVertical","keyframes","_templateObject","scaleOutVertical","_templateObject2","scaleInHorizontal","_templateObject3","scaleOutHorizontal","_templateObject4","shake","degree","_templateObject5","FaceContainer","styled","div","_templateObject14","animatedChild","css","_templateObject15","CurrentChild","_templateObject16","_ref","dieType","diceSize","animate","_templateObject6","_templateObject7","_templateObject8","_templateObject9","PrevChild","_templateObject17","_ref2","_templateObject10","_templateObject11","_templateObject12","_templateObject13","AnimatedDieFace","state","prevChildren","removePrevChild","id","_this","setState","_ref3","filter","child","_this2","this","_ref4","value","props","concat","Object","toConsumableArray","children","timeout","setTimeout","_this3","_this$props","react_default","a","createElement","className","assign","length","key","map","_ref5","React","Component","flicker","getDieColor_templateObject","getDieColor","getDieColor_templateObject2","theme","dice","down","pip","getDieColor_templateObject3","blocker","getDieColor_templateObject4","_ref6","_ref7","random","getDieColor_templateObject5","_ref8","_ref9","getDieColor_templateObject6","_ref10","flip","_ref11","getDieColor_templateObject7","_ref12","up","_ref13","DieSvg","svg","DieFace_templateObject","getPos","size","percent","margin","Pip","x","y","objectWithoutProperties","r","cx","cy","Face0","width","height","Face1","DieFace_Pip","Face2","Face3","Face4","Face5","Face6","DieFace","DieFace_Face1","DieFace_Face2","DieFace_Face3","DieFace_Face4","DieFace_Face5","DieFace_Face6","DieFace_Face0","DieButton","Die_templateObject","Positioner","Die_templateObject2","getInlineStyle","transform","DiePositioner","style","Die","handleDieUpdate","moves","inputEnabled","updateDie","limit","used","Die_DiePositioner","onClick","components_AnimatedDieFace","components_DieFace","defaultStyle","transition","opacity","transitionStyles","entering","entered","exiting","Fade","react_transition_group","objectSpread","BoardWrapper","GameBoard_templateObject","background","Board","GameBoard_templateObject2","getBoardSize","GameBoard","gameBoard","die","i","GameBoard_Fade","components_Die","useLocalStorage","initialValue","transformFn","arguments","undefined","JSON","parse","_useState","useState","item","localStorage","getItem","error","_useState2","slicedToArray","storedValue","setStoredValue","valueToStore","Function","setItem","stringify","Table","table","GameOverScoreTable_templateObject","Th","th","GameOverScoreTable_templateObject2","Td","td","GameOverScoreTable_templateObject3","scores","textSecondary","ScoreEntry","tr","GameOverScoreTable_templateObject4","currentScore","currentScoreBackground","ScoreTable","currentScoreId","endTime","score","level","isCurrentScore","gameEndDateFormat","Date","toLocaleDateString","year","month","day","containerEnter","Modal_templateObject","modalEnter","Modal_templateObject2","containerExit","Modal_templateObject3","modalExit","Modal_templateObject4","ModalContainer","Modal_templateObject5","StyledModal","Modal_templateObject6","foreground","modal","CloseButton","button","Modal_templateObject7","connect","dispatch","closeModal","type","showCloseButton","closing","setClosing","Title","h1","GameOverModal_templateObject","divider","RestartButton","GameOverModal_templateObject2","buttonBackground","buttonColor","ScoreDisplay","name","_ref4$level","clearedDice","upcomingDice","_ref4$tracking","tracking","gameId","gameStart","gameEnd","setInputActive","_useLocalStorage","_useLocalStorage2","setScores","currentGameScore","diceCleared","diceRemainingInLevel","turnsUsed","startTime","useEffect","find","previousScores","sort","b","slice","newScores","GameOverScoreTable","GameOverModal","restartGame","modal_Modal","GameOverModal_ScoreDisplay","GameHeaderBarContainer","GameHeaderBar_templateObject","backgroundSecondary","Button","GameHeaderBar_templateObject2","HelpButton","GameHeaderBar_templateObject3","require","SettingsButton","GameHeaderBar_templateObject4","GameTitle","GameHeaderBar_templateObject5","GameHeaderBar","openModal","theming","interface","StyledUpcomingDice","UpcomingDice_templateObject","header","MiniDie","UpcomingDice_templateObject2","More","span","UpcomingDice_templateObject3","UpcomingDice","nextNiceDisplay","nextMore","StyledLevelContainer","Level_templateObject","backgroundInset","StyledLevel","Level_templateObject2","text","Level","gameStatus_UpcomingDice","Moves_templateObject","StyledMoves","Moves_templateObject2","border","Moves_templateObject3","Moves_templateObject4","Moves_templateObject5","Moves_templateObject6","StepBox","Moves_templateObject7","ready","danger","warning","insideBorder","Moves","_ref9$moves","cap","movesLeft","times","index","StyledScore","Score_templateObject","Score","GameStatus","GameStatusBar_templateObject","GameStatusBar","gameStatus_Score","gameStatus_Level","gameStatus_Moves","Announcements","ScoreAnnouncer_templateObject","position","top","left","textAlign","marginLeft","marginTop","ScoreAnnouncer","announcements","aId","gameState","drop","change","ScoreAnnouncer_Fade","circularClamp","min","max","rollDie","dieSize","Math","floor","ensureIdMatch","subReducer","action","updateDieUp","updateDieDown","updateDieRandom","roll","valueForFlip","updateDieFlip","updateDieBomb","moveDie","MeetDieContainer","MeetDice_templateObject","bounceLeft","MeetDice_templateObject2","bounceRight","MeetDice_templateObject3","NavigateButton","MeetDice_templateObject4","DieListContainer","MeetDice_templateObject5","DieContainer","MeetDice_templateObject6","foregroundSecondary","MeetDice_templateObject7","DICE_DESCRIPTIONS","description","updater","MeetDice","viewIndex","setViewIndex","_useState3","_useState4","dieDescriptions","setDieDescriptions","atStart","atEnd","navigate","direction","clamp","console","log","disabled","MeetDice_DieButton","FlexCenter","HelpModal_templateObject","Header","HelpModal_templateObject2","Line","HelpModal_templateObject3","DieDisplay","HelpModal_templateObject4","LevelDisplay","HelpModal_templateObject5","HelpModal","modal_MeetDice","SettingsModal_templateObject","SettingsRow","SettingsModal_templateObject2","highlight","SettingsModal_templateObject3","toggleInterfaceTheme","currentInterface","SettingsModal_Header","onChange","checked","SettingsModal_RestartButton","href","colors","white","black","charcoal","charcoal_200","charcoal_100","grey_100","grey_200","grey_300","grey_400","grey_500","grey_700","grey_900","grey_1000","grey_1100","red","teal","green","yellow","yellow_700","yellow_900","beige","THEME_LIGHT","THEME_DARK","clampDieSize","AppContainer","App_templateObject","GameContainer","App_templateObject2","GlobalStyle","createGlobalStyle","App_templateObject3","App","getDiceSize","window","innerWidth","addEventListener","removeEventListener","_this$props$theming","styled_components_browser_esm","Helmet","content","header_GameHeaderBar","gameStatus_GameStatusBar","components_GameBoard","components_ScoreAnnouncer","modal_GameOverModal","modal_HelpModal","modal_SettingsModal","initialValueFor","createDieState","nanoid","getDieFromBoard","board","checkDiceMatch","nextDie","getId","intersectionById","intersectionBy","uniqById","uniqBy","findMatches","horzontalMatches","getDie","matchGroups","currGroup","push","hasMatch","findMatchesHorizontal","verticalMatches","reverse","findMatchesVertical","hGroup","intersectingGroup","vGroup","getInitalState","findBoardMatches","deferToDice","dieState","dieReducer","getDieToShift","initialState","clampVal","Infinity","round","log10","getCountDown","getCountFlip","getCountRandom","getCountBlocker","getCountBomb","checkForRuns","levelDice","getLevelDice","attempts","shuffle","darkMode","matchMedia","matches","combineReducers","removeDie","addDie","updatedState","dieToShift","cascadeDice","multiplier","handleMatchGroup","removeMatches","onUpdateDie","matchSaga","delay","duration","Promise","resolve","getMatchScore","matchLength","getScoreValueBonus","matchValue","removedDie","regenerator_default","wrap","_context","prev","next","select","sent","put","stop","_marked","matchGroup","scoreMultipler","gameBoardIds","diceToRemove","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","_context2","includes","all","first","Symbol","iterator","done","t0","return","finish","_marked2","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","nextMatches","_args3","_context3","abrupt","_marked3","BOMB_MATRIX","findDiceToExplode","getDieAt","offsetX","offsetY","postMatchState","diceToExplode","finalState","_context4","_marked4","_context5","takeEvery","_marked5","store","sagaMiddleware","createSagaMiddleware","applyMiddleware","createLogger","collapsed","save","namespace","ignoreStates","createStore","createStoreWithMiddleware","rootReducer","load","run","sagas","_store","configureStore","ReactDOM","render","es","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.63be93ec.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/icon-help.c70881f6.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon-settings.9693a6fc.svg\";","module.exports = __webpack_public_path__ + \"static/media/dicematch-logo-wide.715a1ddf.svg\";","export const ACTIONS = {\n    ADD_SCORE: 'ADD_SCORE',\n\n    UPDATE_DIE: 'UPDATE_DIE',\n    REMOVE_DIE: 'REMOVE_DIE',\n    ADD_DIE: 'ADD_DIE',\n    MOVE_DIE: 'MOVE_DIE',\n\n    CASCADE_DICE: 'CASCADE_DICE',\n\n    INPUT_DISABLE: 'INPUT_DISABLE',\n    INPUT_ENABLE: 'INPUT_ENABLE',\n\n    ADD_MOVES: 'ADD_MOVES',\n\n    SET_LEVEL: 'SET_LEVEL',\n\n    GAME_END: 'GAME_END',\n    GAME_RESET: 'GAME_RESET',\n\n    OPEN_MODAL: 'OPEN_MODAL',\n    CLOSE_MODAL: 'CLOSE_MODAL',\n\n    SET_THEME: 'SET_THEME',\n};\n\nexport const DIE_TYPES = {\n    UP: 'UP',\n    DOWN: 'DOWN',\n    RANDOM: 'RANDOM',\n    BLOCKER: 'BLOCKER',\n    FLIP: 'FLIP',\n    BOMB: 'BOMB',\n}\n\nexport const GAME_STATES = {\n    ACTIVE: 'ACTIVE',\n    FINISHED: 'FINISHED',\n};\n\nexport const MODALS = {\n    HELP: 'HELP',\n    SETTINGS: 'SETTINGS',\n    SCORE: 'SCORE',\n};\n\nexport const BOARD_WIDTH = 5;\nexport const BOARD_HEIGHT = 6;\n\nexport const MIN_MATCH_LENGTH = 3;\n","import React from 'react';\nimport styled, { keyframes, css } from 'styled-components';\n\nimport { DIE_TYPES } from '../constants';\n\nconst ANIMATION_DUR = 200;\n\nconst scaleInVertical = keyframes`\n    0% { transform: scaleY(0); filter: brightness(0.5); }\n    100% { transform: scaleY(1); filter: brightness(1); }\n`;\n\nconst scaleOutVertical = keyframes`\n    0% { transform: scaleY(1); filter: brightness(1); }\n    100% { transform: scaleY(0); filter: brightness(0.5); }\n`;\n\nconst scaleInHorizontal = keyframes`\n    0% { transform: scaleX(0); filter: brightness(0.5); }\n    100% { transform: scaleX(1); filter: brightness(1); }\n`;\n\nconst scaleOutHorizontal = keyframes`\n    0% { transform: scaleX(1); filter: brightness(1); }\n    100% { transform: scaleX(0); filter: brightness(0.5); }\n`;\n\nconst shake = (degree) => keyframes`\n    0% {\n        transform: rotate(0deg);\n    }\n    25% {\n        transform: rotate(-${degree}deg);\n    }\n    50% {\n      transform: rotate(0deg);\n    }\n    75% {\n        transform: rotate(${degree}deg);\n    }\n`;\n\nconst getEnterAnimation = ({ dieType, diceSize, animate }) => {\n    if (!animate) return null;\n\n    switch (dieType) {\n        case DIE_TYPES.DOWN:\n            return css`\n                animation: ${scaleInVertical} ${ANIMATION_DUR}ms linear forwards;\n                transform-origin: top center;\n            `;\n        case DIE_TYPES.RANDOM:\n            return css`\n                animation: ${shake(10)} 10ms linear infinite;\n            `;\n        case DIE_TYPES.FLIP:\n            return css`\n                animation: ${scaleInHorizontal} 100ms ease-in-out forwards;\n            `;\n        default:\n            return css`\n                animation: ${scaleInVertical} ${ANIMATION_DUR}ms linear forwards;\n                transform-origin: bottom center;\n            `;\n    }\n};\n\nconst getExitAnimation = ({ dieType, diceSize }) => {\n    switch (dieType) {\n        case DIE_TYPES.DOWN:\n            return css`\n                animation: ${scaleOutVertical} ${ANIMATION_DUR}ms linear forwards;\n                transform-origin: bottom center;\n            `;\n        case DIE_TYPES.RANDOM:\n            return css`\n                animation: ${shake(10)} 10ms linear infinite;\n            `;\n        case DIE_TYPES.FLIP:\n            return css`\n                animation: ${scaleOutHorizontal} 100ms ease-in-out forwards;\n            `;\n        default:\n            return css`\n                animation: ${scaleOutVertical} ${ANIMATION_DUR}ms linear forwards;\n                transform-origin: top center;\n            `;\n    }\n}\n\nconst FaceContainer = styled.div`\n    position: relative;\n`;\n\nconst animatedChild = css`\n    position: absolute;\n    top: 0;\n    left: 0;\n\n    transform: translate3d(0, 0, 0);\n`;\n\nconst CurrentChild = styled.div`\n    ${animatedChild}\n    ${getEnterAnimation}\n`;\n\nconst PrevChild = styled.div`\n    ${animatedChild}\n    ${getExitAnimation}\n`;\n\nclass AnimatedDieFace extends React.Component {\n    state = { prevChildren: [] };\n\n    componentWillReceiveProps({ value }) {\n        if (value !== this.props.value) {\n            const id = this.props.value;\n\n            this.setState((state) => ({\n                prevChildren: [\n                    ...state.prevChildren,\n                    {\n                        child: this.props.children,\n                        id: id,\n                        timeout: setTimeout(this.removePrevChild(id), ANIMATION_DUR)\n                    }\n                ]\n            }));\n        }\n    }\n\n    removePrevChild = (id) => () => (\n        this.setState(({ prevChildren }) => ({\n            prevChildren: prevChildren.filter((child) => child.id !== id),\n        }))\n    );\n\n    render() {\n        const { prevChildren } = this.state;\n        const { children, value } = this.props;\n\n        return (\n            <FaceContainer className=\"FACE\">\n                <CurrentChild {...this.props} animate={prevChildren.length} key={value}>\n                    {children}\n                </CurrentChild>\n\n                {prevChildren.map(({ child, id }) => <PrevChild {...this.props} key={id}>{child}</PrevChild>)}\n            </FaceContainer>\n        )\n    }\n}\n\nexport default AnimatedDieFace;\n","import { css, keyframes } from 'styled-components';\n\nimport { DIE_TYPES } from '../constants';\n\nconst flicker = keyframes`\n    0% { opacity: 0; }\n    50% { opacity: 1; }\n    100% { opacity: 0; }\n`;\n\nconst getDieColor = ({ dieType, value }) => {\n    switch (dieType) {\n        case DIE_TYPES.DOWN:\n            return css`\n                background: ${({ theme }) => theme.dice.down};\n\n                circle {\n                    fill: ${({ theme }) => theme.dice.pip};\n                    opacity: 0.7;\n                }\n            `;\n        case DIE_TYPES.BLOCKER:\n            return css`\n                background: ${({ theme }) => theme.dice.blocker};\n\n                circle {\n                    fill: ${({ theme }) => theme.dice.pip};\n                    opacity: 0.4;\n                }\n            `;\n        case DIE_TYPES.BOMB:\n            return css`\n                background: ${({ theme }) => theme.dice.blocker};\n\n                circle {\n                    fill: ${({ theme }) => theme.dice.random};\n                    animation: ${flicker} ${(value)*200}ms ease-in-out infinite;\n                }\n            `;\n        case DIE_TYPES.RANDOM:\n            return css`\n                background: ${({ theme }) => theme.dice.random};\n\n                circle {\n                    fill: ${({ theme }) => theme.dice.pip};\n                    opacity: 0.7;\n                }\n            `;\n        case DIE_TYPES.FLIP:\n            return css`\n                background: ${({ theme }) => theme.dice.flip};\n                border-radius: 50%;\n\n                circle {\n                    fill: ${({ theme }) => theme.dice.pip};\n                    opacity: 0.7;\n                }\n            `;\n        case DIE_TYPES.UP:\n        default:\n            return css`\n                background: ${({ theme }) => theme.dice.up};\n\n                circle {\n                    fill: ${({ theme }) => theme.dice.pip};\n                    opacity: 0.7;\n                }\n            `;\n    }\n};\n\nexport default getDieColor;\n","import React from 'react';\n\nimport styled from 'styled-components';\n\nimport getDieColor from './getDieColor';\n\nconst DieSvg = styled.svg`\n    border-radius: 15%;\n\n    ${getDieColor}\n`;\n\nconst getPos = (size, percent) => {\n    const margin = size * 0.25;\n    return margin + percent * (size - margin * 2);\n}\n\nconst Pip = ({ x, y, diceSize, ...rest }) => (\n    <circle r={diceSize * 0.08} cx={getPos(diceSize, x)} cy={getPos(diceSize, y)} />\n)\n\nconst Face0 = ({ diceSize, ...props }) => (\n    <DieSvg {...props} width={diceSize} height={diceSize} />\n);\n\nconst Face1 = ({ diceSize, ...props }) => (\n    <DieSvg {...props} width={diceSize} height={diceSize}>\n        <Pip {...props} diceSize={diceSize} x={0.5} y={0.5} />\n    </DieSvg>\n);\n\nconst Face2 = ({ diceSize, ...props }) => (\n    <DieSvg {...props} width={diceSize} height={diceSize}>\n        <Pip {...props} diceSize={diceSize} x={0} y={1} />\n        <Pip {...props} diceSize={diceSize} x={1} y={0} />\n    </DieSvg>\n);\n\nconst Face3 = ({ diceSize, ...props }) => (\n    <DieSvg {...props} width={diceSize} height={diceSize}>\n        <Pip {...props} diceSize={diceSize} x={0} y={1} />\n        <Pip {...props} diceSize={diceSize} x={0.5} y={0.5} />\n        <Pip {...props} diceSize={diceSize} x={1} y={0} />\n    </DieSvg>\n);\n\nconst Face4 = ({ diceSize, ...props }) => (\n    <DieSvg {...props} width={diceSize} height={diceSize}>\n        <Pip {...props} diceSize={diceSize} x={0} y={0} />\n        <Pip {...props} diceSize={diceSize} x={0} y={1} />\n        <Pip {...props} diceSize={diceSize} x={1} y={0} />\n        <Pip {...props} diceSize={diceSize} x={1} y={1} />\n    </DieSvg>\n);\n\n\nconst Face5 = ({ diceSize, ...props }) => (\n    <DieSvg {...props} width={diceSize} height={diceSize}>\n        <Pip {...props} diceSize={diceSize} x={0} y={0} />\n        <Pip {...props} diceSize={diceSize} x={0} y={1} />\n        <Pip {...props} diceSize={diceSize} x={0.5} y={0.5} />\n        <Pip {...props} diceSize={diceSize} x={1} y={0} />\n        <Pip {...props} diceSize={diceSize} x={1} y={1} />\n    </DieSvg>\n);\n\nconst Face6 = ({ diceSize, ...props }) => (\n    <DieSvg {...props} width={diceSize} height={diceSize}>\n        <Pip {...props} diceSize={diceSize} x={0} y={0} />\n        <Pip {...props} diceSize={diceSize} x={0} y={0.5} />\n        <Pip {...props} diceSize={diceSize} x={0} y={1} />\n        <Pip {...props} diceSize={diceSize} x={1} y={0} />\n        <Pip {...props} diceSize={diceSize} x={1} y={0.5} />\n        <Pip {...props} diceSize={diceSize} x={1} y={1} />\n    </DieSvg>\n);\n\nconst DieFace = (props) => {\n    switch (props.value) {\n        case 1:\n            return <Face1 {...props} />;\n        case 2:\n            return <Face2 {...props} />;\n        case 3:\n            return <Face3 {...props} />;\n        case 4:\n            return <Face4 {...props} />;\n        case 5:\n            return <Face5 {...props} />;\n        case 6:\n            return <Face6 {...props} />;\n        default:\n            return <Face0 {...props} />;\n    }\n};\n\nexport default DieFace;\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport AnimatedDieFace from './AnimatedDieFace';\nimport DieFace from './DieFace';\n\nimport { DIE_TYPES } from '../constants';\n\nconst DieButton = styled.div`\n    padding: 0;\n    border: 0;\n\n    background: transparent;\n\n    text-align: center;\n\n    cursor: pointer;\n    outline: none;\n`;\n\nconst Positioner = styled.div`\n    position: absolute;\n    transition: transform 0.5s ease-in;\n    perspective: 500px;\n    perspective-origin: 50% 50%;\n`;\n\nconst getInlineStyle = ({ x, y, diceSize }) => ({\n    transform: `translate(${diceSize * x}px, ${diceSize * y + 10}px)`\n});\n\nconst DiePositioner = ({ children, ...props }) => (\n    <Positioner style={getInlineStyle(props)}>\n        {children}\n    </Positioner>\n);\n\nclass Die extends React.Component {\n    shouldComponentUpdate({ value, x, y }) {\n        return !(\n            value === this.props.value &&\n            x === this.props.x &&\n            y === this.props.y\n        );\n    }\n\n    handleDieUpdate = () => {\n        const {\n            moves,\n            inputEnabled,\n            dieType,\n            updateDie,\n            id,\n        } = this.props;\n\n        if (\n            moves.limit - moves.used <= 0 ||\n            !inputEnabled ||\n            (dieType === DIE_TYPES.BLOCKER || dieType === DIE_TYPES.BOMB)\n        ) return;\n\n        updateDie(id);\n    }\n\n    render() {\n        const {\n            diceSize,\n        } = this.props;\n\n        return (\n            <DiePositioner {...this.props}>\n                <DieButton {...this.props}\n                        onClick={this.handleDieUpdate}>\n                    <AnimatedDieFace {...this.props}>\n                        <DieFace {...this.props} diceSize={diceSize - 2} />\n                    </AnimatedDieFace>\n                </DieButton>\n            </DiePositioner>\n        );\n    };\n}\n\nexport default Die;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Transition, TransitionGroup } from 'react-transition-group';\n\nimport Die from './Die';\n\nimport { BOARD_WIDTH, BOARD_HEIGHT } from '../constants';\n\nconst duration = 300;\n\nconst defaultStyle = {\n    transition: `opacity ${duration}ms ease-in`,\n    opacity: 0,\n}\n\nconst transitionStyles = {\n    entering: { opacity: 1 },\n    entered:  { opacity: 1 },\n    exiting:  { opacity: 0 },\n};\n\nconst Fade = ({ children, ...props }) => (\n    <Transition {...props} timeout={duration}>\n        {(state) => (\n            <span style={{ ...defaultStyle, ...transitionStyles[state] }}>\n                {children}\n            </span>\n        )}\n    </Transition>\n);\n\nconst BoardWrapper = styled.div`\n    padding: 0 10px;\n    overflow: hidden;\n    background: ${props => props.theme.background};\n`;\n\nconst Board = styled.div`\n    position: relative;\n`;\n\nconst getBoardSize = ({ diceSize }) => ({\n    width: diceSize * BOARD_WIDTH,\n    height: diceSize * BOARD_HEIGHT + 20,\n})\n\nconst GameBoard = ({ gameBoard, ...props }) => (\n    <BoardWrapper>\n        <Board style={getBoardSize(props)}>\n            <TransitionGroup>\n                {gameBoard.map((die, i) => (\n                    <Fade key={die.id}>\n                        <Die {...props} {...die} />\n                    </Fade>\n                ))}\n            </TransitionGroup>\n        </Board>\n    </BoardWrapper>\n);\n\nexport default GameBoard;\n","// Adapted from https://usehooks.com/useLocalStorage/\nimport { useState } from 'react';\n\nconst useLocalStorage = (key, initialValue, transformFn = JSON.parse) => {\n    // State to store our value\n    // Pass initial state function to useState so logic is only executed once\n    const [storedValue, setStoredValue] = useState(() => {\n        try {\n            // Get from local storage by key\n            const item = localStorage.getItem(key);\n            // Parse stored json or if none return initialValue\n            return item ? transformFn(item) : initialValue;\n        } catch (error) {\n            return initialValue;\n        }\n    });\n\n    // Return a wrapped version of useState's setter function that ...\n    // ... persists the new value to localStorage.\n    const setValue = value => {\n        // Allow value to be a function so we have same API as useState\n        const valueToStore = value instanceof Function ? value(storedValue) : value;\n        // Save state\n        setStoredValue(valueToStore);\n        // Save to local storage\n        localStorage.setItem(key, JSON.stringify(valueToStore));\n    };\n\n    return [storedValue, setValue];\n};\n\nexport default useLocalStorage;\n","import React from 'react';\nimport styled from 'styled-components';\n\nconst Table = styled.table`\n    width: 100%;\n    border-spacing: 0;\n`;\n\nconst Th = styled.th`\n    padding: 0.25rem 0.5rem;\n\n    font-weight: bold;\n    text-align: left;\n\n    &.last {\n        text-align: right;\n    }\n`;\n\nconst Td = styled.td`\n    padding: 0.25rem 0.5rem;\n    text-align: left;\n\n    &.last {\n        text-align: right;\n    }\n\n    &.date {\n        color: ${(({ theme }) => theme.scores.textSecondary)};\n    }\n`;\n\nconst ScoreEntry = styled.tr`\n    background: ${({ currentScore, theme }) => (\n        currentScore ?\n            theme.scores.currentScoreBackground :\n            'transparent'\n    )}\n`;\n\nconst ScoreTable = ({ scores, currentScoreId }) => (\n    <Table>\n        <thead>\n        <tr>\n            <Th>\n                Score\n            </Th>\n            <Th>\n                Level\n            </Th>\n            <Th className='last'>\n                Date\n            </Th>\n        </tr>\n        </thead>\n        <tbody>\n        {scores.map(({ id, endTime, score, level }) => {\n            const isCurrentScore = currentScoreId === id;\n            const gameEndDate = endTime && new Date(endTime);\n            const gameEndDateFormat = gameEndDate.toLocaleDateString(undefined, { year: 'numeric', month: 'numeric', day: 'numeric' })\n\n            return (\n                <ScoreEntry key={id} currentScore={isCurrentScore}>\n                    <Td>\n                        {score}\n                    </Td>\n                    <Td>\n                        {level}\n                    </Td>\n                    <Td className='last date'>\n                        {gameEndDateFormat}\n                    </Td>\n                </ScoreEntry>\n            );\n        })}\n        </tbody>\n    </Table>\n);\n\nexport default ScoreTable;\n","import React, { useState } from 'react';\nimport styled, { keyframes } from 'styled-components';\nimport { ACTIONS } from '../../constants';\nimport { connect } from 'react-redux';\n\nconst containerEnter = keyframes`\n    0% { opacity: 0; }\n    100% { opacity: 1; }\n`;\n\nconst modalEnter = keyframes`\n    0% { transform: scale(0.9); }\n    100% { transform: scale(1); }\n`;\n\nconst containerExit = keyframes`\n    0% { opacity: 1; }\n    50% { opacity: 1; }\n    100% { opacity: 0; }\n`;\n\nconst modalExit = keyframes`\n    0% { transform: scale(1); }\n    100% { transform: scale(0.9) }\n`;\n\nconst ModalContainer = styled.div`\n    position: fixed;\n\n    display: flex;\n    justify-content: center;\n    align-items: flex-start;\n\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    padding: 1rem;\n    background: rgba(0, 0, 0, 0.7);\n\n    animation: ${containerEnter} 0.25s ease-in-out forwards;\n\n    &.closing {\n        animation: ${containerExit} 0.25s ease-in-out forwards;\n    }\n`;\n\nconst StyledModal = styled.div`\n    padding: 1rem;\n    border-radius: 0.8rem;\n    text-align: center;\n    font-size: 1rem;\n\n    width: 100%;\n    height: auto;\n    max-width: 600px;\n\n    color: ${(({ theme }) => theme.foreground)};\n    background: ${(({ theme }) => theme.modal.background)};\n\n    animation: ${modalEnter} 0.25s ease-in-out forwards;\n\n    .closing & {\n        animation: ${modalExit} 0.25s ease-in-out forwards;\n    }\n`;\n\nconst CloseButton = styled.button`\n    position: absolute;\n\n    top: 0;\n    right: 0;\n\n    width: 3rem;\n    height: 3rem;\n\n    border 0;\n\n    font-size: 1rem;\n    font-family: inherit;\n    color: ${(({ theme }) => theme.foreground)};\n\n    background: transparent;\n`;\n\nconst mapDispatchToProps = (dispatch) => ({\n    closeModal: () => dispatch({ type: ACTIONS.CLOSE_MODAL }),\n});\n\nconst Modal = ({ showCloseButton, children, closeModal }) => {\n    const [closing, setClosing] = useState();\n\n    const handleCloseClick = () => {\n        setClosing(true);\n        setTimeout(() => {\n            closeModal();\n            setClosing(false);\n        }, 250);\n    };\n\n    return (\n        <ModalContainer className={closing ? 'closing' : undefined}>\n            <StyledModal>\n                {showCloseButton && <CloseButton onClick={handleCloseClick}>X</CloseButton>}\n                {children}\n            </StyledModal>\n        </ModalContainer>\n    );\n}\n\nexport default connect(null, mapDispatchToProps)(Modal);\n","import React, { useEffect } from 'react';\nimport styled, { keyframes } from 'styled-components';\nimport useLocalStorage from '../../util/useLocalStorage';\n\nimport GameOverScoreTable from './GameOverScoreTable';\nimport Modal from './Modal';\n\nconst Title = styled.h1`\n    margin-top: 0;\n    margin-left: -1rem;\n    margin-right: -1rem;\n\n    padding-bottom: 1rem;\n\n    border-bottom: 1px solid ${(({ theme }) => theme.divider)};\n`;\n\nconst RestartButton = styled.button`\n    margin-top: 2rem;\n    margin-bottom: 1rem;\n    padding: 0.8rem 1.5rem;\n    border: 0;\n    border-radius: 0.5rem;\n\n    background: ${(({ theme }) => theme.scores.buttonBackground)};\n    color: ${(({ theme }) => theme.scores.buttonColor)};\n\n    font-size: 1rem;\n    outline: none;\n\n    font-weight: bold;\n`;\n\nconst ScoreDisplay = ({\n    name,\n    score,\n    level: { level, clearedDice, upcomingDice },\n    moves: { used },\n    tracking: { gameId, gameStart, gameEnd },\n    setInputActive,\n}) => {\n    const [scores, setScores] = useLocalStorage('dicematch.scores', []);\n\n    const currentGameScore = {\n        id: gameId,\n        score,\n        level,\n        diceCleared: clearedDice,\n        diceRemainingInLevel: upcomingDice.length,\n        turnsUsed: used,\n        startTime: gameStart,\n        endTime: gameEnd,\n    };\n\n    useEffect(() => {\n        if (scores.find(({ id }) => id === gameId)) return;\n\n        const previousScores = scores\n            .filter(score => !!score)\n            .sort((a, b) => b.score - a.score)\n            .slice(0, 10);\n\n        const newScores = [\n            ...previousScores,\n            currentGameScore\n        ].sort((a, b) => b.score - a.score);\n\n        setScores(newScores)\n    }, []);\n\n    return <GameOverScoreTable scores={scores} currentScoreId={gameId} setInputActive={setInputActive} />;\n};\n\nconst GameOverModal = ({ restartGame, ...props }) => {\n    return (\n        <Modal>\n            <Title>Game over</Title>\n\n            <ScoreDisplay {...props} />\n\n            <RestartButton onClick={restartGame}>\n                Restart\n            </RestartButton>\n        </Modal>\n    );\n}\n\nexport default GameOverModal;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { MODALS } from '../../constants';\n\nconst GameHeaderBarContainer = styled.div`\n    display: grid;\n\n    width: 100vw;\n\n    grid-template-columns: 3rem auto 3rem;\n    grid-template-rows: 3rem;\n\n    justify-items: center;\n    align-items: center;\n\n    background: ${props => props.theme.backgroundSecondary};\n`;\n\nconst Button = styled.button`\n    width: 3rem;\n    height: 3rem;\n\n    background-color: transparent;\n    background-size: 1.5rem;\n    background-position: center;\n    background-repeat: no-repeat;\n    border: 0;\n\n    font-size: 0;\n    color: rgba(0,0,0,0);\n\n    opacity: 0.6;\n\n    &.dark {\n        filter: invert(100%);\n    }\n`;\n\nconst HelpButton = styled(Button)`\n    width: 2rem;\n    height: 2rem;\n    background-image: url(${require('./icon-help.svg')});\n`;\n\nconst SettingsButton = styled(Button)`\n    width: 2rem;\n    height: 2rem;\n    background-image: url(${require('./icon-settings.svg')});\n`;\n\nconst GameTitle = styled.div`\n    height: 1.5rem;\n    width: 100%;\n\n    background-image: url(${require('./dicematch-logo-wide.svg')});\n    background-size: contain;\n    background-position: center;\n    background-repeat: no-repeat;\n\n    font-size: 0;\n    color: rgba(0,0,0,0);\n`;\n\nconst GameHeaderBar = ({ openModal, theming }) => (\n    <GameHeaderBarContainer>\n        <HelpButton className={theming.interface} onClick={() => openModal(MODALS.HELP)}>\n            Help\n        </HelpButton>\n        <GameTitle>\n            DICE MATCH\n        </GameTitle>\n        <SettingsButton className={theming.interface} onClick={() => openModal(MODALS.SETTINGS)}>\n            Settings\n        </SettingsButton>\n    </GameHeaderBarContainer>\n);\n\nexport default GameHeaderBar;\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport DieFace from '../DieFace';\n\nconst StyledUpcomingDice = styled.div`\n    grid-area: upcoming;\n\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    .dice {\n        display: flex;\n        align-items: center;\n    }\n\n    .title {\n        margin-right: 1rem;\n\n        font-size: 0.8rem;\n        font-weight: bold;\n        color: ${({ theme }) => theme.header.textSecondary};\n    }\n`;\n\nconst MiniDie = styled.div`\n    margin-right: 1px;\n\n    svg {\n        display: block;\n    }\n`;\n\nconst More = styled.span`\n    margin-left: 0.3rem;\n    font-size: 0.8rem;\n    color: ${({ theme }) => theme.header.textSecondary};\n`;\n\nconst DICE_TO_SHOW = 5;\n\nconst UpcomingDice = ({ upcomingDice }) => {\n    const nextNiceDisplay = upcomingDice.slice(0, DICE_TO_SHOW);\n    const nextMore = upcomingDice.length - DICE_TO_SHOW;\n\n    return (\n        <StyledUpcomingDice>\n            <div className='dice'>\n                {nextNiceDisplay.slice(0, DICE_TO_SHOW).map((die, i) => (\n                    <MiniDie key={i}>\n                        <DieFace {...die} diceSize={18} />\n                    </MiniDie>\n                ))}\n\n                {nextMore > 0 && <More>+ {nextMore}</More>}\n            </div>\n        </StyledUpcomingDice>\n    );\n}\n\nexport default UpcomingDice;\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport UpcomingDice from './UpcomingDice';\n\nconst StyledLevelContainer = styled.div`\n    grid-area: level;\n    padding: 0.3rem 0.5rem 0.5rem;\n    background: ${({ theme }) => theme.header.backgroundInset};\n    border-radius: 0.5rem\n`;\n\nconst StyledLevel = styled.div`\n    display: flex;\n\n    align-items: center;\n    margin-bottom: 0.3rem;\n\n    font-size: 0.8rem;\n    font-weight: bold;\n    color: ${({ theme }) => theme.header.text};\n\n    .title {\n        margin-right: 0.5rem;\n\n        font-size: 0.8rem;\n        font-weight: bold;\n        color: ${({ theme }) => theme.header.textSecondary};\n    }\n`;\n\nconst Level = ({ level, upcomingDice }) => {\n    return (\n        <StyledLevelContainer>\n            <StyledLevel>\n                <span className=\"title\">Level</span>\n                <span className=\"score\">{level}</span>\n            </StyledLevel>\n            <UpcomingDice upcomingDice={upcomingDice} />\n        </StyledLevelContainer>\n\n    );\n};\n\nexport default Level;\n","import React from 'react';\nimport styled, { css, keyframes } from 'styled-components';\nimport times from 'lodash/fp/times';\n\nconst shake = (degree) => keyframes`\n    0% {\n        transform: translate(0px, 0px);\n    }\n    25% {\n        transform: translate(${degree}px, ${degree}px);\n    }\n    50% {\n        transform: translate(0px, 0px);\n    }\n    75% {\n        transform: translate(${-degree}px, ${-degree}px);\n    }\n`;\n\nconst StyledMoves = styled.div`\n    grid-area: moves;\n\n    display: grid;\n\n    width: auto;\n    height: 1.5rem;\n\n    grid-template-columns: repeat(10, 1fr);\n    grid-template-rows: auto;\n\n    border: 1px solid ${({ theme }) => theme.moves.border};\n    border-radius: 0.2rem;\n\n    box-shadow: 0 0 0 1px ${({ theme }) => theme.header.backgroundInset};\n\n    overflow: hidden;\n\n    ${({ moves }) => moves < 6 && css`\n        color: red;\n    `}\n\n    ${({ moves }) => moves <= 3 && css`\n        animation: ${shake(0.25)} 0.1s linear infinite;\n    `}\n\n    ${({ moves }) => moves <= 2 && css`\n        animation: ${shake(0.5)} 0.1s linear infinite;\n    `}\n\n    ${({ moves }) => moves <= 1 && css`\n        animation: ${shake(1)} 0.1s linear infinite;\n    `}\n`;\n\nconst StepBox = styled.div`\n    height: 100%;\n\n    background: ${({ ready, moves, theme }) => {\n        if (!ready) return theme.moves.used;\n        if (moves <= 1) return theme.moves.danger;\n        if (moves <= 3) return theme.moves.warning;\n        return theme.moves.ready;\n    }};\n\n    border-right: 1px solid ${({ theme }) => theme.moves.insideBorder};\n    transition: background 0.1s linear;\n\n    &:last-of-type {\n        border-right: 0;\n    }\n`;\n\nconst Moves = ({ moves: { used, limit, cap } }) => {\n    const movesLeft = limit - used;\n\n    return (\n        <StyledMoves moves={movesLeft}>\n            {times((index) => (\n                <StepBox key={index} moves={movesLeft} ready={index < movesLeft} />\n            ), cap)}\n        </StyledMoves>\n    );\n}\n\nexport default Moves;\n","import React from 'react';\nimport styled from 'styled-components';\n\n\nconst StyledScore = styled.div`\n    grid-area: score;\n\n    display: flex;\n\n    align-items: center;\n    justify-content: space-between;\n\n    padding: 0.2rem 0.5rem;\n    background: ${({ theme }) => theme.header.backgroundInset};\n    border-radius: 0.5rem;\n\n    font-size: 1.2rem;\n    color: ${({ theme }) => theme.header.text};\n\n    .title {\n        font-size: 0.8rem;\n        font-weight: bold;\n        color: ${({ theme }) => theme.header.textSecondary};\n    }\n`;\n\nconst Score = ({ score }) => (\n    <StyledScore>\n        <span className=\"title\">Score</span>\n        <span className=\"score\">{score}</span>\n    </StyledScore>\n);\n\nexport default Score;\n","import React from 'react';\nimport styled from 'styled-components';\nimport Level from './Level';\nimport Moves from './Moves';\nimport Score from './Score';\n\nconst GameStatus = styled.div`\n    display: grid;\n\n    grid-template-columns: 1fr 1fr;\n    grid-template-rows: auto auto;\n\n    column-gap: 0.5rem;\n    row-gap: 0.5rem;\n\n    padding: 0.5rem 0.5rem;\n\n    grid-template-areas:\n        \"level score\"\n        \"moves moves\";\n\n    background: ${({ theme }) => theme.backgroundSecondary};\n`;\n\nconst GameStatusBar = (props) => (\n    <GameStatus>\n        <Score {...props} />\n        <Level {...props.level} />\n\n        <Moves {...props} />\n    </GameStatus>\n);\n\nexport default GameStatusBar;\n","import React from 'react';\nimport styled from 'styled-components';\nimport drop from 'lodash/fp/drop';\nimport { Transition, TransitionGroup } from 'react-transition-group';\n\nimport { GAME_STATES } from '../constants';\n\nconst Announcements = styled.div`\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n\n    font-size: 48px;\n    pointer-events: none;\n    touch-action: none;\n    color: white;\n\n    text-shadow: 0 0 5px rgba(0,0,0,1);\n`;\n\nconst duration = 200;\n\nconst defaultStyle = {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    textAlign: 'center',\n    width: 150,\n    height: 50,\n    marginLeft: -75,\n    marginTop: -25,\n    transition: `opacity ${duration}ms ease-out, transform ${duration}ms ease-out`,\n    opacity: 0,\n    transform: 'scale(0.5)',\n}\n\nconst transitionStyles = {\n    entering: { opacity: 0, transform: 'scale(0.5)' },\n    entered: { opacity: 1, transform: 'scale(1)' },\n    exiting: { opacity: 0, transform: 'scale(2.5)' },\n};\n\nconst Fade = ({ children, ...props }) => (\n    <Transition {...props} timeout={duration}>\n        {(state) => (\n            <div style={{ ...defaultStyle, ...transitionStyles[state] }}>\n                {children}\n            </div>\n        )}\n    </Transition>\n);\n\nclass ScoreAnnouncer extends React.Component {\n    state = {\n        announcements: [],\n    };\n\n    aId = 0;\n\n    componentWillReceiveProps({ score, gameState }) {\n        if (this.props.score !== score &&\n            this.props.score < score &&\n            this.props.gameState !== GAME_STATES.FINISHED\n        ) {\n            const value = score - this.props.score;\n            this.setState((state) => ({ announcements: [...state.announcements, { id: this.aId, value }] }));\n            this.aId = this.aId + 1;\n\n            setTimeout(() => {\n                this.setState((state) => ({ announcements: drop(1, state.announcements) }));\n            }, 1000);\n        }\n    }\n\n    render() {\n        const { announcements } = this.state;\n\n        return (\n            <Announcements>\n                <TransitionGroup>\n                    {announcements.map((change, i) => (\n                        <Fade key={change.id}>\n                            + {change.value}\n                        </Fade>\n                    ))}\n                </TransitionGroup>\n            </Announcements>\n        );\n    }\n}\n\nexport default ScoreAnnouncer;\n","export default (min, max) => (value) => {\n    if (value < min) return max;\n    if (value > max) return min;\n    return value;\n}\n","\nexport default (dieSize) => Math.floor(Math.random() * dieSize) + 1;\n","import circularClamp from '../util/circularClamp';\nimport rollDie from '../util/rollDie';\n\nimport { ACTIONS, DIE_TYPES } from '../constants';\n\nconst ensureIdMatch = (subReducer) => (state, action) => (\n    state.id === action.id ?\n        subReducer(state, action) :\n        state\n);\n\nexport const updateDieUp = ensureIdMatch(({ value, ...state }, action) => ({\n    ...state,\n    value: circularClamp(1, state.dieSize)(value + 1),\n}));\n\nexport const updateDieDown = ensureIdMatch(({ value, ...state }, action) => ({\n    ...state,\n    value: circularClamp(1, state.dieSize)(value - 1),\n}));\n\nexport const updateDieRandom = ensureIdMatch(({ value, ...state }, action) => {\n    let roll = rollDie(state.dieSize);\n\n    while (roll === value) {\n        roll = rollDie(state.dieSize);\n    }\n\n    return ({ ...state, value: roll });\n});\n\nconst updateDieBomb = ({ value, ...state }, action) => ({\n    ...state,\n    value: value - 1,\n});\n\nconst valueForFlip = (value) => {\n    switch (value) {\n        case 1:\n            return 6;\n        case 2:\n            return 5;\n        case 3:\n            return 4;\n        case 4:\n            return 3;\n        case 5:\n            return 2;\n        case 6:\n        default:\n            return 1;\n    }\n};\n\nexport const updateDieFlip = ensureIdMatch(({ value, ...state }, action) => ({\n    ...state,\n    value: valueForFlip(value),\n}));\n\nconst updateDie = (state, action) => {\n    switch (state.dieType) {\n        case DIE_TYPES.UP:\n            return updateDieUp(state, action);\n        case DIE_TYPES.DOWN:\n            return updateDieDown(state, action);\n        case DIE_TYPES.RANDOM:\n            return updateDieRandom(state, action);\n        case DIE_TYPES.FLIP:\n            return updateDieFlip(state, action);\n        case DIE_TYPES.BOMB:\n            return updateDieBomb(state, action);\n        default:\n            return state;\n    }\n}\n\nconst moveDie = ensureIdMatch((state, { x, y }) => ({ ...state, x, y }));\n\nexport default (state , action) => {\n    switch (action.type) {\n        case ACTIONS.UPDATE_DIE:\n            return updateDie(state, action);\n        case ACTIONS.MOVE_DIE:\n            return moveDie(state, action);\n        default:\n            return state;\n    }\n};\n","import React, { useState } from 'react';\nimport styled, { keyframes } from 'styled-components';\nimport { clamp } from 'lodash';\n\nimport DieFace from '../DieFace';\n\nimport { DIE_TYPES } from '../../constants';\nimport { updateDieDown, updateDieFlip, updateDieRandom, updateDieUp } from '../../reducers/dieReducer';\nimport AnimatedDieFace from '../AnimatedDieFace';\n\nconst MeetDieContainer = styled.div`\n    position: relative;\n    height: 12rem;\n    overflow: hidden;\n`;\n\nconst bounceLeft = keyframes`\n    0% { transform: translate(0, 0); }\n    5% { transform: translate(-3px, 0); }\n    20% { transform: translate(0, 0); }\n    100% { transform: translate(0, 0); }\n`;\n\nconst bounceRight = keyframes`\n    0% { transform: translate(0, 0); }\n    5% { transform: translate(3px, 0); }\n    20% { transform: translate(0, 0); }\n    100% { transform: translate(0, 0); }\n`;\n\nconst NavigateButton = styled.button`\n    position: absolute;\n    display: flex;\n\n    align-items: center;\n    justify-content: center;\n\n    top: 0;\n\n    width: 3rem;\n    height: 100%;\n\n    border 0;\n\n    font-size: 1rem;\n    font-family: inherit;\n    color: ${(({ theme }) => theme.foreground)};\n\n    background: transparent;\n\n    z-index: 1;\n\n    &.left {\n        left: -1rem;\n\n        &.animate {\n            animation: ${bounceLeft} 0.7s linear infinite;\n        }\n    }\n\n    &.right {\n        right: -1rem;\n\n        &.animate {\n            animation: ${bounceRight} 0.7s linear infinite;\n        }\n    }\n\n    &:disabled {\n        opacity: 0.2;\n    }\n`;\n\nconst DieListContainer = styled.div`\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: flex;\n    height: 100%;\n\n    transition: left 0.3s ease-in-out;\n`;\n\nconst DieContainer = styled.div`\n    position: relative;\n\n    display: flex;\n    flex-direction: column;\n\n    align-items: center;\n    justify-content: center;\n\n    width: 100%;\n    height: 100%;\n\n    p {\n        position: absolute;\n        bottom: -1rem;\n        color: ${({ theme }) => theme.foregroundSecondary}\n    }\n`;\n\nconst DieButton = styled.button`\n    display: flex;\n    flex-direction: column;\n\n    align-items: flex-start;\n    justify-content: flex-start;\n\n    width: calc(64px + 2rem);\n    height: calc(64px + 2rem);\n\n    border 0;\n    padding: 1rem;\n\n    background: transparent;\n`;\n\nconst DICE_DESCRIPTIONS = [\n    {\n        id: 1,\n        dieType: DIE_TYPES.UP,\n        value: 1,\n        dieSize: 6,\n        description: 'Increases in value.',\n        updater: updateDieUp,\n    },\n    {\n        id: 2,\n        dieType: DIE_TYPES.DOWN,\n        value: 2,\n        dieSize: 6,\n        description: 'Goes down smooth.',\n        updater: updateDieDown,\n    },\n    {\n        id: 3,\n        dieType: DIE_TYPES.FLIP,\n        value: 3,\n        dieSize: 6,\n        description: 'Flip-flops. Always adds to 7.',\n        updater: updateDieFlip,\n    },\n    {\n        id: 4,\n        dieType: DIE_TYPES.RANDOM,\n        value: 4,\n        dieSize: 6,\n        description: 'Rolls kinda wild.',\n        updater: updateDieRandom,\n    },\n    {\n        id: 5,\n        dieType: DIE_TYPES.BLOCKER,\n        value: 5,\n        dieSize: 6,\n        description: 'Cant be moved. Still matches.',\n    },\n    {\n        id: 6,\n        dieType: DIE_TYPES.BOMB,\n        value: 6,\n        dieSize: 6,\n        description: 'Explosive if it reaches zero.',\n    },\n];\n\nconst MeetDice = () => {\n    const [viewIndex, setViewIndex] = useState(0);\n    const [dieDescriptions, setDieDescriptions] = useState(DICE_DESCRIPTIONS);\n\n    const atStart = viewIndex <= 0;\n    const atEnd = viewIndex >= DICE_DESCRIPTIONS.length - 1;\n\n    const navigate = (direction) => setViewIndex(\n        clamp(viewIndex + direction, 0, DICE_DESCRIPTIONS.length - 1)\n    );\n\n    const handleDieUpdate = (id) => {\n        setDieDescriptions(dieDescriptions.map((die) => {\n            if (!die.updater) return die;\n            if (id !== die.id) return die;\n\n            return die.updater(die, { id })\n        }))\n    };\n\n    console.log('dieDescriptions', dieDescriptions);\n\n    return (\n        <MeetDieContainer>\n            <NavigateButton className={`left ${atEnd ? 'animate' : ''}`} onClick={() => navigate(-1)} disabled={atStart}>\n                &lt;\n            </NavigateButton>\n            <NavigateButton className={`right ${atStart ? 'animate' : ''}`} onClick={() => navigate(1)} disabled={atEnd}>\n                &gt;\n            </NavigateButton>\n\n            <DieListContainer style={{ width: `${DICE_DESCRIPTIONS.length * 100}%`, left: `${viewIndex * -100}%` }}>\n                {dieDescriptions.map(({ id, dieType, value, description, updater }) => (\n                    <DieContainer key={id}>\n                        <DieButton onClick={() => {\n                            updater && handleDieUpdate(id);\n                        }}>\n                            <AnimatedDieFace dieType={dieType} value={value} diceSize={64}>\n                                <DieFace dieType={dieType} value={value} diceSize={64} />\n                            </AnimatedDieFace>\n                        </DieButton>\n                        <p>{description}</p>\n                    </DieContainer>\n                ))}\n            </DieListContainer>\n        </MeetDieContainer>\n    );\n};\n\nexport default MeetDice;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { DIE_TYPES } from '../../constants';\nimport DieFace from '../DieFace';\nimport Level from '../gameStatus/Level';\nimport Moves from '../gameStatus/Moves';\nimport MeetDice from './MeetDice';\n\nimport Modal from './Modal';\n\nconst FlexCenter = styled.p`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n`;\n\nconst Header = styled.div`\n    margin-left: -1rem;\n    margin-right: -1rem;\n\n    padding-bottom: 1rem;\n\n    border-bottom: 1px solid ${(({ theme }) => theme.divider)};\n\n    font-size: 1rem;\n    font-weight: bold;\n`;\n\nconst Line = styled.p`\n    font-size: 1rem;\n`;\n\nconst DieDisplay = styled.div`\n    margin-right: 1px;\n\n    svg {\n        display: block;\n    }\n`;\n\nconst LevelDisplay = styled.div`\n    border: 1px solid ${(({ theme }) => theme.divider)};\n    border-radius: 0.5rem\n`;\n\nconst HelpModal = ({ restartGame, ...props }) => {\n    return (\n        <Modal showCloseButton>\n            <Header>How to play</Header>\n\n            <Line>\n                Tap a die to change its value.\n            </Line>\n\n            <FlexCenter>\n                <DieDisplay>\n                    <DieFace dieType={DIE_TYPES.UP} value={3} diceSize={48} />\n                </DieDisplay>\n                <DieDisplay>\n                    <DieFace dieType={DIE_TYPES.UP} value={3} diceSize={48} />\n                </DieDisplay>\n                <DieDisplay>\n                    <DieFace dieType={DIE_TYPES.UP} value={3} diceSize={48} />\n                </DieDisplay>\n            </FlexCenter>\n\n            <Line>\n                Match three or more with the same value.\n            </Line>\n\n            <FlexCenter>\n                <LevelDisplay>\n                    <Level {...props.level} />\n                </LevelDisplay>\n            </FlexCenter>\n\n            <Line>\n                Clear all the dice from the level...\n            </Line>\n\n            <Moves moves={{ used: 3, limit: 10, cap: 10 }} />\n\n            <Line>\n                ...before you run out of turns.\n            </Line>\n\n            <Header>\n                Meet the dice\n            </Header>\n\n            <MeetDice />\n        </Modal>\n    );\n}\n\nexport default HelpModal;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { connect } from 'react-redux';\n\nimport Modal from './Modal';\n\nimport { ACTIONS } from '../../constants';\n\nconst Header = styled.div`\n    margin-left: -1rem;\n    margin-right: -1rem;\n\n    padding-bottom: 1rem;\n\n    border-bottom: 1px solid ${(({ theme }) => theme.divider)};\n\n    font-size: 1rem;\n    font-weight: bold;\n`;\n\nconst SettingsRow = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    margin-left: -1rem;\n    margin-right: -1rem;\n\n    padding: 1rem;\n\n    text-align: left;\n    border-bottom: 1px solid ${(({ theme }) => theme.divider)};\n\n    a {\n        color: ${(({ theme }) => theme.highlight)};\n    }\n`;\n\nconst RestartButton = styled.button`\n    padding: 0.4rem 1rem;\n    border: 0;\n    border-radius: 0.5rem;\n\n    background: ${(({ theme }) => theme.scores.buttonBackground)};\n    color: ${(({ theme }) => theme.scores.buttonColor)};\n\n    font-size: 1rem;\n    outline: none;\n\n    font-weight: bold;\n`;\n\nconst mapDispatchToProps = (dispatch) => ({\n    toggleInterfaceTheme: (currentInterface) => (\n        dispatch({ type: ACTIONS.SET_THEME, interface: currentInterface === 'dark' ? 'light' : 'dark' })\n    ),\n    closeModal: () => dispatch({ type: ACTIONS.CLOSE_MODAL }),\n})\n\nconst SettingsModal = ({ restartGame, closeModal, toggleInterfaceTheme, ...props }) => {\n    return (\n        <Modal showCloseButton>\n            <Header>Settings</Header>\n            <SettingsRow>\n                Dark theme\n                <input type=\"checkbox\"\n                    onChange={() => toggleInterfaceTheme(props.theming.interface)}\n                    checked={props.theming.interface === 'dark'} />\n            </SettingsRow>\n            <SettingsRow>\n                Abandon current game\n                <RestartButton onClick={() => {\n                    restartGame();\n                    closeModal();\n                }}>\n                    Restart\n                </RestartButton>\n            </SettingsRow>\n            <SettingsRow>\n                Feedback\n                <a href=\"https://twitter.com/isaacwilliams\">@isaacwilliams</a>\n            </SettingsRow>\n        </Modal>\n    );\n};\n\nexport default connect(null, mapDispatchToProps)(SettingsModal);\n","\nexport const colors = {\n    white: '#ffffff',\n    black: '#000000',\n    charcoal: '#282B40',\n    charcoal_200: '#191D23',\n    charcoal_100: '#111717',\n    grey_100: '#111111',\n    grey_200: '#222222',\n    grey_300: '#444444',\n    grey_400: '#666666',\n    grey_500: '#757784',\n    grey_700: '#9A9DAD',\n    grey_900: '#C5C9D8',\n    grey_1000: '#E6E8EF',\n    grey_1100: '#f8f8f8',\n    red: '#FC4349',\n    teal: '#3C989B',\n    green: '#14DD89',\n    yellow: '#FFAC00',\n    yellow_700: '#FFD000',\n    yellow_900: '#FFEF00',\n    beige: '#CEC8B6',\n};\n\nexport const THEME_LIGHT = {\n    colors,\n\n    foreground: colors.charcoal,\n    foregroundSecondary: colors.grey_500,\n\n    background: colors.white,\n    backgroundSecondary: colors.grey_1000,\n    divider: colors.grey_900,\n\n    highlight: colors.teal,\n\n    modal: {\n        background: colors.white,\n    },\n\n    header: {\n        background: colors.grey_1000,\n        backgroundInset: colors.white,\n        text: colors.charcoal,\n        textSecondary: colors.grey_500,\n    },\n\n    moves: {\n        border: colors.grey_700,\n        insideBorder: 'rgba(0,0,0,0.2)',\n        used: colors.grey_500,\n        ready: colors.green,\n        warning: colors.yellow,\n        danger: colors.red,\n    },\n\n    scores: {\n        buttonBackground: colors.backgroundSecondary,\n        buttonColor: colors.charcoal,\n        currentScoreBackground: colors.yellow_900,\n        textSecondary: 'rgba(0,0,0,0.5)',\n    },\n\n    dice: {\n        pip: colors.charcoal,\n        up: colors.red,\n        down: colors.teal,\n        random: colors.yellow,\n        blocker: colors.grey_500,\n        flip: colors.beige,\n    },\n};\n\nexport const THEME_DARK = {\n    ...THEME_LIGHT,\n\n    foreground: colors.white,\n    foregroundSecondary: colors.grey_700,\n\n    background: colors.grey_100,\n    backgroundSecondary: colors.grey_200,\n    divider: colors.grey_400,\n\n    highlight: colors.teal,\n\n    modal: {\n        background: colors.grey_300,\n    },\n\n    header: {\n        ...THEME_LIGHT.header,\n        background: colors.grey_1000,\n        backgroundInset: colors.grey_100,\n        text: colors.white,\n        textSecondary: colors.grey_700,\n    },\n\n    moves: {\n        ...THEME_LIGHT.moves,\n        border: colors.grey_400,\n        insideBorder: 'rgba(0,0,0,0.2)',\n        used: colors.grey_200,\n        ready: colors.teal,\n        warning: colors.yellow,\n        danger: colors.red,\n    },\n\n    scores: {\n        ...THEME_LIGHT.scores,\n        buttonBackground: colors.grey_200,\n        buttonColor: colors.white,\n        currentScoreBackground: colors.teal,\n        textSecondary: 'rgba(255,255,255,0.5)',\n    },\n};\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport styled, { ThemeProvider, createGlobalStyle } from 'styled-components';\nimport clamp from 'lodash/fp/clamp';\nimport { Helmet } from 'react-helmet';\n\nimport GameBoard from './components/GameBoard';\nimport GameOverModal from './components/modal/GameOverModal';\nimport GameHeaderBar from './components/header/GameHeaderBar';\nimport GameStatusBar from './components/gameStatus/GameStatusBar';\nimport ScoreAnnouncer from './components/ScoreAnnouncer';\nimport HelpModal from './components/modal/HelpModal';\nimport SettingsModal from './components/modal/SettingsModal';\n\nimport { THEME_LIGHT, THEME_DARK } from './constants/themes';\n\nimport { GAME_STATES, ACTIONS, BOARD_WIDTH, MODALS } from './constants';\n\n\nconst clampDieSize = clamp(30, 80);\n\nconst AppContainer = styled.div`\n    display: grid;\n\n    grid-template-columns: auto;\n    grid-template-rows: auto auto 1fr;\n\n    justify-content: center;\n\n    height: 90vh;\n    width: 100vw;\n\n    background: ${props => props.theme.background};\n`;\n\nconst GameContainer = styled.div`\n    display: flex;\n    align-self: end;\n    justify-content: center;\n    padding: 1rem 0;\n    background: ${props => props.theme.background};\n`;\n\nconst GlobalStyle = createGlobalStyle`\n    body {\n        background: ${props => props.theme.background};\n    }\n`;\n\nconst mapStateToProps = (state) => state;\n\nconst mapDispatchToProps = (dispatch) => ({\n    updateDie: (id) => dispatch({ type: ACTIONS.UPDATE_DIE, id }),\n    restartGame: () => dispatch({ type: ACTIONS.GAME_RESET }),\n    openModal: (modal) => dispatch({ type: ACTIONS.OPEN_MODAL, modal }),\n    closeModal: () => dispatch({ type: ACTIONS.CLOSE_MODAL }),\n});\n\nclass App extends Component {\n    state = { diceSize: 0 };\n\n    componentWillMount() {\n        this.getDiceSize();\n\n        window.addEventListener('resize', this.getDiceSize);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.getDiceSize);\n    }\n\n    getDiceSize = () => this.setState(() => ({ diceSize: clampDieSize((window.innerWidth - 20) / BOARD_WIDTH) }));\n\n    render() {\n        const {\n            gameState,\n            modal,\n            theming = {},\n        } = this.props;\n\n        const {\n            diceSize,\n        } = this.state;\n\n        const theme = theming.interface === 'dark' ? THEME_DARK : THEME_LIGHT;\n\n        return (\n            <ThemeProvider theme={theme}>\n                <GlobalStyle />\n                <Helmet>\n                    <meta name=\"theme-color\" content={theme.backgroundSecondary} />\n                </Helmet>\n                <AppContainer>\n                    <GameHeaderBar {...this.props} />\n                    <GameStatusBar {...this.props} />\n                    <GameContainer>\n                        <GameBoard {...this.props} diceSize={diceSize} />\n                        <ScoreAnnouncer {...this.props} />\n                    </GameContainer>\n\n                    {gameState === GAME_STATES.FINISHED && (\n                        <GameOverModal {...this.props} />\n                    )}\n\n                    {modal === MODALS.HELP && (\n                        <HelpModal {...this.props} />\n                    )}\n\n                    {modal === MODALS.SETTINGS && (\n                        <SettingsModal {...this.props} />\n                    )}\n                </AppContainer>\n            </ThemeProvider>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import { nanoid } from 'nanoid';\nimport rollDie from '../util/rollDie';\n\nimport { DIE_TYPES } from '../constants';\n\nconst initialValueFor = (dieType, dieSize = 6) => {\n    switch (dieType) {\n        case DIE_TYPES.BOMB:\n            return dieSize;\n        default:\n            return rollDie(dieSize);\n    }\n}\n\nconst createDieState = (dieType, dieSize = 6) => ({\n    id: nanoid(8),\n    dieType,\n    dieSize,\n    value: initialValueFor(dieType, dieSize),\n});\n\nexport default createDieState;\n","\nconst getDieFromBoard = (board) => (x, y) => board.find((die) => (\n    die &&\n    die.x === x &&\n    die.y === y\n))\n\nexport default getDieFromBoard;\n","import getDieFromBoard from './getDieFromBoard';\nimport intersectionBy from 'lodash/fp/intersectionBy';\nimport uniqBy from  'lodash/fp/uniqBy';\nimport reverse from  'lodash/fp/reverse';\n\nimport { BOARD_WIDTH, BOARD_HEIGHT, MIN_MATCH_LENGTH } from '../constants';\n\nconst checkDiceMatch = (die, nextDie) => (\n    die &&\n    nextDie &&\n    die.value === nextDie.value\n);\n\nconst findMatchesHorizontal = (board) => {\n    const getDie = getDieFromBoard(board);\n    const matchGroups = [];\n\n    for (let y = 0; y < BOARD_HEIGHT; y++) {\n        let currGroup = [];\n\n        for (let x = 0; x < BOARD_WIDTH; x++) {\n            const die = getDie(x, y);\n            const nextDie = getDie(x + 1, y);\n\n            currGroup.push(die);\n\n            const hasMatch = checkDiceMatch(die, nextDie);\n\n            if (!hasMatch && currGroup.length >= MIN_MATCH_LENGTH) {\n                matchGroups.push(currGroup);\n            }\n\n            if (!hasMatch) currGroup = [];\n        }\n    }\n\n    return matchGroups;\n};\n\nconst findMatchesVertical = (board) => {\n    const getDie = getDieFromBoard(board);\n    const matchGroups = [];\n\n    for (let x = 0; x < BOARD_WIDTH; x++) {\n        let currGroup = [];\n\n        for (let y = 0; y < BOARD_HEIGHT; y++) {\n            const die = getDie(x, y);\n            const nextDie = getDie(x, y + 1);\n\n            currGroup.push(die);\n\n            const hasMatch = checkDiceMatch(die, nextDie);\n\n            if (!hasMatch && currGroup.length >= MIN_MATCH_LENGTH) {\n                matchGroups.push(reverse(currGroup));\n            }\n\n            if (!hasMatch) currGroup = [];\n        }\n    }\n\n    return matchGroups;\n};\n\nconst getId = (die) => die.id;\nconst intersectionById = intersectionBy(getId);\nconst uniqById = uniqBy(getId);\n\nconst findMatches = (state) => {\n    let horzontalMatches = findMatchesHorizontal(state);\n    let verticalMatches = findMatchesVertical(state);\n\n    // find matches that are both in the horizontal & vertical axis & combine into single group for more points\n    horzontalMatches = horzontalMatches.map((hGroup) => {\n        const intersectingGroup = verticalMatches.find((vGroup) => intersectionById([\n            vGroup,\n            hGroup,\n        ]));\n\n        if (!intersectingGroup) return hGroup;\n\n        verticalMatches = verticalMatches.filter((vGroup) => vGroup !== intersectingGroup);\n        return uniqById([...hGroup, ...intersectingGroup]);\n    });\n\n    return [\n        ...horzontalMatches,\n        ...verticalMatches,\n    ];\n}\n\nexport default findMatches;\n","import times from 'lodash/fp/times';\n\nimport dieReducer from './dieReducer';\nimport createDieState from './createDieState';\nimport findBoardMatches from '../util/findBoardMatches';\nimport getDieFromBoard from '../util/getDieFromBoard';\n\nimport { ACTIONS, DIE_TYPES, BOARD_WIDTH, BOARD_HEIGHT } from '../constants';\n\nconst createGameBoard = () => (\n    times(() => createDieState(DIE_TYPES.UP), BOARD_WIDTH * BOARD_HEIGHT)\n    .map((die, i) => {\n        const x = i % BOARD_WIDTH;\n        const y = Math.floor(i / BOARD_WIDTH);\n\n        return { ...die, x, y };\n    })\n);\n\nconst getInitalState = () => {\n    let gameBoard;\n\n    while (!gameBoard || findBoardMatches(gameBoard).length) {\n        gameBoard = createGameBoard();\n    }\n\n    return gameBoard;\n};\n\nconst deferToDice = (state, action) => state.map((dieState) => dieReducer(dieState, action));\n\nconst removeDie = (state, action) => state.filter((dieState) => dieState.id !== action.id);\n\nconst addDie = (state, { die }) => ([ ...state, die ]);\n\nconst getDieToShift = (state) => {\n    const getDie = getDieFromBoard(state);\n\n    return state.find(({ x, y, id }) => y < BOARD_HEIGHT - 1 && !getDie(x, y + 1));\n}\n\nconst cascadeDice = (state, action) => {\n    let updatedState = state;\n    let dieToShift = getDieToShift(updatedState);\n\n    while (dieToShift) {\n        updatedState = deferToDice(updatedState, {\n            type: ACTIONS.MOVE_DIE,\n            id: dieToShift.id,\n            x: dieToShift.x,\n            y: dieToShift.y + 1,\n        });\n\n        dieToShift = getDieToShift(updatedState)\n    }\n\n    return updatedState;\n};\n\nexport default (state = getInitalState(), action) => {\n    switch (action.type) {\n        case ACTIONS.UPDATE_DIE:\n            return deferToDice(state, action);\n        case ACTIONS.REMOVE_DIE:\n            return removeDie(state, action);\n        case ACTIONS.ADD_DIE:\n            return addDie(state, action);\n        case ACTIONS.CASCADE_DICE:\n            return cascadeDice(state, action);\n        case ACTIONS.GAME_RESET:\n            return getInitalState();\n        default:\n            return state;\n    }\n};\n","import { ACTIONS } from '../constants';\n\nconst initialState = { used: 0, limit: 10, cap: 10 };\n\nexport default (state = initialState, action) => {\n    switch (action.type) {\n        case ACTIONS.UPDATE_DIE:\n            return { ...state, used: state.used + 1 };\n        case ACTIONS.ADD_MOVES:\n            return { ...state, limit: Math.min(state.limit + action.moves, state.used + state.cap) };\n        case ACTIONS.GAME_RESET:\n            return initialState;\n        default:\n            return state;\n    }\n}\n","import times from 'lodash/fp/times';\nimport shuffle from 'lodash/fp/shuffle';\nimport clamp from 'lodash/fp/clamp';\n\nimport createDieState from './createDieState';\n\nimport { ACTIONS, DIE_TYPES } from '../constants';\n\nconst clampVal = clamp(0, Infinity);\nconst floor = value => Math.floor(value);\nconst round = value => Math.round(value);\nconst log = (value) => Math.log10(value);\n\nconst getCountUp = (level) => 10;\nconst getCountDown = (level) => clampVal(round(log(level) * 5));\nconst getCountFlip = (level) => clampVal(round(log(level) * 4) - 2);\nconst getCountRandom = (level) => floor(clampVal(round(log(level) * 4) - 2.5));\nconst getCountBlocker = (level) => clampVal(round(log(level) * 2.5) - 2);\nconst getCountBomb = (level) => {\n    if (level >= 15) return level % 5 === 0 ? 1 : 0;\n    return 0;\n};\n\nconst checkForRuns = (levelDice = []) => {\n    for (var i = 0; i < levelDice.length; i++) {\n        const value = levelDice[i].value;\n\n        if (\n            levelDice[i + 1] && levelDice[i + 1].value === value &&\n            levelDice[i + 2] && levelDice[i + 2].value === value\n        ) {\n            console.log('found run', levelDice, i, i+1, i+2);\n            return true;\n        }\n    }\n\n    return false;\n}\n\nconst getLevelDice = (level) => {\n    console.log(\n        'NEXT LEVEL', level,\n        'UP', getCountUp(level),\n        'DOWN', getCountDown(level),\n        'FLIP', getCountFlip(level),\n        'RANDOM', getCountRandom(level),\n        'BLOCKER', getCountBlocker(level),\n        'BOMB', getCountBomb(level),\n        'total', getCountUp(level) +\n                getCountDown(level) +\n                getCountRandom(level) +\n                getCountBlocker(level) +\n                getCountFlip(level) +\n                getCountBomb(level)\n    )\n\n    let levelDice;\n    let attempts = 0;\n\n    do {\n        levelDice = shuffle([\n            ...times(() => createDieState(DIE_TYPES.UP), getCountUp(level)),\n            ...times(() => createDieState(DIE_TYPES.DOWN), getCountDown(level)),\n            ...times(() => createDieState(DIE_TYPES.RANDOM), getCountRandom(level)),\n            ...times(() => createDieState(DIE_TYPES.BLOCKER), getCountBlocker(level)),\n            ...times(() => createDieState(DIE_TYPES.FLIP), getCountFlip(level)),\n            ...times(() => createDieState(DIE_TYPES.BOMB), getCountBomb(level)),\n        ]);\n\n        attempts++;\n    } while (attempts < 5 && checkForRuns(levelDice));\n\n    return levelDice;\n};\n\nconst getInitalState = () => ({\n    level: 1,\n    clearedDice: 0,\n    upcomingDice: getLevelDice(1),\n});\n\nconst addDie = (state, action) => {\n    let level = state.level;\n    let upcomingDice = state.upcomingDice.slice(1);\n\n    if (upcomingDice.length === 0) {\n        level = level + 1;\n        upcomingDice = getLevelDice(level);\n    }\n\n    return {\n        ...state,\n        level,\n        upcomingDice,\n    }\n}\n\nexport default (state = getInitalState(), action) => {\n    switch (action.type) {\n        case ACTIONS.ADD_DIE:\n            return addDie(state, action);\n        case ACTIONS.REMOVE_DIE:\n            return { ...state, clearedDice: state.clearedDice + 1 };\n        case ACTIONS.SET_LEVEL:\n            return { ...state, level: action.level, upcomingDice: getLevelDice(action.level) };\n        case ACTIONS.GAME_RESET:\n            return getInitalState();\n        default:\n            return state;\n    }\n}\n","import { GAME_STATES, ACTIONS } from '../constants';\n\nconst initialState = GAME_STATES.ACTIVE;\n\nexport default (state = initialState, action) => {\n    switch (action.type) {\n        case ACTIONS.GAME_END:\n            return GAME_STATES.FINISHED;\n        case ACTIONS.GAME_RESET:\n            return initialState;\n        default:\n            return state;\n    }\n}\n","import { nanoid } from 'nanoid';\nimport { ACTIONS } from '../constants';\n\nconst initialState = {\n    gameId: nanoid(),\n    gameStart: new Date(),\n    gameEnd: null,\n};\n\nexport default (state = initialState, action) => {\n    switch (action.type) {\n        case ACTIONS.GAME_END:\n            return {\n                ...state,\n                gameEnd: new Date(),\n            };\n        case ACTIONS.GAME_RESET:\n            return {\n                gameId: nanoid(),\n                gameStart: new Date(),\n                gameEnd: null,\n            };\n        default:\n            return state;\n    }\n}\n","import { ACTIONS } from '../constants';\n\nconst darkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;\nconst initialState = {\n    interface: darkMode ? 'dark' : darkMode\n};\n\nexport default (state = initialState, action) => {\n    switch (action.type) {\n        case ACTIONS.SET_THEME:\n            return { ...state, interface: action.interface };\n        default:\n            return state;\n    }\n};\n","import { combineReducers } from 'redux';\n\nimport gameBoard from './gameBoardReducer';\nimport score from './scoreReducer';\nimport inputEnabled from './inputEnabledReducer';\nimport moves from './movesReducer';\nimport level from './levelReducer';\nimport gameState from './gameStateReducer';\nimport tracking from './trackingReducer';\nimport modal from './modalReducer';\nimport theming from './themeReducer';\n\nexport default combineReducers({\n    gameBoard,\n    score,\n    inputEnabled,\n    moves,\n    level,\n    gameState,\n    tracking,\n    theming,\n    modal,\n});\n","import { ACTIONS } from '../constants';\n\nconst initialState = 0;\n\nexport default (state = initialState, action) => {\n    switch (action.type) {\n        case ACTIONS.ADD_SCORE:\n            return state + action.score * action.multiplier;\n        case ACTIONS.GAME_RESET:\n            return initialState;\n        default:\n            return state;\n    }\n}\n","import { ACTIONS } from '../constants';\n\nconst initialState = true;\n\nexport default (state = initialState, action) => {\n    switch (action.type) {\n        case ACTIONS.INPUT_DISABLE:\n            return false;\n        case ACTIONS.INPUT_ENABLE:\n            return true;\n        case ACTIONS.GAME_RESET:\n            return initialState;\n        default:\n            return state;\n    }\n}\n","import { ACTIONS } from '../constants';\n\nconst initialState = null;\n\nexport default (state = initialState, action) => {\n    switch (action.type) {\n        case ACTIONS.OPEN_MODAL:\n            return action.modal;\n        case ACTIONS.CLOSE_MODAL:\n            return null;\n        default:\n            return state;\n    }\n}\n","import { put, select, takeEvery, all } from 'redux-saga/effects'\n\nimport first from 'lodash/fp/first';\nimport includes from 'lodash/fp/includes';\n\nimport findBoardMatches from '../util/findBoardMatches';\nimport getDieFromBoard from '../util/getDieFromBoard';\n\nimport { ACTIONS, BOARD_HEIGHT, DIE_TYPES } from '../constants';\n\nconst delay = (duration) => new Promise(resolve => setTimeout(resolve, duration));\n\nconst getId = (die) => die.id;\n\nconst getMatchScore = (matchLength) => {\n    switch (matchLength) {\n        case 3:\n            return 0;\n        case 4:\n            return 100;\n        case 5:\n            return 300;\n        case 6:\n            return 500;\n        default:\n            return Math.max((matchLength - 6) * 300, 0) + 500;\n    }\n};\n\nconst getScoreValueBonus = (matchLength, matchValue) => {\n    const valueMulitplier = matchLength <= 3 ? 10 : 20;\n\n    return matchValue * valueMulitplier;\n};\n\nfunction *addDie(removedDie) {\n    const state = yield select();\n\n    const nextDie = state.level.upcomingDice[0];\n    const x = removedDie.x;\n    const y = -BOARD_HEIGHT;\n\n    yield put({ type: ACTIONS.ADD_DIE, die: { ...nextDie, x, y } });\n\n    yield delay(100);\n\n    yield put({ type: ACTIONS.CASCADE_DICE });\n};\n\nfunction *handleMatchGroup(matchGroup, scoreMultipler) {\n    const state = yield select();\n\n    const gameBoardIds = state.gameBoard.map(getId);\n    const diceToRemove = matchGroup.filter(die => includes(getId(die), gameBoardIds));\n\n    yield all(diceToRemove.map((die) => put({ type: ACTIONS.REMOVE_DIE, id: die.id })));\n\n    yield delay(250);\n\n    yield put({ type: ACTIONS.CASCADE_DICE });\n\n    const score = (getMatchScore(diceToRemove.length) + getScoreValueBonus(diceToRemove.length, first(diceToRemove).value));\n\n    yield put({\n        type: ACTIONS.ADD_SCORE,\n        score: score,\n        multiplier: scoreMultipler\n    });\n\n    yield delay(250);\n\n    for (let die of diceToRemove) {\n        yield addDie(die);\n    }\n\n    yield delay(100);\n};\n\nfunction *removeMatches(matches, scoreMultipler = 1) {\n    yield delay(100);\n\n    if (!matches.length) return;\n\n    const state = yield select();\n\n    for (let matchGroup of matches) {\n        yield handleMatchGroup(matchGroup, scoreMultipler);\n        yield delay(250);\n    }\n\n    const updatedState = yield select();\n    const nextMatches = findBoardMatches(updatedState.gameBoard);\n\n    if (state.level.level !== updatedState.level.level) {\n        yield put({ type: ACTIONS.ADD_MOVES, moves: 10 });\n    }\n\n    yield delay(300);\n\n    if (nextMatches.length) {\n        return yield removeMatches(nextMatches, scoreMultipler + 1);\n    }\n}\n\nconst BOMB_MATRIX = [\n    [0, 0], // bomb itself is first so that the score value bonus == 0\n    [-1, -1], [0, -1], [1, -1],\n    [-1, 0],        [1, 0],\n    [-1, 1], [0, 1], [1, 1]\n];\n\nconst findDiceToExplode = (gameBoard) => {\n    const getDieAt = getDieFromBoard(gameBoard);\n\n    const diceToExplode = gameBoard\n        .filter((die) => die.dieType === DIE_TYPES.BOMB && die.value <= 0)\n        .map(die => (\n            BOMB_MATRIX\n                .map(([offsetX, offsetY]) => getDieAt(die.x + offsetX, die.y + offsetY))\n                .filter(die => !!die)\n        ));\n\n    return diceToExplode;\n}\n\nfunction *onUpdateDie() {\n    yield put({ type: ACTIONS.INPUT_DISABLE });\n\n    const state = yield select();\n    const matches = findBoardMatches(state.gameBoard);\n\n    if (matches.length) {\n        yield delay(250);\n        yield removeMatches(matches, 1);\n    }\n\n    const postMatchState = yield select();\n    const diceToExplode = findDiceToExplode(postMatchState.gameBoard);\n    if (diceToExplode.length) {\n        yield delay(250);\n        yield removeMatches(diceToExplode, 1);\n    }\n\n    yield put({ type: ACTIONS.INPUT_ENABLE });\n\n    const finalState = yield select();\n    if (finalState.moves.limit - finalState.moves.used <= 0) {\n        yield delay(800);\n        return yield put({ type: ACTIONS.GAME_END });\n    }\n}\n\nfunction* matchSaga() {\n    yield takeEvery(ACTIONS.UPDATE_DIE, onUpdateDie);\n}\n\nexport default matchSaga;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n// import registerServiceWorker from './registerServiceWorker';\nimport configureStore from './store/configureStore';\nimport { Provider } from 'react-redux'\n\nconst store = configureStore();\n\nReactDOM.render((\n    <Provider store={store}>\n        <App store={store} />\n    </Provider>\n), document.getElementById('root'));\n","import { createStore, applyMiddleware } from 'redux';\nimport { createLogger } from 'redux-logger';\n\nimport createSagaMiddleware from 'redux-saga';\nimport { save, load } from 'redux-localstorage-simple';\n\nimport rootReducer from '../reducers/rootReducer';\n\nimport sagas from './matchSagas';\n\nexport default () => {\n    const sagaMiddleware = createSagaMiddleware();\n\n    const createStoreWithMiddleware = applyMiddleware(\n        createLogger({\n            collapsed: true,\n            duration: true,\n        }),\n        save({\n            namespace: 'dicematch.state',\n            ignoreStates: [\n                'inputEnabled',\n            ],\n        }),\n        sagaMiddleware,\n    )(createStore);\n\n    const store = createStoreWithMiddleware(rootReducer, load({\n        namespace: 'dicematch.state',\n    }));\n\n    sagaMiddleware.run(sagas);\n\n    window._store = store;\n\n    return store;\n};\n"],"sourceRoot":""}