{"version":3,"sources":["components/header/icon-help.svg","components/header/icon-settings.svg","components/header/dicematch-logo-wide.svg","components/modal/icon-lock.svg","constants/index.js","components/AnimatedDieFace.js","components/getDieColor.js","components/DieFace.js","components/Die.js","components/GameBoard.js","util/useLocalStorage.js","components/modal/GameOverScoreTable.js","components/modal/Modal.js","components/modal/GameOverModal.js","components/header/GameHeaderBar.js","components/gameStatus/UpcomingDice.js","components/gameStatus/Level.js","components/gameStatus/Moves.js","components/gameStatus/Score.js","components/gameStatus/GameStatusBar.js","components/ScoreAnnouncer.js","util/circularClamp.js","util/rollDie.js","reducers/dieReducer.js","components/modal/MeetDice.js","components/modal/HelpModal.js","constants/themes.js","components/modal/SettingsModal.js","App.js","reducers/createDieState.js","util/getDieFromBoard.js","util/findBoardMatches.js","reducers/gameBoardReducer.js","reducers/movesReducer.js","reducers/levelReducer.js","reducers/gameStateReducer.js","reducers/trackingReducer.js","reducers/themeReducer.js","reducers/rootReducer.js","reducers/scoreReducer.js","reducers/inputEnabledReducer.js","reducers/modalReducer.js","store/matchSagas.js","index.js","store/configureStore.js"],"names":["module","exports","__webpack_require__","p","ACTIONS","ADD_SCORE","UPDATE_DIE","REMOVE_DIE","ADD_DIE","MOVE_DIE","CASCADE_DICE","INPUT_DISABLE","INPUT_ENABLE","ADD_MOVES","SET_LEVEL","GAME_END","GAME_RESET","OPEN_MODAL","CLOSE_MODAL","SET_INTERFACE_THEME","SET_DICE_THEME","DIE_TYPES","UP","DOWN","RANDOM","BLOCKER","FLIP","BOMB","GAME_STATES","MODALS","INTERFACE_THEME","DICE_THEME","BOARD_WIDTH","BOARD_HEIGHT","scaleInVertical","keyframes","_templateObject","scaleOutVertical","_templateObject2","scaleInHorizontal","_templateObject3","scaleOutHorizontal","_templateObject4","shake","degree","_templateObject5","FaceContainer","styled","div","_templateObject14","animatedChild","css","_templateObject15","CurrentChild","_templateObject16","_ref","dieType","diceSize","animate","_templateObject6","_templateObject7","_templateObject8","_templateObject9","PrevChild","_templateObject17","_ref2","_templateObject10","_templateObject11","_templateObject12","_templateObject13","AnimatedDieFace","state","prevChildren","removePrevChild","id","_this","setState","_ref3","filter","child","_this2","this","_ref4","value","props","concat","Object","toConsumableArray","children","timeout","setTimeout","_this3","_this$props","react_default","a","createElement","className","assign","length","key","map","_ref5","React","Component","flicker","getDieColor_templateObject","getDieColor","getDieColor_templateObject2","theme","dice","down","pip","getDieColor_templateObject3","blocker","blockerPip","getDieColor_templateObject4","_ref6","bomb","_ref7","bombPip","getDieColor_templateObject5","_ref8","random","_ref9","getDieColor_templateObject6","_ref10","flip","_ref11","getDieColor_templateObject7","_ref12","up","_ref13","DieSvg","svg","DieFace_templateObject","getPos","size","percent","margin","Pip","x","y","objectWithoutProperties","r","cx","cy","Face0","width","height","Face1","DieFace_Pip","Face2","Face3","Face4","Face5","Face6","DieFace","DieFace_Face1","DieFace_Face2","DieFace_Face3","DieFace_Face4","DieFace_Face5","DieFace_Face6","DieFace_Face0","DieButton","Die_templateObject","Positioner","Die_templateObject2","getInlineStyle","transform","DiePositioner","style","Die","handleDieUpdate","moves","inputEnabled","updateDie","limit","used","Die_DiePositioner","onClick","components_AnimatedDieFace","components_DieFace","defaultStyle","transition","opacity","transitionStyles","entering","entered","exiting","Fade","react_transition_group","objectSpread","BoardWrapper","GameBoard_templateObject","background","Board","GameBoard_templateObject2","getBoardSize","GameBoard","gameBoard","die","i","GameBoard_Fade","components_Die","useLocalStorage","initialValue","transformFn","arguments","undefined","JSON","parse","_useState","useState","item","localStorage","getItem","error","_useState2","slicedToArray","storedValue","setStoredValue","valueToStore","Function","setItem","stringify","Table","table","GameOverScoreTable_templateObject","Th","th","GameOverScoreTable_templateObject2","Td","td","GameOverScoreTable_templateObject3","scores","textSecondary","ScoreEntry","tr","GameOverScoreTable_templateObject4","currentScore","currentScoreBackground","ScoreTable","currentScoreId","endTime","score","level","isCurrentScore","gameEndDateFormat","Date","toLocaleDateString","year","month","day","containerEnter","Modal_templateObject","modalEnter","Modal_templateObject2","containerExit","Modal_templateObject3","modalExit","Modal_templateObject4","ModalContainer","Modal_templateObject5","StyledModal","Modal_templateObject6","foreground","modal","CloseButton","button","Modal_templateObject7","connect","dispatch","closeModal","type","showCloseButton","closing","setClosing","Title","h1","GameOverModal_templateObject","divider","RestartButton","GameOverModal_templateObject2","buttonBackground","buttonColor","ScoreDisplay","name","_ref4$level","clearedDice","upcomingDice","_ref4$tracking","tracking","gameId","gameStart","gameEnd","setInputActive","_useLocalStorage","_useLocalStorage2","setScores","currentGameScore","diceCleared","diceRemainingInLevel","turnsUsed","startTime","useEffect","find","previousScores","sort","b","slice","newScores","GameOverScoreTable","GameOverModal","restartGame","modal_Modal","GameOverModal_ScoreDisplay","GameHeaderBarContainer","GameHeaderBar_templateObject","backgroundSecondary","Button","GameHeaderBar_templateObject2","isDark","GameHeaderBar_templateObject3","GameHeaderBar_templateObject4","HelpButton","GameHeaderBar_templateObject5","require","SettingsButton","GameHeaderBar_templateObject6","GameTitle","GameHeaderBar_templateObject7","GameHeaderBar","openModal","theming","StyledUpcomingDice","UpcomingDice_templateObject","header","MiniDie","UpcomingDice_templateObject2","More","span","UpcomingDice_templateObject3","UpcomingDice","nextNiceDisplay","nextMore","StyledLevelContainer","Level_templateObject","backgroundInset","StyledLevel","Level_templateObject2","text","Level","gameStatus_UpcomingDice","Moves_templateObject","StyledMoves","Moves_templateObject2","border","Moves_templateObject3","Moves_templateObject4","Moves_templateObject5","Moves_templateObject6","StepBox","Moves_templateObject7","ready","danger","warning","insideBorder","Moves","_ref9$moves","cap","movesLeft","times","index","StyledScore","Score_templateObject","Score","GameStatus","GameStatusBar_templateObject","GameStatusBar","gameStatus_Score","gameStatus_Level","gameStatus_Moves","Announcements","ScoreAnnouncer_templateObject","position","top","left","textAlign","marginLeft","marginTop","ScoreAnnouncer","announcements","aId","gameState","drop","change","ScoreAnnouncer_Fade","circularClamp","min","max","rollDie","dieSize","Math","floor","ensureIdMatch","subReducer","action","updateDieUp","updateDieDown","updateDieRandom","roll","valueForFlip","updateDieFlip","updateDieBomb","moveDie","MeetDieContainer","MeetDice_templateObject","bounceLeft","MeetDice_templateObject2","bounceRight","MeetDice_templateObject3","NavigateButton","MeetDice_templateObject4","DieListContainer","MeetDice_templateObject5","DieContainer","MeetDice_templateObject6","foregroundSecondary","MeetDice_templateObject7","DICE_DESCRIPTIONS","description","updater","MeetDice","viewIndex","setViewIndex","_useState3","_useState4","dieDescriptions","setDieDescriptions","atStart","atEnd","navigate","direction","clamp","console","log","disabled","MeetDice_DieButton","FlexCenter","HelpModal_templateObject","Header","HelpModal_templateObject2","Line","HelpModal_templateObject3","DieDisplay","HelpModal_templateObject4","LevelDisplay","HelpModal_templateObject5","HelpModal","modal_MeetDice","colors","white","black","charcoal","charcoal_200","charcoal_100","grey_100","grey_200","grey_300","grey_400","grey_500","grey_700","grey_900","grey_1000","grey_1100","red","teal","green","yellow","yellow_700","yellow_900","beige","DICE_THEME_STANDARD","DICE_THEME_HIGH_CONTRAST","DICE_THEME_SUBDUED","DICE_THEME_TROPICAL","DICE_THEME_GLOW","getDiceTheme","themeId","THEME_LIGHT","highlight","THEME_DARK","SettingsModal_templateObject","SettingsRow","SettingsModal_templateObject2","SettingsModal_templateObject3","DieSettingsButton","SettingsModal_templateObject4","active","SettingsModal_templateObject5","DieSettingsSpacer","SettingsModal_templateObject6","DieThemeLocked","SettingsModal_templateObject7","SettingsModal_templateObject8","SettingsModal_templateObject9","DieThemeSettingsRow","activeTheme","lockUntilLevel","setDiceTheme","maxLevel","_ref14","diceTheme","styled_components_browser_esm","SettingsModal_DieDisplay","toggleInterfaceTheme","currentInterface","interface","_ref15","_ref15$theming","SettingsModal_Header","onChange","checked","SettingsModal_DieThemeSettingsRow","SettingsModal_RestartButton","href","clampDieSize","AppContainer","App_templateObject","GameContainer","App_templateObject2","GlobalStyle","createGlobalStyle","App_templateObject3","App","getDiceSize","window","innerWidth","addEventListener","removeEventListener","_this$props$theming","Helmet","content","header_GameHeaderBar","gameStatus_GameStatusBar","components_GameBoard","components_ScoreAnnouncer","modal_GameOverModal","modal_HelpModal","modal_SettingsModal","initialValueFor","createDieState","nanoid","getDieFromBoard","board","checkDiceMatch","nextDie","getId","intersectionById","intersectionBy","uniqById","uniqBy","findMatches","horzontalMatches","getDie","matchGroups","currGroup","push","hasMatch","findMatchesHorizontal","verticalMatches","reverse","findMatchesVertical","hGroup","intersectingGroup","vGroup","getInitalState","findBoardMatches","deferToDice","dieState","dieReducer","getDieToShift","initialState","clampVal","Infinity","round","log10","getCountDown","getCountFlip","getCountRandom","getCountBlocker","getCountBomb","checkForRuns","levelDice","getLevelDice","attempts","shuffle","darkMode","matchMedia","matches","combineReducers","removeDie","addDie","updatedState","dieToShift","cascadeDice","multiplier","handleMatchGroup","removeMatches","onUpdateDie","matchSaga","delay","duration","Promise","resolve","getMatchScore","matchLength","getScoreValueBonus","matchValue","removedDie","regenerator_default","wrap","_context","prev","next","select","sent","put","stop","_marked","matchGroup","scoreMultipler","gameBoardIds","diceToRemove","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","_context2","includes","all","first","Symbol","iterator","done","t0","return","finish","_marked2","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","nextMatches","_args3","_context3","abrupt","_marked3","BOMB_MATRIX","findDiceToExplode","getDieAt","offsetX","offsetY","postMatchState","diceToExplode","finalState","_context4","_marked4","_context5","takeEvery","_marked5","store","sagaMiddleware","createSagaMiddleware","applyMiddleware","createLogger","collapsed","predicate","process","save","namespace","ignoreStates","createStore","createStoreWithMiddleware","rootReducer","load","run","sagas","_store","configureStore","ReactDOM","render","es","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.a8a4058a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/icon-help.c70881f6.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon-settings.9693a6fc.svg\";","module.exports = __webpack_public_path__ + \"static/media/dicematch-logo-wide.715a1ddf.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon-lock.4e036c67.svg\";","export const ACTIONS = {\n    ADD_SCORE: 'ADD_SCORE',\n\n    UPDATE_DIE: 'UPDATE_DIE',\n    REMOVE_DIE: 'REMOVE_DIE',\n    ADD_DIE: 'ADD_DIE',\n    MOVE_DIE: 'MOVE_DIE',\n\n    CASCADE_DICE: 'CASCADE_DICE',\n\n    INPUT_DISABLE: 'INPUT_DISABLE',\n    INPUT_ENABLE: 'INPUT_ENABLE',\n\n    ADD_MOVES: 'ADD_MOVES',\n\n    SET_LEVEL: 'SET_LEVEL',\n\n    GAME_END: 'GAME_END',\n    GAME_RESET: 'GAME_RESET',\n\n    OPEN_MODAL: 'OPEN_MODAL',\n    CLOSE_MODAL: 'CLOSE_MODAL',\n\n    SET_INTERFACE_THEME: 'SET_INTERFACE_THEME',\n    SET_DICE_THEME: 'SET_DICE_THEME',\n};\n\nexport const DIE_TYPES = {\n    UP: 'UP',\n    DOWN: 'DOWN',\n    RANDOM: 'RANDOM',\n    BLOCKER: 'BLOCKER',\n    FLIP: 'FLIP',\n    BOMB: 'BOMB',\n}\n\nexport const GAME_STATES = {\n    ACTIVE: 'ACTIVE',\n    FINISHED: 'FINISHED',\n};\n\nexport const MODALS = {\n    HELP: 'HELP',\n    SETTINGS: 'SETTINGS',\n    SCORE: 'SCORE',\n};\n\nexport const INTERFACE_THEME = {\n    dark: 'dark',\n    light: 'light',\n};\n\nexport const DICE_THEME = {\n    standard: 'standard',\n    highContrast: 'highContrast',\n    tropical: 'tropical',\n    subdued: 'subdued',\n    glow: 'glow',\n};\n\nexport const BOARD_WIDTH = 5;\nexport const BOARD_HEIGHT = 6;\n\nexport const MIN_MATCH_LENGTH = 3;\n","import React from 'react';\nimport styled, { keyframes, css } from 'styled-components';\n\nimport { DIE_TYPES } from '../constants';\n\nconst ANIMATION_DUR = 200;\n\nconst scaleInVertical = keyframes`\n    0% { transform: scaleY(0); filter: brightness(0.5); }\n    100% { transform: scaleY(1); filter: brightness(1); }\n`;\n\nconst scaleOutVertical = keyframes`\n    0% { transform: scaleY(1); filter: brightness(1); }\n    100% { transform: scaleY(0); filter: brightness(0.5); }\n`;\n\nconst scaleInHorizontal = keyframes`\n    0% { transform: scaleX(0); filter: brightness(0.5); }\n    100% { transform: scaleX(1); filter: brightness(1); }\n`;\n\nconst scaleOutHorizontal = keyframes`\n    0% { transform: scaleX(1); filter: brightness(1); }\n    100% { transform: scaleX(0); filter: brightness(0.5); }\n`;\n\nconst shake = (degree) => keyframes`\n    0% {\n        transform: rotate(0deg);\n    }\n    25% {\n        transform: rotate(-${degree}deg);\n    }\n    50% {\n      transform: rotate(0deg);\n    }\n    75% {\n        transform: rotate(${degree}deg);\n    }\n`;\n\nconst getEnterAnimation = ({ dieType, diceSize, animate }) => {\n    if (!animate) return null;\n\n    switch (dieType) {\n        case DIE_TYPES.DOWN:\n            return css`\n                animation: ${scaleInVertical} ${ANIMATION_DUR}ms linear forwards;\n                transform-origin: top center;\n            `;\n        case DIE_TYPES.RANDOM:\n            return css`\n                animation: ${shake(10)} 10ms linear infinite;\n            `;\n        case DIE_TYPES.FLIP:\n            return css`\n                animation: ${scaleInHorizontal} 100ms ease-in-out forwards;\n            `;\n        default:\n            return css`\n                animation: ${scaleInVertical} ${ANIMATION_DUR}ms linear forwards;\n                transform-origin: bottom center;\n            `;\n    }\n};\n\nconst getExitAnimation = ({ dieType, diceSize }) => {\n    switch (dieType) {\n        case DIE_TYPES.DOWN:\n            return css`\n                animation: ${scaleOutVertical} ${ANIMATION_DUR}ms linear forwards;\n                transform-origin: bottom center;\n            `;\n        case DIE_TYPES.RANDOM:\n            return css`\n                animation: ${shake(10)} 10ms linear infinite;\n            `;\n        case DIE_TYPES.FLIP:\n            return css`\n                animation: ${scaleOutHorizontal} 100ms ease-in-out forwards;\n            `;\n        default:\n            return css`\n                animation: ${scaleOutVertical} ${ANIMATION_DUR}ms linear forwards;\n                transform-origin: top center;\n            `;\n    }\n}\n\nconst FaceContainer = styled.div`\n    position: relative;\n`;\n\nconst animatedChild = css`\n    position: absolute;\n    top: 0;\n    left: 0;\n\n    transform: translate3d(0, 0, 0);\n`;\n\nconst CurrentChild = styled.div`\n    ${animatedChild}\n    ${getEnterAnimation}\n`;\n\nconst PrevChild = styled.div`\n    ${animatedChild}\n    ${getExitAnimation}\n`;\n\nclass AnimatedDieFace extends React.Component {\n    state = { prevChildren: [] };\n\n    componentWillReceiveProps({ value }) {\n        if (value !== this.props.value) {\n            const id = this.props.value;\n\n            this.setState((state) => ({\n                prevChildren: [\n                    ...state.prevChildren,\n                    {\n                        child: this.props.children,\n                        id: id,\n                        timeout: setTimeout(this.removePrevChild(id), ANIMATION_DUR)\n                    }\n                ]\n            }));\n        }\n    }\n\n    removePrevChild = (id) => () => (\n        this.setState(({ prevChildren }) => ({\n            prevChildren: prevChildren.filter((child) => child.id !== id),\n        }))\n    );\n\n    render() {\n        const { prevChildren } = this.state;\n        const { children, value } = this.props;\n\n        return (\n            <FaceContainer className=\"FACE\">\n                <CurrentChild {...this.props} animate={prevChildren.length} key={value}>\n                    {children}\n                </CurrentChild>\n\n                {prevChildren.map(({ child, id }) => <PrevChild {...this.props} key={id}>{child}</PrevChild>)}\n            </FaceContainer>\n        )\n    }\n}\n\nexport default AnimatedDieFace;\n","import { css, keyframes } from 'styled-components';\n\nimport { DIE_TYPES } from '../constants';\n\nconst flicker = keyframes`\n    0% { opacity: 0; }\n    50% { opacity: 1; }\n    100% { opacity: 0; }\n`;\n\nconst getDieColor = ({ dieType, value }) => {\n    switch (dieType) {\n        case DIE_TYPES.DOWN:\n            return css`\n                background: ${({ theme }) => theme.dice.down};\n\n                circle {\n                    fill: ${({ theme }) => theme.dice.pip};\n                    opacity: 0.7;\n                }\n            `;\n        case DIE_TYPES.BLOCKER:\n            return css`\n                background: ${({ theme }) => theme.dice.blocker};\n\n                circle {\n                    fill: ${({ theme }) => theme.dice.blockerPip};\n                    opacity: 0.4;\n                }\n            `;\n        case DIE_TYPES.BOMB:\n            return css`\n                background: ${({ theme }) => theme.dice.bomb};\n\n                circle {\n                    fill: ${({ theme }) => theme.dice.bombPip};\n                    animation: ${flicker} ${(value)*200}ms ease-in-out infinite;\n                }\n            `;\n        case DIE_TYPES.RANDOM:\n            return css`\n                background: ${({ theme }) => theme.dice.random};\n\n                circle {\n                    fill: ${({ theme }) => theme.dice.pip};\n                    opacity: 0.7;\n                }\n            `;\n        case DIE_TYPES.FLIP:\n            return css`\n                background: ${({ theme }) => theme.dice.flip};\n                border-radius: 50%;\n\n                circle {\n                    fill: ${({ theme }) => theme.dice.pip};\n                    opacity: 0.7;\n                }\n            `;\n        case DIE_TYPES.UP:\n        default:\n            return css`\n                background: ${({ theme }) => theme.dice.up};\n\n                circle {\n                    fill: ${({ theme }) => theme.dice.pip};\n                    opacity: 0.7;\n                }\n            `;\n    }\n};\n\nexport default getDieColor;\n","import React from 'react';\n\nimport styled from 'styled-components';\n\nimport getDieColor from './getDieColor';\n\nconst DieSvg = styled.svg`\n    border-radius: 15%;\n\n    ${getDieColor}\n`;\n\nconst getPos = (size, percent) => {\n    const margin = size * 0.25;\n    return margin + percent * (size - margin * 2);\n}\n\nconst Pip = ({ x, y, diceSize, ...rest }) => (\n    <circle r={diceSize * 0.08} cx={getPos(diceSize, x)} cy={getPos(diceSize, y)} />\n)\n\nconst Face0 = ({ diceSize, ...props }) => (\n    <DieSvg {...props} width={diceSize} height={diceSize} />\n);\n\nconst Face1 = ({ diceSize, ...props }) => (\n    <DieSvg {...props} width={diceSize} height={diceSize}>\n        <Pip {...props} diceSize={diceSize} x={0.5} y={0.5} />\n    </DieSvg>\n);\n\nconst Face2 = ({ diceSize, ...props }) => (\n    <DieSvg {...props} width={diceSize} height={diceSize}>\n        <Pip {...props} diceSize={diceSize} x={0} y={1} />\n        <Pip {...props} diceSize={diceSize} x={1} y={0} />\n    </DieSvg>\n);\n\nconst Face3 = ({ diceSize, ...props }) => (\n    <DieSvg {...props} width={diceSize} height={diceSize}>\n        <Pip {...props} diceSize={diceSize} x={0} y={1} />\n        <Pip {...props} diceSize={diceSize} x={0.5} y={0.5} />\n        <Pip {...props} diceSize={diceSize} x={1} y={0} />\n    </DieSvg>\n);\n\nconst Face4 = ({ diceSize, ...props }) => (\n    <DieSvg {...props} width={diceSize} height={diceSize}>\n        <Pip {...props} diceSize={diceSize} x={0} y={0} />\n        <Pip {...props} diceSize={diceSize} x={0} y={1} />\n        <Pip {...props} diceSize={diceSize} x={1} y={0} />\n        <Pip {...props} diceSize={diceSize} x={1} y={1} />\n    </DieSvg>\n);\n\n\nconst Face5 = ({ diceSize, ...props }) => (\n    <DieSvg {...props} width={diceSize} height={diceSize}>\n        <Pip {...props} diceSize={diceSize} x={0} y={0} />\n        <Pip {...props} diceSize={diceSize} x={0} y={1} />\n        <Pip {...props} diceSize={diceSize} x={0.5} y={0.5} />\n        <Pip {...props} diceSize={diceSize} x={1} y={0} />\n        <Pip {...props} diceSize={diceSize} x={1} y={1} />\n    </DieSvg>\n);\n\nconst Face6 = ({ diceSize, ...props }) => (\n    <DieSvg {...props} width={diceSize} height={diceSize}>\n        <Pip {...props} diceSize={diceSize} x={0} y={0} />\n        <Pip {...props} diceSize={diceSize} x={0} y={0.5} />\n        <Pip {...props} diceSize={diceSize} x={0} y={1} />\n        <Pip {...props} diceSize={diceSize} x={1} y={0} />\n        <Pip {...props} diceSize={diceSize} x={1} y={0.5} />\n        <Pip {...props} diceSize={diceSize} x={1} y={1} />\n    </DieSvg>\n);\n\nconst DieFace = (props) => {\n    switch (props.value) {\n        case 1:\n            return <Face1 {...props} />;\n        case 2:\n            return <Face2 {...props} />;\n        case 3:\n            return <Face3 {...props} />;\n        case 4:\n            return <Face4 {...props} />;\n        case 5:\n            return <Face5 {...props} />;\n        case 6:\n            return <Face6 {...props} />;\n        default:\n            return <Face0 {...props} />;\n    }\n};\n\nexport default DieFace;\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport AnimatedDieFace from './AnimatedDieFace';\nimport DieFace from './DieFace';\n\nimport { DIE_TYPES } from '../constants';\n\nconst DieButton = styled.div`\n    padding: 0;\n    border: 0;\n\n    background: transparent;\n\n    text-align: center;\n\n    cursor: pointer;\n    outline: none;\n`;\n\nconst Positioner = styled.div`\n    position: absolute;\n    transition: transform 0.5s ease-in;\n    perspective: 500px;\n    perspective-origin: 50% 50%;\n`;\n\nconst getInlineStyle = ({ x, y, diceSize }) => ({\n    transform: `translate(${diceSize * x}px, ${diceSize * y + 10}px)`\n});\n\nconst DiePositioner = ({ children, ...props }) => (\n    <Positioner style={getInlineStyle(props)}>\n        {children}\n    </Positioner>\n);\n\nclass Die extends React.Component {\n    shouldComponentUpdate({ value, x, y }) {\n        return !(\n            value === this.props.value &&\n            x === this.props.x &&\n            y === this.props.y\n        );\n    }\n\n    handleDieUpdate = () => {\n        const {\n            moves,\n            inputEnabled,\n            dieType,\n            updateDie,\n            id,\n        } = this.props;\n\n        if (\n            moves.limit - moves.used <= 0 ||\n            !inputEnabled ||\n            (dieType === DIE_TYPES.BLOCKER || dieType === DIE_TYPES.BOMB)\n        ) return;\n\n        updateDie(id);\n    }\n\n    render() {\n        const {\n            diceSize,\n        } = this.props;\n\n        return (\n            <DiePositioner {...this.props}>\n                <DieButton {...this.props}\n                        onClick={this.handleDieUpdate}>\n                    <AnimatedDieFace {...this.props}>\n                        <DieFace {...this.props} diceSize={diceSize - 2} />\n                    </AnimatedDieFace>\n                </DieButton>\n            </DiePositioner>\n        );\n    };\n}\n\nexport default Die;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Transition, TransitionGroup } from 'react-transition-group';\n\nimport Die from './Die';\n\nimport { BOARD_WIDTH, BOARD_HEIGHT } from '../constants';\n\nconst duration = 300;\n\nconst defaultStyle = {\n    transition: `opacity ${duration}ms ease-in`,\n    opacity: 0,\n}\n\nconst transitionStyles = {\n    entering: { opacity: 1 },\n    entered:  { opacity: 1 },\n    exiting:  { opacity: 0 },\n};\n\nconst Fade = ({ children, ...props }) => (\n    <Transition {...props} timeout={duration}>\n        {(state) => (\n            <span style={{ ...defaultStyle, ...transitionStyles[state] }}>\n                {children}\n            </span>\n        )}\n    </Transition>\n);\n\nconst BoardWrapper = styled.div`\n    padding: 0 10px;\n    overflow: hidden;\n    background: ${props => props.theme.background};\n`;\n\nconst Board = styled.div`\n    position: relative;\n`;\n\nconst getBoardSize = ({ diceSize }) => ({\n    width: diceSize * BOARD_WIDTH,\n    height: diceSize * BOARD_HEIGHT + 20,\n})\n\nconst GameBoard = ({ gameBoard, ...props }) => (\n    <BoardWrapper>\n        <Board style={getBoardSize(props)}>\n            <TransitionGroup>\n                {gameBoard.map((die, i) => (\n                    <Fade key={die.id}>\n                        <Die {...props} {...die} />\n                    </Fade>\n                ))}\n            </TransitionGroup>\n        </Board>\n    </BoardWrapper>\n);\n\nexport default GameBoard;\n","// Adapted from https://usehooks.com/useLocalStorage/\nimport { useState } from 'react';\n\nconst useLocalStorage = (key, initialValue, transformFn = JSON.parse) => {\n    // State to store our value\n    // Pass initial state function to useState so logic is only executed once\n    const [storedValue, setStoredValue] = useState(() => {\n        try {\n            // Get from local storage by key\n            const item = localStorage.getItem(key);\n            // Parse stored json or if none return initialValue\n            return item ? transformFn(item) : initialValue;\n        } catch (error) {\n            return initialValue;\n        }\n    });\n\n    // Return a wrapped version of useState's setter function that ...\n    // ... persists the new value to localStorage.\n    const setValue = value => {\n        // Allow value to be a function so we have same API as useState\n        const valueToStore = value instanceof Function ? value(storedValue) : value;\n        // Save state\n        setStoredValue(valueToStore);\n        // Save to local storage\n        localStorage.setItem(key, JSON.stringify(valueToStore));\n    };\n\n    return [storedValue, setValue];\n};\n\nexport default useLocalStorage;\n","import React from 'react';\nimport styled from 'styled-components';\n\nconst Table = styled.table`\n    width: 100%;\n    border-spacing: 0;\n`;\n\nconst Th = styled.th`\n    padding: 0.25rem 0.5rem;\n\n    font-weight: bold;\n    text-align: left;\n\n    &.last {\n        text-align: right;\n    }\n`;\n\nconst Td = styled.td`\n    padding: 0.25rem 0.5rem;\n    text-align: left;\n\n    &.last {\n        text-align: right;\n    }\n\n    &.date {\n        color: ${(({ theme }) => theme.scores.textSecondary)};\n    }\n`;\n\nconst ScoreEntry = styled.tr`\n    background: ${({ currentScore, theme }) => (\n        currentScore ?\n            theme.scores.currentScoreBackground :\n            'transparent'\n    )}\n`;\n\nconst ScoreTable = ({ scores, currentScoreId }) => (\n    <Table>\n        <thead>\n        <tr>\n            <Th>\n                Score\n            </Th>\n            <Th>\n                Level\n            </Th>\n            <Th className='last'>\n                Date\n            </Th>\n        </tr>\n        </thead>\n        <tbody>\n        {scores.map(({ id, endTime, score, level }) => {\n            const isCurrentScore = currentScoreId === id;\n            const gameEndDate = endTime && new Date(endTime);\n            const gameEndDateFormat = gameEndDate.toLocaleDateString(undefined, { year: 'numeric', month: 'numeric', day: 'numeric' })\n\n            return (\n                <ScoreEntry key={id} currentScore={isCurrentScore}>\n                    <Td>\n                        {score}\n                    </Td>\n                    <Td>\n                        {level}\n                    </Td>\n                    <Td className='last date'>\n                        {gameEndDateFormat}\n                    </Td>\n                </ScoreEntry>\n            );\n        })}\n        </tbody>\n    </Table>\n);\n\nexport default ScoreTable;\n","import React, { useState } from 'react';\nimport styled, { keyframes } from 'styled-components';\nimport { ACTIONS } from '../../constants';\nimport { connect } from 'react-redux';\n\nconst containerEnter = keyframes`\n    0% { opacity: 0; }\n    100% { opacity: 1; }\n`;\n\nconst modalEnter = keyframes`\n    0% { transform: scale(0.9); }\n    100% { transform: scale(1); }\n`;\n\nconst containerExit = keyframes`\n    0% { opacity: 1; }\n    50% { opacity: 1; }\n    100% { opacity: 0; }\n`;\n\nconst modalExit = keyframes`\n    0% { transform: scale(1); }\n    100% { transform: scale(0.9) }\n`;\n\nconst ModalContainer = styled.div`\n    position: fixed;\n\n    display: flex;\n    justify-content: center;\n    align-items: flex-start;\n\n    overflow-y: auto;\n\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    padding: 1rem;\n    background: rgba(0, 0, 0, 0.7);\n\n    animation: ${containerEnter} 0.25s ease-in-out forwards;\n\n    &.closing {\n        animation: ${containerExit} 0.25s ease-in-out forwards;\n    }\n`;\n\nconst StyledModal = styled.div`\n    padding: 1rem;\n    border-radius: 0.8rem;\n    text-align: center;\n    font-size: 1rem;\n\n    width: 100%;\n    height: auto;\n    max-width: 600px;\n\n    color: ${(({ theme }) => theme.foreground)};\n    background: ${(({ theme }) => theme.modal.background)};\n\n    animation: ${modalEnter} 0.25s ease-in-out forwards;\n\n    .closing & {\n        animation: ${modalExit} 0.25s ease-in-out forwards;\n    }\n`;\n\nconst CloseButton = styled.button`\n    position: absolute;\n\n    top: 0;\n    right: 0;\n\n    width: 3rem;\n    height: 3rem;\n\n    border 0;\n\n    font-size: 1rem;\n    font-family: inherit;\n    color: ${(({ theme }) => theme.foreground)};\n\n    background: transparent;\n`;\n\nconst mapDispatchToProps = (dispatch) => ({\n    closeModal: () => dispatch({ type: ACTIONS.CLOSE_MODAL }),\n});\n\nconst Modal = ({ showCloseButton, children, closeModal }) => {\n    const [closing, setClosing] = useState();\n\n    const handleCloseClick = () => {\n        setClosing(true);\n        setTimeout(() => {\n            closeModal();\n            setClosing(false);\n        }, 250);\n    };\n\n    return (\n        <ModalContainer className={closing ? 'closing' : undefined}>\n            <StyledModal>\n                {showCloseButton && <CloseButton onClick={handleCloseClick}>X</CloseButton>}\n                {children}\n            </StyledModal>\n        </ModalContainer>\n    );\n}\n\nexport default connect(null, mapDispatchToProps)(Modal);\n","import React, { useEffect } from 'react';\nimport styled, { keyframes } from 'styled-components';\nimport useLocalStorage from '../../util/useLocalStorage';\n\nimport GameOverScoreTable from './GameOverScoreTable';\nimport Modal from './Modal';\n\nconst Title = styled.h1`\n    margin-top: 0;\n    margin-left: -1rem;\n    margin-right: -1rem;\n\n    padding-bottom: 1rem;\n\n    border-bottom: 1px solid ${(({ theme }) => theme.divider)};\n`;\n\nconst RestartButton = styled.button`\n    margin-top: 2rem;\n    margin-bottom: 1rem;\n    padding: 0.8rem 1.5rem;\n    border: 0;\n    border-radius: 0.5rem;\n\n    background: ${(({ theme }) => theme.scores.buttonBackground)};\n    color: ${(({ theme }) => theme.scores.buttonColor)};\n\n    font-size: 1rem;\n    outline: none;\n\n    font-weight: bold;\n`;\n\nconst ScoreDisplay = ({\n    name,\n    score,\n    level: { level, clearedDice, upcomingDice },\n    moves: { used },\n    tracking: { gameId, gameStart, gameEnd },\n    setInputActive,\n}) => {\n    const [scores, setScores] = useLocalStorage('dicematch.scores', []);\n\n    const currentGameScore = {\n        id: gameId,\n        score,\n        level,\n        diceCleared: clearedDice,\n        diceRemainingInLevel: upcomingDice.length,\n        turnsUsed: used,\n        startTime: gameStart,\n        endTime: gameEnd,\n    };\n\n    useEffect(() => {\n        if (scores.find(({ id }) => id === gameId)) return;\n\n        const previousScores = scores\n            .filter(score => !!score)\n            .sort((a, b) => b.score - a.score)\n            .slice(0, 10);\n\n        const newScores = [\n            ...previousScores,\n            currentGameScore\n        ].sort((a, b) => b.score - a.score);\n\n        setScores(newScores)\n    }, []);\n\n    return <GameOverScoreTable scores={scores} currentScoreId={gameId} setInputActive={setInputActive} />;\n};\n\nconst GameOverModal = ({ restartGame, ...props }) => {\n    return (\n        <Modal>\n            <Title>Game over</Title>\n\n            <ScoreDisplay {...props} />\n\n            <RestartButton onClick={restartGame}>\n                Restart\n            </RestartButton>\n        </Modal>\n    );\n}\n\nexport default GameOverModal;\n","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { MODALS } from '../../constants';\n\nconst GameHeaderBarContainer = styled.div`\n    display: grid;\n\n    width: 100vw;\n\n    grid-template-columns: 3rem auto 3rem;\n    grid-template-rows: 3rem;\n\n    justify-items: center;\n    align-items: center;\n\n    background: ${props => props.theme.backgroundSecondary};\n`;\n\nconst Button = styled.button`\n    width: 3rem;\n    height: 3rem;\n\n    background-color: transparent;\n    background-size: 1.5rem;\n    background-position: center;\n    background-repeat: no-repeat;\n    border: 0;\n\n    font-size: 0;\n    color: rgba(0,0,0,0);\n\n    opacity: 0.6;\n\n    ${({ theme }) => (\n        theme.isDark ? css`filter: invert(100%);` : css``\n    )}\n`;\n\nconst HelpButton = styled(Button)`\n    width: 2rem;\n    height: 2rem;\n    background-image: url(${require('./icon-help.svg')});\n`;\n\nconst SettingsButton = styled(Button)`\n    width: 2rem;\n    height: 2rem;\n    background-image: url(${require('./icon-settings.svg')});\n`;\n\nconst GameTitle = styled.div`\n    height: 1.5rem;\n    width: 100%;\n\n    background-image: url(${require('./dicematch-logo-wide.svg')});\n    background-size: contain;\n    background-position: center;\n    background-repeat: no-repeat;\n\n    font-size: 0;\n    color: rgba(0,0,0,0);\n`;\n\nconst GameHeaderBar = ({ openModal, theming }) => (\n    <GameHeaderBarContainer>\n        <HelpButton onClick={() => openModal(MODALS.HELP)}>\n            Help\n        </HelpButton>\n        <GameTitle>\n            DICE MATCH\n        </GameTitle>\n        <SettingsButton onClick={() => openModal(MODALS.SETTINGS)}>\n            Settings\n        </SettingsButton>\n    </GameHeaderBarContainer>\n);\n\nexport default GameHeaderBar;\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport DieFace from '../DieFace';\n\nconst StyledUpcomingDice = styled.div`\n    grid-area: upcoming;\n\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    .dice {\n        display: flex;\n        align-items: center;\n    }\n\n    .title {\n        margin-right: 1rem;\n\n        font-size: 0.8rem;\n        font-weight: bold;\n        color: ${({ theme }) => theme.header.textSecondary};\n    }\n`;\n\nconst MiniDie = styled.div`\n    margin-right: 1px;\n\n    svg {\n        display: block;\n    }\n`;\n\nconst More = styled.span`\n    margin-left: 0.3rem;\n    font-size: 0.8rem;\n    color: ${({ theme }) => theme.header.textSecondary};\n`;\n\nconst DICE_TO_SHOW = 5;\n\nconst UpcomingDice = ({ upcomingDice }) => {\n    const nextNiceDisplay = upcomingDice.slice(0, DICE_TO_SHOW);\n    const nextMore = upcomingDice.length - DICE_TO_SHOW;\n\n    return (\n        <StyledUpcomingDice>\n            <div className='dice'>\n                {nextNiceDisplay.slice(0, DICE_TO_SHOW).map((die, i) => (\n                    <MiniDie key={i}>\n                        <DieFace {...die} diceSize={18} />\n                    </MiniDie>\n                ))}\n\n                {nextMore > 0 && <More>+ {nextMore}</More>}\n            </div>\n        </StyledUpcomingDice>\n    );\n}\n\nexport default UpcomingDice;\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport UpcomingDice from './UpcomingDice';\n\nconst StyledLevelContainer = styled.div`\n    grid-area: level;\n    padding: 0.3rem 0.5rem 0.5rem;\n    background: ${({ theme }) => theme.header.backgroundInset};\n    border-radius: 0.5rem\n`;\n\nconst StyledLevel = styled.div`\n    display: flex;\n\n    align-items: center;\n    margin-bottom: 0.3rem;\n\n    font-size: 0.8rem;\n    font-weight: bold;\n    color: ${({ theme }) => theme.header.text};\n\n    .title {\n        margin-right: 0.5rem;\n\n        font-size: 0.8rem;\n        font-weight: bold;\n        color: ${({ theme }) => theme.header.textSecondary};\n    }\n`;\n\nconst Level = ({ level, upcomingDice }) => {\n    return (\n        <StyledLevelContainer>\n            <StyledLevel>\n                <span className=\"title\">Level</span>\n                <span className=\"score\">{level}</span>\n            </StyledLevel>\n            <UpcomingDice upcomingDice={upcomingDice} />\n        </StyledLevelContainer>\n\n    );\n};\n\nexport default Level;\n","import React from 'react';\nimport styled, { css, keyframes } from 'styled-components';\nimport times from 'lodash/fp/times';\n\nconst shake = (degree) => keyframes`\n    0% {\n        transform: translate(0px, 0px);\n    }\n    25% {\n        transform: translate(${degree}px, ${degree}px);\n    }\n    50% {\n        transform: translate(0px, 0px);\n    }\n    75% {\n        transform: translate(${-degree}px, ${-degree}px);\n    }\n`;\n\nconst StyledMoves = styled.div`\n    grid-area: moves;\n\n    display: grid;\n\n    width: auto;\n    height: 1.5rem;\n\n    grid-template-columns: repeat(10, 1fr);\n    grid-template-rows: auto;\n\n    border: 1px solid ${({ theme }) => theme.moves.border};\n    border-radius: 0.2rem;\n\n    box-shadow: 0 0 0 1px ${({ theme }) => theme.header.backgroundInset};\n\n    overflow: hidden;\n\n    ${({ moves }) => moves < 6 && css`\n        color: red;\n    `}\n\n    ${({ moves }) => moves <= 3 && css`\n        animation: ${shake(0.25)} 0.1s linear infinite;\n    `}\n\n    ${({ moves }) => moves <= 2 && css`\n        animation: ${shake(0.5)} 0.1s linear infinite;\n    `}\n\n    ${({ moves }) => moves <= 1 && css`\n        animation: ${shake(1)} 0.1s linear infinite;\n    `}\n`;\n\nconst StepBox = styled.div`\n    height: 100%;\n\n    background: ${({ ready, moves, theme }) => {\n        if (!ready) return theme.moves.used;\n        if (moves <= 1) return theme.moves.danger;\n        if (moves <= 3) return theme.moves.warning;\n        return theme.moves.ready;\n    }};\n\n    border-right: 1px solid ${({ theme }) => theme.moves.insideBorder};\n    transition: background 0.1s linear;\n\n    &:last-of-type {\n        border-right: 0;\n    }\n`;\n\nconst Moves = ({ moves: { used, limit, cap } }) => {\n    const movesLeft = limit - used;\n\n    return (\n        <StyledMoves moves={movesLeft}>\n            {times((index) => (\n                <StepBox key={index} moves={movesLeft} ready={index < movesLeft} />\n            ), cap)}\n        </StyledMoves>\n    );\n}\n\nexport default Moves;\n","import React from 'react';\nimport styled from 'styled-components';\n\n\nconst StyledScore = styled.div`\n    grid-area: score;\n\n    display: flex;\n\n    align-items: center;\n    justify-content: space-between;\n\n    padding: 0.2rem 0.5rem;\n    background: ${({ theme }) => theme.header.backgroundInset};\n    border-radius: 0.5rem;\n\n    font-size: 1.2rem;\n    color: ${({ theme }) => theme.header.text};\n\n    .title {\n        font-size: 0.8rem;\n        font-weight: bold;\n        color: ${({ theme }) => theme.header.textSecondary};\n    }\n`;\n\nconst Score = ({ score }) => (\n    <StyledScore>\n        <span className=\"title\">Score</span>\n        <span className=\"score\">{score}</span>\n    </StyledScore>\n);\n\nexport default Score;\n","import React from 'react';\nimport styled from 'styled-components';\nimport Level from './Level';\nimport Moves from './Moves';\nimport Score from './Score';\n\nconst GameStatus = styled.div`\n    display: grid;\n\n    grid-template-columns: 1fr 1fr;\n    grid-template-rows: auto auto;\n\n    column-gap: 0.5rem;\n    row-gap: 0.5rem;\n\n    padding: 0.5rem 0.5rem;\n\n    grid-template-areas:\n        \"level score\"\n        \"moves moves\";\n\n    background: ${({ theme }) => theme.backgroundSecondary};\n`;\n\nconst GameStatusBar = (props) => (\n    <GameStatus>\n        <Score {...props} />\n        <Level {...props.level} />\n\n        <Moves {...props} />\n    </GameStatus>\n);\n\nexport default GameStatusBar;\n","import React from 'react';\nimport styled from 'styled-components';\nimport drop from 'lodash/fp/drop';\nimport { Transition, TransitionGroup } from 'react-transition-group';\n\nimport { GAME_STATES } from '../constants';\n\nconst Announcements = styled.div`\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n\n    font-size: 48px;\n    pointer-events: none;\n    touch-action: none;\n    color: white;\n\n    text-shadow: 0 0 5px rgba(0,0,0,1);\n`;\n\nconst duration = 200;\n\nconst defaultStyle = {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    textAlign: 'center',\n    width: 150,\n    height: 50,\n    marginLeft: -75,\n    marginTop: -25,\n    transition: `opacity ${duration}ms ease-out, transform ${duration}ms ease-out`,\n    opacity: 0,\n    transform: 'scale(0.5)',\n}\n\nconst transitionStyles = {\n    entering: { opacity: 0, transform: 'scale(0.5)' },\n    entered: { opacity: 1, transform: 'scale(1)' },\n    exiting: { opacity: 0, transform: 'scale(2.5)' },\n};\n\nconst Fade = ({ children, ...props }) => (\n    <Transition {...props} timeout={duration}>\n        {(state) => (\n            <div style={{ ...defaultStyle, ...transitionStyles[state] }}>\n                {children}\n            </div>\n        )}\n    </Transition>\n);\n\nclass ScoreAnnouncer extends React.Component {\n    state = {\n        announcements: [],\n    };\n\n    aId = 0;\n\n    componentWillReceiveProps({ score, gameState }) {\n        if (this.props.score !== score &&\n            this.props.score < score &&\n            this.props.gameState !== GAME_STATES.FINISHED\n        ) {\n            const value = score - this.props.score;\n            this.setState((state) => ({ announcements: [...state.announcements, { id: this.aId, value }] }));\n            this.aId = this.aId + 1;\n\n            setTimeout(() => {\n                this.setState((state) => ({ announcements: drop(1, state.announcements) }));\n            }, 1000);\n        }\n    }\n\n    render() {\n        const { announcements } = this.state;\n\n        return (\n            <Announcements>\n                <TransitionGroup>\n                    {announcements.map((change, i) => (\n                        <Fade key={change.id}>\n                            + {change.value}\n                        </Fade>\n                    ))}\n                </TransitionGroup>\n            </Announcements>\n        );\n    }\n}\n\nexport default ScoreAnnouncer;\n","export default (min, max) => (value) => {\n    if (value < min) return max;\n    if (value > max) return min;\n    return value;\n}\n","\nexport default (dieSize) => Math.floor(Math.random() * dieSize) + 1;\n","import circularClamp from '../util/circularClamp';\nimport rollDie from '../util/rollDie';\n\nimport { ACTIONS, DIE_TYPES } from '../constants';\n\nconst ensureIdMatch = (subReducer) => (state, action) => (\n    state.id === action.id ?\n        subReducer(state, action) :\n        state\n);\n\nexport const updateDieUp = ensureIdMatch(({ value, ...state }, action) => ({\n    ...state,\n    value: circularClamp(1, state.dieSize)(value + 1),\n}));\n\nexport const updateDieDown = ensureIdMatch(({ value, ...state }, action) => ({\n    ...state,\n    value: circularClamp(1, state.dieSize)(value - 1),\n}));\n\nexport const updateDieRandom = ensureIdMatch(({ value, ...state }, action) => {\n    let roll = rollDie(state.dieSize);\n\n    while (roll === value) {\n        roll = rollDie(state.dieSize);\n    }\n\n    return ({ ...state, value: roll });\n});\n\nconst updateDieBomb = ({ value, ...state }, action) => ({\n    ...state,\n    value: value - 1,\n});\n\nconst valueForFlip = (value) => {\n    switch (value) {\n        case 1:\n            return 6;\n        case 2:\n            return 5;\n        case 3:\n            return 4;\n        case 4:\n            return 3;\n        case 5:\n            return 2;\n        case 6:\n        default:\n            return 1;\n    }\n};\n\nexport const updateDieFlip = ensureIdMatch(({ value, ...state }, action) => ({\n    ...state,\n    value: valueForFlip(value),\n}));\n\nconst updateDie = (state, action) => {\n    switch (state.dieType) {\n        case DIE_TYPES.UP:\n            return updateDieUp(state, action);\n        case DIE_TYPES.DOWN:\n            return updateDieDown(state, action);\n        case DIE_TYPES.RANDOM:\n            return updateDieRandom(state, action);\n        case DIE_TYPES.FLIP:\n            return updateDieFlip(state, action);\n        case DIE_TYPES.BOMB:\n            return updateDieBomb(state, action);\n        default:\n            return state;\n    }\n}\n\nconst moveDie = ensureIdMatch((state, { x, y }) => ({ ...state, x, y }));\n\nexport default (state , action) => {\n    switch (action.type) {\n        case ACTIONS.UPDATE_DIE:\n            return updateDie(state, action);\n        case ACTIONS.MOVE_DIE:\n            return moveDie(state, action);\n        default:\n            return state;\n    }\n};\n","import React, { useState } from 'react';\nimport styled, { keyframes } from 'styled-components';\nimport { clamp } from 'lodash';\n\nimport DieFace from '../DieFace';\n\nimport { DIE_TYPES } from '../../constants';\nimport { updateDieDown, updateDieFlip, updateDieRandom, updateDieUp } from '../../reducers/dieReducer';\nimport AnimatedDieFace from '../AnimatedDieFace';\n\nconst MeetDieContainer = styled.div`\n    position: relative;\n    height: 12rem;\n    overflow: hidden;\n`;\n\nconst bounceLeft = keyframes`\n    0% { transform: translate(0, 0); }\n    5% { transform: translate(-3px, 0); }\n    20% { transform: translate(0, 0); }\n    100% { transform: translate(0, 0); }\n`;\n\nconst bounceRight = keyframes`\n    0% { transform: translate(0, 0); }\n    5% { transform: translate(3px, 0); }\n    20% { transform: translate(0, 0); }\n    100% { transform: translate(0, 0); }\n`;\n\nconst NavigateButton = styled.button`\n    position: absolute;\n    display: flex;\n\n    align-items: center;\n    justify-content: center;\n\n    top: 0;\n\n    width: 3rem;\n    height: 100%;\n\n    border 0;\n\n    font-size: 1rem;\n    font-family: inherit;\n    color: ${(({ theme }) => theme.foreground)};\n\n    background: transparent;\n\n    z-index: 1;\n\n    &.left {\n        left: -1rem;\n\n        &.animate {\n            animation: ${bounceLeft} 0.7s linear infinite;\n        }\n    }\n\n    &.right {\n        right: -1rem;\n\n        &.animate {\n            animation: ${bounceRight} 0.7s linear infinite;\n        }\n    }\n\n    &:disabled {\n        opacity: 0.2;\n    }\n`;\n\nconst DieListContainer = styled.div`\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: flex;\n    height: 100%;\n\n    transition: left 0.3s ease-in-out;\n`;\n\nconst DieContainer = styled.div`\n    position: relative;\n\n    display: flex;\n    flex-direction: column;\n\n    align-items: center;\n    justify-content: center;\n\n    width: 100%;\n    height: 100%;\n\n    p {\n        position: absolute;\n        bottom: -1rem;\n        color: ${({ theme }) => theme.foregroundSecondary}\n    }\n`;\n\nconst DieButton = styled.button`\n    display: flex;\n    flex-direction: column;\n\n    align-items: flex-start;\n    justify-content: flex-start;\n\n    width: calc(64px + 2rem);\n    height: calc(64px + 2rem);\n\n    border 0;\n    padding: 1rem;\n\n    background: transparent;\n`;\n\nconst DICE_DESCRIPTIONS = [\n    {\n        id: 1,\n        dieType: DIE_TYPES.UP,\n        value: 1,\n        dieSize: 6,\n        description: 'Increases in value.',\n        updater: updateDieUp,\n    },\n    {\n        id: 2,\n        dieType: DIE_TYPES.DOWN,\n        value: 2,\n        dieSize: 6,\n        description: 'Goes down smooth.',\n        updater: updateDieDown,\n    },\n    {\n        id: 3,\n        dieType: DIE_TYPES.FLIP,\n        value: 3,\n        dieSize: 6,\n        description: 'Flip-flops. Always adds to 7.',\n        updater: updateDieFlip,\n    },\n    {\n        id: 4,\n        dieType: DIE_TYPES.RANDOM,\n        value: 4,\n        dieSize: 6,\n        description: 'Rolls kinda wild.',\n        updater: updateDieRandom,\n    },\n    {\n        id: 5,\n        dieType: DIE_TYPES.BLOCKER,\n        value: 5,\n        dieSize: 6,\n        description: 'Cant be moved. Still matches.',\n    },\n    {\n        id: 6,\n        dieType: DIE_TYPES.BOMB,\n        value: 6,\n        dieSize: 6,\n        description: 'Explosive if it reaches zero.',\n    },\n];\n\nconst MeetDice = () => {\n    const [viewIndex, setViewIndex] = useState(0);\n    const [dieDescriptions, setDieDescriptions] = useState(DICE_DESCRIPTIONS);\n\n    const atStart = viewIndex <= 0;\n    const atEnd = viewIndex >= DICE_DESCRIPTIONS.length - 1;\n\n    const navigate = (direction) => setViewIndex(\n        clamp(viewIndex + direction, 0, DICE_DESCRIPTIONS.length - 1)\n    );\n\n    const handleDieUpdate = (id) => {\n        setDieDescriptions(dieDescriptions.map((die) => {\n            if (!die.updater) return die;\n            if (id !== die.id) return die;\n\n            return die.updater(die, { id })\n        }))\n    };\n\n    console.log('dieDescriptions', dieDescriptions);\n\n    return (\n        <MeetDieContainer>\n            <NavigateButton className={`left ${atEnd ? 'animate' : ''}`} onClick={() => navigate(-1)} disabled={atStart}>\n                &lt;\n            </NavigateButton>\n            <NavigateButton className={`right ${atStart ? 'animate' : ''}`} onClick={() => navigate(1)} disabled={atEnd}>\n                &gt;\n            </NavigateButton>\n\n            <DieListContainer style={{ width: `${DICE_DESCRIPTIONS.length * 100}%`, left: `${viewIndex * -100}%` }}>\n                {dieDescriptions.map(({ id, dieType, value, description, updater }) => (\n                    <DieContainer key={id}>\n                        <DieButton onClick={() => {\n                            updater && handleDieUpdate(id);\n                        }}>\n                            <AnimatedDieFace dieType={dieType} value={value} diceSize={64}>\n                                <DieFace dieType={dieType} value={value} diceSize={64} />\n                            </AnimatedDieFace>\n                        </DieButton>\n                        <p>{description}</p>\n                    </DieContainer>\n                ))}\n            </DieListContainer>\n        </MeetDieContainer>\n    );\n};\n\nexport default MeetDice;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { DIE_TYPES } from '../../constants';\nimport DieFace from '../DieFace';\nimport Level from '../gameStatus/Level';\nimport Moves from '../gameStatus/Moves';\nimport MeetDice from './MeetDice';\n\nimport Modal from './Modal';\n\nconst FlexCenter = styled.p`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n`;\n\nconst Header = styled.div`\n    margin-left: -1rem;\n    margin-right: -1rem;\n\n    padding-bottom: 1rem;\n\n    border-bottom: 1px solid ${(({ theme }) => theme.divider)};\n\n    font-size: 1rem;\n    font-weight: bold;\n`;\n\nconst Line = styled.p`\n    font-size: 1rem;\n`;\n\nconst DieDisplay = styled.div`\n    margin-right: 2px;\n\n    svg {\n        display: block;\n    }\n`;\n\nconst LevelDisplay = styled.div`\n    border: 1px solid ${(({ theme }) => theme.divider)};\n    border-radius: 0.5rem\n`;\n\nconst HelpModal = ({ restartGame, ...props }) => {\n    return (\n        <Modal showCloseButton>\n            <Header>How to play</Header>\n\n            <Line>\n                Tap a die to change its value.\n            </Line>\n\n            <FlexCenter>\n                <DieDisplay>\n                    <DieFace dieType={DIE_TYPES.UP} value={3} diceSize={48} />\n                </DieDisplay>\n                <DieDisplay>\n                    <DieFace dieType={DIE_TYPES.UP} value={3} diceSize={48} />\n                </DieDisplay>\n                <DieDisplay>\n                    <DieFace dieType={DIE_TYPES.UP} value={3} diceSize={48} />\n                </DieDisplay>\n            </FlexCenter>\n\n            <Line>\n                Match three or more with the same value.\n            </Line>\n\n            <FlexCenter>\n                <LevelDisplay>\n                    <Level {...props.level} />\n                </LevelDisplay>\n            </FlexCenter>\n\n            <Line>\n                Clear all the dice from the level...\n            </Line>\n\n            <Moves moves={{ used: 3, limit: 10, cap: 10 }} />\n\n            <Line>\n                ...before you run out of turns.<br />Turns refill at the end of each level.\n            </Line>\n\n            <Header>\n                Meet the dice\n            </Header>\n\n            <MeetDice />\n        </Modal>\n    );\n}\n\nexport default HelpModal;\n","import { DICE_THEME } from '.';\n\nexport const colors = {\n    white: '#ffffff',\n    black: '#000000',\n    charcoal: '#282B40',\n    charcoal_200: '#191D23',\n    charcoal_100: '#111717',\n    grey_100: '#111111',\n    grey_200: '#222222',\n    grey_300: '#444444',\n    grey_400: '#666666',\n    grey_500: '#757784',\n    grey_700: '#9A9DAD',\n    grey_900: '#C5C9D8',\n    grey_1000: '#E6E8EF',\n    grey_1100: '#f8f8f8',\n    red: '#FC4349',\n    teal: '#3C989B',\n    green: '#14DD89',\n    yellow: '#FFAC00',\n    yellow_700: '#FFD000',\n    yellow_900: '#FFEF00',\n    beige: '#CEC8B6',\n};\n\nexport const DICE_THEME_STANDARD = {\n    pip: colors.charcoal,\n    up: colors.red,\n    down: colors.teal,\n    flip: colors.beige,\n    random: colors.yellow,\n    blocker: colors.grey_500,\n    blockerPip: colors.pip,\n    bomb: colors.grey_500,\n    bombPip: colors.yellow,\n};\n\nexport const DICE_THEME_HIGH_CONTRAST = {\n    pip: colors.black,\n    up: colors.red,\n    down: '#1E88E5',\n    flip: colors.beige,\n    random: colors.yellow_700,\n    blocker: colors.grey_500,\n    blockerPip: colors.black,\n    bomb: colors.grey_300,\n    bombPip: colors.yellow_700,\n};\n\n\nexport const DICE_THEME_SUBDUED = {\n    pip: colors.charcoal,\n    up: '#FFAAAA',\n    down: '#6acdc7',\n    flip: '#CEC8B6',\n    random: '#FFEB7F',\n    blocker: '#8F8F8F',\n    blockerPip: colors.charcoal,\n    bomb: '#8F8F8F',\n    bombPip: colors.yellow_700,\n};\n\nexport const DICE_THEME_TROPICAL = {\n    pip: colors.charcoal,\n    up: '#ff8150',\n    down: '#4ec9ff',\n    flip: '#fff09f',\n    random: '#ffdc1e',\n    blocker: '#85b7bb',\n    blockerPip: colors.charcoal,\n    bomb: '#85b7bb',\n    bombPip: '#ffdc1e',\n};\n\nexport const DICE_THEME_GLOW = {\n    pip: colors.charcoal,\n    up: 'radial-gradient(#ffcad9 20%, #ff4f69)',\n    down: 'radial-gradient(#cdfcff 20%, #6ab79d)',\n    flip: 'linear-gradient(-45deg, #8f8f8f, #ffffff, #8f8f8f)',\n    random: 'radial-gradient(#fff 20%, #ffdc1e)',\n    blocker: 'radial-gradient(#9e9e9e 20%, #757784)',\n    blockerPip: colors.charcoal,\n    bomb: 'radial-gradient(#c16d84, #757784 90%)',\n    bombPip: colors.yellow_700,\n};\n\nexport const getDiceTheme = (themeId) => {\n    switch (themeId) {\n        case DICE_THEME.highContrast:\n            return DICE_THEME_HIGH_CONTRAST;\n        case DICE_THEME.subdued:\n            return DICE_THEME_SUBDUED;\n        case DICE_THEME.tropical:\n            return DICE_THEME_TROPICAL;\n        case DICE_THEME.glow:\n            return DICE_THEME_GLOW;\n        case DICE_THEME.standard:\n        default:\n            return DICE_THEME_STANDARD;\n    }\n}\n\nexport const THEME_LIGHT = {\n    colors,\n\n    isDark: false,\n\n    foreground: colors.charcoal,\n    foregroundSecondary: colors.grey_500,\n\n    background: colors.white,\n    backgroundSecondary: colors.grey_1000,\n    divider: colors.grey_900,\n\n    highlight: colors.teal,\n\n    modal: {\n        background: colors.white,\n    },\n\n    header: {\n        background: colors.grey_1000,\n        backgroundInset: colors.white,\n        text: colors.charcoal,\n        textSecondary: colors.grey_500,\n    },\n\n    moves: {\n        border: colors.grey_700,\n        insideBorder: 'rgba(0,0,0,0.2)',\n        used: colors.grey_500,\n        ready: colors.green,\n        warning: colors.yellow,\n        danger: colors.red,\n    },\n\n    scores: {\n        buttonBackground: colors.backgroundSecondary,\n        buttonColor: colors.charcoal,\n        currentScoreBackground: colors.yellow_900,\n        textSecondary: 'rgba(0,0,0,0.5)',\n    },\n\n    dice: DICE_THEME_STANDARD,\n};\n\nexport const THEME_DARK = {\n    ...THEME_LIGHT,\n\n    isDark: true,\n\n    foreground: colors.white,\n    foregroundSecondary: colors.grey_700,\n\n    background: colors.grey_100,\n    backgroundSecondary: colors.grey_200,\n    divider: colors.grey_400,\n\n    highlight: colors.teal,\n\n    modal: {\n        background: colors.grey_300,\n    },\n\n    header: {\n        ...THEME_LIGHT.header,\n        background: colors.grey_1000,\n        backgroundInset: colors.grey_100,\n        text: colors.white,\n        textSecondary: colors.grey_700,\n    },\n\n    moves: {\n        ...THEME_LIGHT.moves,\n        border: colors.grey_400,\n        insideBorder: 'rgba(0,0,0,0.2)',\n        used: colors.grey_200,\n        ready: colors.teal,\n        warning: colors.yellow,\n        danger: colors.red,\n    },\n\n    scores: {\n        ...THEME_LIGHT.scores,\n        buttonBackground: colors.grey_200,\n        buttonColor: colors.white,\n        currentScoreBackground: colors.teal,\n        textSecondary: 'rgba(255,255,255,0.5)',\n    },\n};\n","import React from 'react';\nimport styled, { css, ThemeProvider } from 'styled-components';\nimport { connect } from 'react-redux';\nimport { max, rest } from 'lodash';\n\nimport { getDiceTheme } from '../../constants/themes';\nimport useLocalStorage from '../../util/useLocalStorage';\n\nimport Modal from './Modal';\nimport DieFace from '../DieFace';\n\nimport { ACTIONS, DICE_THEME, DIE_TYPES, INTERFACE_THEME } from '../../constants';\n\nconst Header = styled.div`\n    margin-left: -1rem;\n    margin-right: -1rem;\n\n    padding-bottom: 1rem;\n\n    border-bottom: 1px solid ${(({ theme }) => theme.divider)};\n\n    font-size: 1rem;\n    font-weight: bold;\n`;\n\nconst SettingsRow = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    margin-left: -1rem;\n    margin-right: -1rem;\n\n    padding: 1rem;\n\n    text-align: left;\n    border-bottom: 1px solid ${(({ theme }) => theme.divider)};\n\n    a {\n        color: ${(({ theme }) => theme.highlight)};\n    }\n\n    &.block {\n        border-bottom: 0;\n    }\n`;\n\nconst RestartButton = styled.button`\n    padding: 0.4rem 1rem;\n    border: 0;\n    border-radius: 0.5rem;\n\n    background: ${(({ theme }) => theme.scores.buttonBackground)};\n    color: ${(({ theme }) => theme.scores.buttonColor)};\n\n    font-size: 1rem;\n    outline: none;\n\n    font-weight: bold;\n`;\n\nconst DieSettingsButton = styled.button`\n    display: flex;\n\n    border: 0;\n    align-items: center;\n    justify-content: space-between;\n\n    margin-left: -1rem;\n    margin-right: -1rem;\n\n    padding: 0.5rem 1rem;\n    width: calc(100% + 2rem);\n\n    font-size: 0.9rem;\n    text-align: left;\n\n    color: ${(({ theme }) => theme.foreground)};\n\n    background: ${({ active, theme }) => active ? theme.backgroundSecondary : 'transparent'};\n\n    .name {\n        padding-right: 0.5rem;\n        color: ${(({ theme }) => theme.foreground)};\n    }\n\n    .dice {\n        display: flex;\n    }\n`;\n\nconst DieDisplay = styled.div`\n    margin-right: 0.5rem;\n\n    > svg {\n        display: block;\n\n        circle {\n            animation: none;\n        }\n\n        box-shadow: 0 0 0 1px ${({ theme }) => theme.backgroundSecondary};\n    }\n`;\n\nconst DieSettingsSpacer = styled.div`\n    margin-left: -1rem;\n    margin-right: -1rem;\n\n    padding-bottom: 0.5rem;\n\n    border-bottom: 1px solid ${(({ theme }) => theme.divider)};\n`;\n\nconst DieThemeLocked = styled.div`\n    display: flex;\n\n    align-items: center;\n    justify-content: space-between;\n\n    margin-left: -1rem;\n    margin-right: -1rem;\n\n    padding: 0.5rem 1rem;\n\n    width: calc(100% + 2rem);\n\n    .lock {\n        width: 2rem;\n        height: 2rem;\n        background-image: url(${require('./icon-lock.svg')});\n\n        background-color: transparent;\n        background-size: 1.5rem;\n        background-position: center;\n        background-repeat: no-repeat;\n\n        opacity: 0.6;\n\n        ${({ theme }) => (\n            theme.isDark ? css`filter: invert(100%);` : css``\n        )}\n    }\n\n    .message {\n        display: flex;\n\n        align-items: center;\n        justify-content: space-between;\n\n        width: 240px;\n        height: 32px;\n\n        color: ${(({ theme }) => theme.foregroundSecondary)};\n    }\n`;\n\nconst DIE_SIZE = 32;\n\nconst DieThemeSettingsRow = ({\n    name,\n    className,\n    themeId,\n    activeTheme,\n    lockUntilLevel,\n    setDiceTheme,\n}) => {\n    const [scores] = useLocalStorage('dicematch.scores', []);\n    const maxLevel = max(scores.map(({ level }) => level)) || 0;\n\n    if (lockUntilLevel && lockUntilLevel > maxLevel) {\n        return (\n            <DieThemeLocked>\n                <div className=\"lock\"/>\n                <div className=\"message\">Reach level {lockUntilLevel} to unlock</div>\n            </DieThemeLocked>\n        )\n    }\n\n    const diceTheme = getDiceTheme(themeId);\n\n    return (\n        <ThemeProvider theme={{ dice: diceTheme }}>\n            <DieSettingsButton className={className} active={themeId === activeTheme} onClick={() => setDiceTheme(themeId)}>\n                <div className=\"name\">{name}</div>\n                <div className=\"dice\">\n                    <DieDisplay>\n                        <DieFace dieType={DIE_TYPES.UP} value={1} diceSize={DIE_SIZE} />\n                    </DieDisplay>\n                    <DieDisplay>\n                        <DieFace dieType={DIE_TYPES.DOWN} value={2} diceSize={DIE_SIZE} />\n                    </DieDisplay>\n                    <DieDisplay>\n                        <DieFace dieType={DIE_TYPES.FLIP} value={3} diceSize={DIE_SIZE} />\n                    </DieDisplay>\n                    <DieDisplay>\n                        <DieFace dieType={DIE_TYPES.RANDOM} value={4} diceSize={DIE_SIZE} />\n                    </DieDisplay>\n                    <DieDisplay>\n                        <DieFace dieType={DIE_TYPES.BLOCKER} value={5} diceSize={DIE_SIZE} />\n                    </DieDisplay>\n                    <DieDisplay>\n                        <DieFace dieType={DIE_TYPES.BOMB} value={6} diceSize={DIE_SIZE} />\n                    </DieDisplay>\n                </div>\n            </DieSettingsButton>\n        </ThemeProvider>\n    );\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n    toggleInterfaceTheme: (currentInterface) => (\n        dispatch({\n            type: ACTIONS.SET_INTERFACE_THEME,\n            interface: currentInterface === INTERFACE_THEME.dark ?\n                INTERFACE_THEME.light :\n                INTERFACE_THEME.dark,\n        })\n    ),\n    setDiceTheme: (theme) => (\n        dispatch({\n            type: ACTIONS.SET_DICE_THEME,\n            dice: theme,\n        })\n    ),\n    closeModal: () => dispatch({ type: ACTIONS.CLOSE_MODAL }),\n})\n\nconst SettingsModal = ({\n    restartGame,\n    closeModal,\n    toggleInterfaceTheme,\n    setDiceTheme,\n    theming = {},\n}) => {\n    const diceTheme = theming.dice || DICE_THEME.standard;\n\n    return (\n        <Modal showCloseButton>\n            <Header>Settings</Header>\n            <SettingsRow>\n                <strong>Dark theme</strong>\n                <input type=\"checkbox\"\n                    onChange={() => toggleInterfaceTheme(theming.interface)}\n                    checked={theming.interface === INTERFACE_THEME.dark} />\n            </SettingsRow>\n            <SettingsRow className=\"block\">\n                <strong>Dice theme</strong>\n            </SettingsRow>\n            <DieThemeSettingsRow name=\"Standard\"\n                    themeId={DICE_THEME.standard}\n                    activeTheme={diceTheme}\n                    setDiceTheme={setDiceTheme} />\n            <DieThemeSettingsRow name=\"High contrast\"\n                    themeId={DICE_THEME.highContrast}\n                    activeTheme={diceTheme}\n                    setDiceTheme={setDiceTheme} />\n            <DieThemeSettingsRow name=\"Subdued\"\n                    lockUntilLevel={10}\n                    themeId={DICE_THEME.subdued}\n                    activeTheme={diceTheme}\n                    setDiceTheme={setDiceTheme} />\n            <DieThemeSettingsRow name=\"Tropical\"\n                    lockUntilLevel={15}\n                    themeId={DICE_THEME.tropical}\n                    activeTheme={diceTheme}\n                    setDiceTheme={setDiceTheme} />\n            <DieThemeSettingsRow name=\"Glow\"\n                    lockUntilLevel={20}\n                    themeId={DICE_THEME.glow}\n                    activeTheme={diceTheme}\n                    setDiceTheme={setDiceTheme} />\n            <DieSettingsSpacer />\n            <SettingsRow>\n                Abandon current game\n                <RestartButton onClick={() => {\n                    restartGame();\n                    closeModal();\n                }}>\n                    Restart\n                </RestartButton>\n            </SettingsRow>\n            <SettingsRow>\n                Feedback\n                <a href=\"https://twitter.com/isaacwilliams\">@isaacwilliams</a>\n            </SettingsRow>\n        </Modal>\n    );\n};\n\nexport default connect(null, mapDispatchToProps)(SettingsModal);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport styled, { ThemeProvider, createGlobalStyle } from 'styled-components';\nimport clamp from 'lodash/fp/clamp';\nimport { Helmet } from 'react-helmet';\n\nimport GameBoard from './components/GameBoard';\nimport GameOverModal from './components/modal/GameOverModal';\nimport GameHeaderBar from './components/header/GameHeaderBar';\nimport GameStatusBar from './components/gameStatus/GameStatusBar';\nimport ScoreAnnouncer from './components/ScoreAnnouncer';\nimport HelpModal from './components/modal/HelpModal';\nimport SettingsModal from './components/modal/SettingsModal';\n\nimport { THEME_LIGHT, THEME_DARK, getDiceTheme } from './constants/themes';\n\nimport { GAME_STATES, ACTIONS, BOARD_WIDTH, MODALS } from './constants';\n\n\nconst clampDieSize = clamp(30, 80);\n\nconst AppContainer = styled.div`\n    display: grid;\n\n    grid-template-columns: auto;\n    grid-template-rows: auto auto 1fr;\n\n    justify-content: center;\n\n    height: 90vh;\n    width: 100vw;\n\n    background: ${props => props.theme.background};\n`;\n\nconst GameContainer = styled.div`\n    display: flex;\n    align-self: end;\n    justify-content: center;\n    padding: 1rem 0;\n    background: ${props => props.theme.background};\n`;\n\nconst GlobalStyle = createGlobalStyle`\n    body {\n        background: ${props => props.theme.background};\n    }\n`;\n\nconst mapStateToProps = (state) => state;\n\nconst mapDispatchToProps = (dispatch) => ({\n    updateDie: (id) => dispatch({ type: ACTIONS.UPDATE_DIE, id }),\n    restartGame: () => dispatch({ type: ACTIONS.GAME_RESET }),\n    openModal: (modal) => dispatch({ type: ACTIONS.OPEN_MODAL, modal }),\n    closeModal: () => dispatch({ type: ACTIONS.CLOSE_MODAL }),\n});\n\nclass App extends Component {\n    state = { diceSize: 0 };\n\n    componentWillMount() {\n        this.getDiceSize();\n\n        window.addEventListener('resize', this.getDiceSize);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.getDiceSize);\n    }\n\n    getDiceSize = () => this.setState(() => ({ diceSize: clampDieSize((window.innerWidth - 20) / BOARD_WIDTH) }));\n\n    render() {\n        const {\n            gameState,\n            modal,\n            theming = {},\n        } = this.props;\n\n        const {\n            diceSize,\n        } = this.state;\n\n        const theme = theming.interface === 'dark' ? THEME_DARK : THEME_LIGHT;\n        const diceTheme = getDiceTheme(theming.dice);\n\n        return (\n            <ThemeProvider theme={{ ...theme, dice: diceTheme }}>\n                <GlobalStyle />\n                <Helmet>\n                    <meta name=\"theme-color\" content={theme.backgroundSecondary} />\n                </Helmet>\n                <AppContainer>\n                    <GameHeaderBar {...this.props} />\n                    <GameStatusBar {...this.props} />\n                    <GameContainer>\n                        <GameBoard {...this.props} diceSize={diceSize} />\n                        <ScoreAnnouncer {...this.props} />\n                    </GameContainer>\n\n                    {gameState === GAME_STATES.FINISHED && (\n                        <GameOverModal {...this.props} />\n                    )}\n\n                    {modal === MODALS.HELP && (\n                        <HelpModal {...this.props} />\n                    )}\n\n                    {modal === MODALS.SETTINGS && (\n                        <SettingsModal {...this.props} />\n                    )}\n                </AppContainer>\n            </ThemeProvider>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import { nanoid } from 'nanoid';\nimport rollDie from '../util/rollDie';\n\nimport { DIE_TYPES } from '../constants';\n\nconst initialValueFor = (dieType, dieSize = 6) => {\n    switch (dieType) {\n        case DIE_TYPES.BOMB:\n            return dieSize;\n        default:\n            return rollDie(dieSize);\n    }\n}\n\nconst createDieState = (dieType, dieSize = 6) => ({\n    id: nanoid(8),\n    dieType,\n    dieSize,\n    value: initialValueFor(dieType, dieSize),\n});\n\nexport default createDieState;\n","\nconst getDieFromBoard = (board) => (x, y) => board.find((die) => (\n    die &&\n    die.x === x &&\n    die.y === y\n))\n\nexport default getDieFromBoard;\n","import getDieFromBoard from './getDieFromBoard';\nimport intersectionBy from 'lodash/fp/intersectionBy';\nimport uniqBy from  'lodash/fp/uniqBy';\nimport reverse from  'lodash/fp/reverse';\n\nimport { BOARD_WIDTH, BOARD_HEIGHT, MIN_MATCH_LENGTH } from '../constants';\n\nconst checkDiceMatch = (die, nextDie) => (\n    die &&\n    nextDie &&\n    die.value === nextDie.value\n);\n\nconst findMatchesHorizontal = (board) => {\n    const getDie = getDieFromBoard(board);\n    const matchGroups = [];\n\n    for (let y = 0; y < BOARD_HEIGHT; y++) {\n        let currGroup = [];\n\n        for (let x = 0; x < BOARD_WIDTH; x++) {\n            const die = getDie(x, y);\n            const nextDie = getDie(x + 1, y);\n\n            currGroup.push(die);\n\n            const hasMatch = checkDiceMatch(die, nextDie);\n\n            if (!hasMatch && currGroup.length >= MIN_MATCH_LENGTH) {\n                matchGroups.push(currGroup);\n            }\n\n            if (!hasMatch) currGroup = [];\n        }\n    }\n\n    return matchGroups;\n};\n\nconst findMatchesVertical = (board) => {\n    const getDie = getDieFromBoard(board);\n    const matchGroups = [];\n\n    for (let x = 0; x < BOARD_WIDTH; x++) {\n        let currGroup = [];\n\n        for (let y = 0; y < BOARD_HEIGHT; y++) {\n            const die = getDie(x, y);\n            const nextDie = getDie(x, y + 1);\n\n            currGroup.push(die);\n\n            const hasMatch = checkDiceMatch(die, nextDie);\n\n            if (!hasMatch && currGroup.length >= MIN_MATCH_LENGTH) {\n                matchGroups.push(reverse(currGroup));\n            }\n\n            if (!hasMatch) currGroup = [];\n        }\n    }\n\n    return matchGroups;\n};\n\nconst getId = (die) => die.id;\nconst intersectionById = intersectionBy(getId);\nconst uniqById = uniqBy(getId);\n\nconst findMatches = (state) => {\n    let horzontalMatches = findMatchesHorizontal(state);\n    let verticalMatches = findMatchesVertical(state);\n\n    // find matches that are both in the horizontal & vertical axis & combine into single group for more points\n    horzontalMatches = horzontalMatches.map((hGroup) => {\n        const intersectingGroup = verticalMatches.find((vGroup) => intersectionById([\n            vGroup,\n            hGroup,\n        ]));\n\n        if (!intersectingGroup) return hGroup;\n\n        verticalMatches = verticalMatches.filter((vGroup) => vGroup !== intersectingGroup);\n        return uniqById([...hGroup, ...intersectingGroup]);\n    });\n\n    return [\n        ...horzontalMatches,\n        ...verticalMatches,\n    ];\n}\n\nexport default findMatches;\n","import times from 'lodash/fp/times';\n\nimport dieReducer from './dieReducer';\nimport createDieState from './createDieState';\nimport findBoardMatches from '../util/findBoardMatches';\nimport getDieFromBoard from '../util/getDieFromBoard';\n\nimport { ACTIONS, DIE_TYPES, BOARD_WIDTH, BOARD_HEIGHT } from '../constants';\n\nconst createGameBoard = () => (\n    times(() => createDieState(DIE_TYPES.UP), BOARD_WIDTH * BOARD_HEIGHT)\n    .map((die, i) => {\n        const x = i % BOARD_WIDTH;\n        const y = Math.floor(i / BOARD_WIDTH);\n\n        return { ...die, x, y };\n    })\n);\n\nconst getInitalState = () => {\n    let gameBoard;\n\n    while (!gameBoard || findBoardMatches(gameBoard).length) {\n        gameBoard = createGameBoard();\n    }\n\n    return gameBoard;\n};\n\nconst deferToDice = (state, action) => state.map((dieState) => dieReducer(dieState, action));\n\nconst removeDie = (state, action) => state.filter((dieState) => dieState.id !== action.id);\n\nconst addDie = (state, { die }) => ([ ...state, die ]);\n\nconst getDieToShift = (state) => {\n    const getDie = getDieFromBoard(state);\n\n    return state.find(({ x, y, id }) => y < BOARD_HEIGHT - 1 && !getDie(x, y + 1));\n}\n\nconst cascadeDice = (state, action) => {\n    let updatedState = state;\n    let dieToShift = getDieToShift(updatedState);\n\n    while (dieToShift) {\n        updatedState = deferToDice(updatedState, {\n            type: ACTIONS.MOVE_DIE,\n            id: dieToShift.id,\n            x: dieToShift.x,\n            y: dieToShift.y + 1,\n        });\n\n        dieToShift = getDieToShift(updatedState)\n    }\n\n    return updatedState;\n};\n\nexport default (state = getInitalState(), action) => {\n    switch (action.type) {\n        case ACTIONS.UPDATE_DIE:\n            return deferToDice(state, action);\n        case ACTIONS.REMOVE_DIE:\n            return removeDie(state, action);\n        case ACTIONS.ADD_DIE:\n            return addDie(state, action);\n        case ACTIONS.CASCADE_DICE:\n            return cascadeDice(state, action);\n        case ACTIONS.GAME_RESET:\n            return getInitalState();\n        default:\n            return state;\n    }\n};\n","import { ACTIONS } from '../constants';\n\nconst initialState = { used: 0, limit: 10, cap: 10 };\n\nexport default (state = initialState, action) => {\n    switch (action.type) {\n        case ACTIONS.UPDATE_DIE:\n            return { ...state, used: state.used + 1 };\n        case ACTIONS.ADD_MOVES:\n            return { ...state, limit: Math.min(state.limit + action.moves, state.used + state.cap) };\n        case ACTIONS.GAME_RESET:\n            return initialState;\n        default:\n            return state;\n    }\n}\n","import times from 'lodash/fp/times';\nimport shuffle from 'lodash/fp/shuffle';\nimport clamp from 'lodash/fp/clamp';\n\nimport createDieState from './createDieState';\n\nimport { ACTIONS, DIE_TYPES } from '../constants';\n\nconst clampVal = clamp(0, Infinity);\nconst floor = value => Math.floor(value);\nconst round = value => Math.round(value);\nconst log = (value) => Math.log10(value);\n\nconst getCountUp = (level) => 10;\nconst getCountDown = (level) => clampVal(round(log(level) * 5));\nconst getCountFlip = (level) => clampVal(round(log(level) * 4) - 2);\nconst getCountRandom = (level) => floor(clampVal(round(log(level) * 4) - 2.5));\nconst getCountBlocker = (level) => clampVal(round(log(level) * 2.5) - 2);\nconst getCountBomb = (level) => {\n    if (level >= 15) return level % 5 === 0 ? 1 : 0;\n    return 0;\n};\n\nconst checkForRuns = (levelDice = []) => {\n    for (var i = 0; i < levelDice.length; i++) {\n        const value = levelDice[i].value;\n\n        if (\n            levelDice[i + 1] && levelDice[i + 1].value === value &&\n            levelDice[i + 2] && levelDice[i + 2].value === value\n        ) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nconst getLevelDice = (level) => {\n    let levelDice;\n    let attempts = 0;\n\n    do {\n        levelDice = shuffle([\n            ...times(() => createDieState(DIE_TYPES.UP), getCountUp(level)),\n            ...times(() => createDieState(DIE_TYPES.DOWN), getCountDown(level)),\n            ...times(() => createDieState(DIE_TYPES.RANDOM), getCountRandom(level)),\n            ...times(() => createDieState(DIE_TYPES.BLOCKER), getCountBlocker(level)),\n            ...times(() => createDieState(DIE_TYPES.FLIP), getCountFlip(level)),\n            ...times(() => createDieState(DIE_TYPES.BOMB), getCountBomb(level)),\n        ]);\n\n        attempts++;\n    } while (attempts < 5 && checkForRuns(levelDice));\n\n    return levelDice;\n};\n\nconst getInitalState = () => ({\n    level: 1,\n    clearedDice: 0,\n    upcomingDice: getLevelDice(1),\n});\n\nconst addDie = (state, action) => {\n    let level = state.level;\n    let upcomingDice = state.upcomingDice.slice(1);\n\n    if (upcomingDice.length === 0) {\n        level = level + 1;\n        upcomingDice = getLevelDice(level);\n    }\n\n    return {\n        ...state,\n        level,\n        upcomingDice,\n    }\n}\n\nexport default (state = getInitalState(), action) => {\n    switch (action.type) {\n        case ACTIONS.ADD_DIE:\n            return addDie(state, action);\n        case ACTIONS.REMOVE_DIE:\n            return { ...state, clearedDice: state.clearedDice + 1 };\n        case ACTIONS.SET_LEVEL:\n            return { ...state, level: action.level, upcomingDice: getLevelDice(action.level) };\n        case ACTIONS.GAME_RESET:\n            return getInitalState();\n        default:\n            return state;\n    }\n}\n","import { GAME_STATES, ACTIONS } from '../constants';\n\nconst initialState = GAME_STATES.ACTIVE;\n\nexport default (state = initialState, action) => {\n    switch (action.type) {\n        case ACTIONS.GAME_END:\n            return GAME_STATES.FINISHED;\n        case ACTIONS.GAME_RESET:\n            return initialState;\n        default:\n            return state;\n    }\n}\n","import { nanoid } from 'nanoid';\nimport { ACTIONS } from '../constants';\n\nconst initialState = {\n    gameId: nanoid(),\n    gameStart: new Date(),\n    gameEnd: null,\n};\n\nexport default (state = initialState, action) => {\n    switch (action.type) {\n        case ACTIONS.GAME_END:\n            return {\n                ...state,\n                gameEnd: new Date(),\n            };\n        case ACTIONS.GAME_RESET:\n            return {\n                gameId: nanoid(),\n                gameStart: new Date(),\n                gameEnd: null,\n            };\n        default:\n            return state;\n    }\n}\n","import { ACTIONS, DICE_THEME, INTERFACE_THEME } from '../constants';\n\nconst darkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;\nconst initialState = {\n    interface: darkMode ? INTERFACE_THEME.dark : darkMode,\n    dice: DICE_THEME.standard,\n};\n\nexport default (state = initialState, action) => {\n    switch (action.type) {\n        case ACTIONS.SET_INTERFACE_THEME:\n            return { ...state, interface: action.interface };\n        case ACTIONS.SET_DICE_THEME:\n            return { ...state, dice: action.dice };\n        default:\n            return state;\n    }\n};\n","import { combineReducers } from 'redux';\n\nimport gameBoard from './gameBoardReducer';\nimport score from './scoreReducer';\nimport inputEnabled from './inputEnabledReducer';\nimport moves from './movesReducer';\nimport level from './levelReducer';\nimport gameState from './gameStateReducer';\nimport tracking from './trackingReducer';\nimport modal from './modalReducer';\nimport theming from './themeReducer';\n\nexport default combineReducers({\n    gameBoard,\n    score,\n    inputEnabled,\n    moves,\n    level,\n    gameState,\n    tracking,\n    theming,\n    modal,\n});\n","import { ACTIONS } from '../constants';\n\nconst initialState = 0;\n\nexport default (state = initialState, action) => {\n    switch (action.type) {\n        case ACTIONS.ADD_SCORE:\n            return state + action.score * action.multiplier;\n        case ACTIONS.GAME_RESET:\n            return initialState;\n        default:\n            return state;\n    }\n}\n","import { ACTIONS } from '../constants';\n\nconst initialState = true;\n\nexport default (state = initialState, action) => {\n    switch (action.type) {\n        case ACTIONS.INPUT_DISABLE:\n            return false;\n        case ACTIONS.INPUT_ENABLE:\n            return true;\n        case ACTIONS.GAME_RESET:\n            return initialState;\n        default:\n            return state;\n    }\n}\n","import { ACTIONS } from '../constants';\n\nconst initialState = null;\n\nexport default (state = initialState, action) => {\n    switch (action.type) {\n        case ACTIONS.OPEN_MODAL:\n            return action.modal;\n        case ACTIONS.CLOSE_MODAL:\n            return null;\n        default:\n            return state;\n    }\n}\n","import { put, select, takeEvery, all } from 'redux-saga/effects'\n\nimport first from 'lodash/fp/first';\nimport includes from 'lodash/fp/includes';\n\nimport findBoardMatches from '../util/findBoardMatches';\nimport getDieFromBoard from '../util/getDieFromBoard';\n\nimport { ACTIONS, BOARD_HEIGHT, DIE_TYPES } from '../constants';\n\nconst delay = (duration) => new Promise(resolve => setTimeout(resolve, duration));\n\nconst getId = (die) => die.id;\n\nconst getMatchScore = (matchLength) => {\n    switch (matchLength) {\n        case 3:\n            return 0;\n        case 4:\n            return 100;\n        case 5:\n            return 300;\n        case 6:\n            return 500;\n        default:\n            return Math.max((matchLength - 6) * 300, 0) + 500;\n    }\n};\n\nconst getScoreValueBonus = (matchLength, matchValue) => {\n    const valueMulitplier = matchLength <= 3 ? 10 : 20;\n\n    return matchValue * valueMulitplier;\n};\n\nfunction *addDie(removedDie) {\n    const state = yield select();\n\n    const nextDie = state.level.upcomingDice[0];\n    const x = removedDie.x;\n    const y = -BOARD_HEIGHT;\n\n    yield put({ type: ACTIONS.ADD_DIE, die: { ...nextDie, x, y } });\n\n    yield delay(100);\n\n    yield put({ type: ACTIONS.CASCADE_DICE });\n};\n\nfunction *handleMatchGroup(matchGroup, scoreMultipler) {\n    const state = yield select();\n\n    const gameBoardIds = state.gameBoard.map(getId);\n    const diceToRemove = matchGroup.filter(die => includes(getId(die), gameBoardIds));\n\n    yield all(diceToRemove.map((die) => put({ type: ACTIONS.REMOVE_DIE, id: die.id })));\n\n    yield delay(250);\n\n    yield put({ type: ACTIONS.CASCADE_DICE });\n\n    const score = (getMatchScore(diceToRemove.length) + getScoreValueBonus(diceToRemove.length, first(diceToRemove).value));\n\n    yield put({\n        type: ACTIONS.ADD_SCORE,\n        score: score,\n        multiplier: scoreMultipler\n    });\n\n    yield delay(250);\n\n    for (let die of diceToRemove) {\n        yield addDie(die);\n    }\n\n    yield delay(100);\n};\n\nfunction *removeMatches(matches, scoreMultipler = 1) {\n    yield delay(100);\n\n    if (!matches.length) return;\n\n    const state = yield select();\n\n    for (let matchGroup of matches) {\n        yield handleMatchGroup(matchGroup, scoreMultipler);\n        yield delay(250);\n    }\n\n    const updatedState = yield select();\n    const nextMatches = findBoardMatches(updatedState.gameBoard);\n\n    if (state.level.level !== updatedState.level.level) {\n        yield put({ type: ACTIONS.ADD_MOVES, moves: 10 });\n    }\n\n    yield delay(300);\n\n    if (nextMatches.length) {\n        return yield removeMatches(nextMatches, scoreMultipler + 1);\n    }\n}\n\nconst BOMB_MATRIX = [\n    [0, 0], // bomb itself is first so that the score value bonus == 0\n    [-1, -1], [0, -1], [1, -1],\n    [-1, 0],        [1, 0],\n    [-1, 1], [0, 1], [1, 1]\n];\n\nconst findDiceToExplode = (gameBoard) => {\n    const getDieAt = getDieFromBoard(gameBoard);\n\n    const diceToExplode = gameBoard\n        .filter((die) => die.dieType === DIE_TYPES.BOMB && die.value <= 0)\n        .map(die => (\n            BOMB_MATRIX\n                .map(([offsetX, offsetY]) => getDieAt(die.x + offsetX, die.y + offsetY))\n                .filter(die => !!die)\n        ));\n\n    return diceToExplode;\n}\n\nfunction *onUpdateDie() {\n    yield put({ type: ACTIONS.INPUT_DISABLE });\n\n    const state = yield select();\n    const matches = findBoardMatches(state.gameBoard);\n\n    if (matches.length) {\n        yield delay(250);\n        yield removeMatches(matches, 1);\n    }\n\n    const postMatchState = yield select();\n    const diceToExplode = findDiceToExplode(postMatchState.gameBoard);\n    if (diceToExplode.length) {\n        yield delay(250);\n        yield removeMatches(diceToExplode, 1);\n    }\n\n    yield put({ type: ACTIONS.INPUT_ENABLE });\n\n    const finalState = yield select();\n    if (finalState.moves.limit - finalState.moves.used <= 0) {\n        yield delay(800);\n        return yield put({ type: ACTIONS.GAME_END });\n    }\n}\n\nfunction* matchSaga() {\n    yield takeEvery(ACTIONS.UPDATE_DIE, onUpdateDie);\n}\n\nexport default matchSaga;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n// import registerServiceWorker from './registerServiceWorker';\nimport configureStore from './store/configureStore';\nimport { Provider } from 'react-redux'\n\nconst store = configureStore();\n\nReactDOM.render((\n    <Provider store={store}>\n        <App store={store} />\n    </Provider>\n), document.getElementById('root'));\n","import { createStore, applyMiddleware } from 'redux';\nimport { createLogger } from 'redux-logger';\n\nimport createSagaMiddleware from 'redux-saga';\nimport { save, load } from 'redux-localstorage-simple';\n\nimport rootReducer from '../reducers/rootReducer';\n\nimport sagas from './matchSagas';\n\nexport default () => {\n    const sagaMiddleware = createSagaMiddleware();\n\n    const createStoreWithMiddleware = applyMiddleware(\n        createLogger({\n            collapsed: true,\n            duration: true,\n            predicate: () => process.env.NODE_ENV === 'development',\n        }),\n        save({\n            namespace: 'dicematch.state',\n            ignoreStates: [\n                'inputEnabled',\n            ],\n        }),\n        sagaMiddleware,\n    )(createStore);\n\n    const store = createStoreWithMiddleware(rootReducer, load({\n        namespace: 'dicematch.state',\n    }));\n\n    sagaMiddleware.run(sagas);\n\n    window._store = store;\n\n    return store;\n};\n"],"sourceRoot":""}